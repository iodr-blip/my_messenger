(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function F0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Qd={exports:{}},Ro={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function W1(){if(nv)return Ro;nv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Ro.Fragment=e,Ro.jsx=n,Ro.jsxs=n,Ro}var iv;function ew(){return iv||(iv=1,Qd.exports=W1()),Qd.exports}var v=ew(),Yd={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function tw(){if(sv)return Ce;sv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),A=Symbol.iterator;function j(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Z={};function oe(M,Q,le){this.props=M,this.context=Q,this.refs=Z,this.updater=le||q}oe.prototype.isReactComponent={},oe.prototype.setState=function(M,Q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Q,"setState")},oe.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function te(){}te.prototype=oe.prototype;function ae(M,Q,le){this.props=M,this.context=Q,this.refs=Z,this.updater=le||q}var ye=ae.prototype=new te;ye.constructor=ae,J(ye,oe.prototype),ye.isPureReactComponent=!0;var ne=Array.isArray;function fe(){}var I={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(M,Q,le){var ce=le.ref;return{$$typeof:s,type:M,key:Q,ref:ce!==void 0?ce:null,props:le}}function C(M,Q){return R(M.type,Q,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function V(M){var Q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return Q[le]})}var N=/\/+/g;function _e(M,Q){return typeof M=="object"&&M!==null&&M.key!=null?V(""+M.key):Q.toString(36)}function Ge(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(fe,fe):(M.status="pending",M.then(function(Q){M.status==="pending"&&(M.status="fulfilled",M.value=Q)},function(Q){M.status==="pending"&&(M.status="rejected",M.reason=Q)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function G(M,Q,le,ce,Te){var Ne=typeof M;(Ne==="undefined"||Ne==="boolean")&&(M=null);var je=!1;if(M===null)je=!0;else switch(Ne){case"bigint":case"string":case"number":je=!0;break;case"object":switch(M.$$typeof){case s:case e:je=!0;break;case b:return je=M._init,G(je(M._payload),Q,le,ce,Te)}}if(je)return Te=Te(M),je=ce===""?"."+_e(M,0):ce,ne(Te)?(le="",je!=null&&(le=je.replace(N,"$&/")+"/"),G(Te,Q,le,"",function(ci){return ci})):Te!=null&&(D(Te)&&(Te=C(Te,le+(Te.key==null||M&&M.key===Te.key?"":(""+Te.key).replace(N,"$&/")+"/")+je)),Q.push(Te)),1;je=0;var _t=ce===""?".":ce+":";if(ne(M))for(var ut=0;ut<M.length;ut++)ce=M[ut],Ne=_t+_e(ce,ut),je+=G(ce,Q,le,Ne,Te);else if(ut=j(M),typeof ut=="function")for(M=ut.call(M),ut=0;!(ce=M.next()).done;)ce=ce.value,Ne=_t+_e(ce,ut++),je+=G(ce,Q,le,Ne,Te);else if(Ne==="object"){if(typeof M.then=="function")return G(Ge(M),Q,le,ce,Te);throw Q=String(M),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return je}function ie(M,Q,le){if(M==null)return M;var ce=[],Te=0;return G(M,ce,"","",function(Ne){return Q.call(le,Ne,Te++)}),ce}function me(M){if(M._status===-1){var Q=M._result;Q=Q(),Q.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=Q)}if(M._status===1)return M._result.default;throw M._result}var Ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Qe={map:ie,forEach:function(M,Q,le){ie(M,function(){Q.apply(this,arguments)},le)},count:function(M){var Q=0;return ie(M,function(){Q++}),Q},toArray:function(M){return ie(M,function(Q){return Q})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ce.Activity=S,Ce.Children=Qe,Ce.Component=oe,Ce.Fragment=n,Ce.Profiler=o,Ce.PureComponent=ae,Ce.StrictMode=r,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return I.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(M,Q,le){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ce=J({},M.props),Te=M.key;if(Q!=null)for(Ne in Q.key!==void 0&&(Te=""+Q.key),Q)!x.call(Q,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&Q.ref===void 0||(ce[Ne]=Q[Ne]);var Ne=arguments.length-2;if(Ne===1)ce.children=le;else if(1<Ne){for(var je=Array(Ne),_t=0;_t<Ne;_t++)je[_t]=arguments[_t+2];ce.children=je}return R(M.type,Te,ce)},Ce.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Ce.createElement=function(M,Q,le){var ce,Te={},Ne=null;if(Q!=null)for(ce in Q.key!==void 0&&(Ne=""+Q.key),Q)x.call(Q,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Te[ce]=Q[ce]);var je=arguments.length-2;if(je===1)Te.children=le;else if(1<je){for(var _t=Array(je),ut=0;ut<je;ut++)_t[ut]=arguments[ut+2];Te.children=_t}if(M&&M.defaultProps)for(ce in je=M.defaultProps,je)Te[ce]===void 0&&(Te[ce]=je[ce]);return R(M,Ne,Te)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:p,render:M}},Ce.isValidElement=D,Ce.lazy=function(M){return{$$typeof:b,_payload:{_status:-1,_result:M},_init:me}},Ce.memo=function(M,Q){return{$$typeof:y,type:M,compare:Q===void 0?null:Q}},Ce.startTransition=function(M){var Q=I.T,le={};I.T=le;try{var ce=M(),Te=I.S;Te!==null&&Te(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(fe,Ve)}catch(Ne){Ve(Ne)}finally{Q!==null&&le.types!==null&&(Q.types=le.types),I.T=Q}},Ce.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ce.use=function(M){return I.H.use(M)},Ce.useActionState=function(M,Q,le){return I.H.useActionState(M,Q,le)},Ce.useCallback=function(M,Q){return I.H.useCallback(M,Q)},Ce.useContext=function(M){return I.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,Q){return I.H.useDeferredValue(M,Q)},Ce.useEffect=function(M,Q){return I.H.useEffect(M,Q)},Ce.useEffectEvent=function(M){return I.H.useEffectEvent(M)},Ce.useId=function(){return I.H.useId()},Ce.useImperativeHandle=function(M,Q,le){return I.H.useImperativeHandle(M,Q,le)},Ce.useInsertionEffect=function(M,Q){return I.H.useInsertionEffect(M,Q)},Ce.useLayoutEffect=function(M,Q){return I.H.useLayoutEffect(M,Q)},Ce.useMemo=function(M,Q){return I.H.useMemo(M,Q)},Ce.useOptimistic=function(M,Q){return I.H.useOptimistic(M,Q)},Ce.useReducer=function(M,Q,le){return I.H.useReducer(M,Q,le)},Ce.useRef=function(M){return I.H.useRef(M)},Ce.useState=function(M){return I.H.useState(M)},Ce.useSyncExternalStore=function(M,Q,le){return I.H.useSyncExternalStore(M,Q,le)},Ce.useTransition=function(){return I.H.useTransition()},Ce.version="19.2.4",Ce}var rv;function Um(){return rv||(rv=1,Yd.exports=tw()),Yd.exports}var ee=Um();const nw=F0(ee);var Xd={exports:{}},Io={},$d={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function iw(){return av||(av=1,(function(s){function e(G,ie){var me=G.length;G.push(ie);e:for(;0<me;){var Ve=me-1>>>1,Qe=G[Ve];if(0<o(Qe,ie))G[Ve]=ie,G[me]=Qe,me=Ve;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ie=G[0],me=G.pop();if(me!==ie){G[0]=me;e:for(var Ve=0,Qe=G.length,M=Qe>>>1;Ve<M;){var Q=2*(Ve+1)-1,le=G[Q],ce=Q+1,Te=G[ce];if(0>o(le,me))ce<Qe&&0>o(Te,le)?(G[Ve]=Te,G[ce]=me,Ve=ce):(G[Ve]=le,G[Q]=me,Ve=Q);else if(ce<Qe&&0>o(Te,me))G[Ve]=Te,G[ce]=me,Ve=ce;else break e}}return ie}function o(G,ie){var me=G.sortIndex-ie.sortIndex;return me!==0?me:G.id-ie.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var g=[],y=[],b=1,S=null,A=3,j=!1,q=!1,J=!1,Z=!1,oe=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function ye(G){for(var ie=n(y);ie!==null;){if(ie.callback===null)r(y);else if(ie.startTime<=G)r(y),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=n(y)}}function ne(G){if(J=!1,ye(G),!q)if(n(g)!==null)q=!0,fe||(fe=!0,V());else{var ie=n(y);ie!==null&&Ge(ne,ie.startTime-G)}}var fe=!1,I=-1,x=5,R=-1;function C(){return Z?!0:!(s.unstable_now()-R<x)}function D(){if(Z=!1,fe){var G=s.unstable_now();R=G;var ie=!0;try{e:{q=!1,J&&(J=!1,te(I),I=-1),j=!0;var me=A;try{t:{for(ye(G),S=n(g);S!==null&&!(S.expirationTime>G&&C());){var Ve=S.callback;if(typeof Ve=="function"){S.callback=null,A=S.priorityLevel;var Qe=Ve(S.expirationTime<=G);if(G=s.unstable_now(),typeof Qe=="function"){S.callback=Qe,ye(G),ie=!0;break t}S===n(g)&&r(g),ye(G)}else r(g);S=n(g)}if(S!==null)ie=!0;else{var M=n(y);M!==null&&Ge(ne,M.startTime-G),ie=!1}}break e}finally{S=null,A=me,j=!1}ie=void 0}}finally{ie?V():fe=!1}}}var V;if(typeof ae=="function")V=function(){ae(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,_e=N.port2;N.port1.onmessage=D,V=function(){_e.postMessage(null)}}else V=function(){oe(D,0)};function Ge(G,ie){I=oe(function(){G(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(G){switch(A){case 1:case 2:case 3:var ie=3;break;default:ie=A}var me=A;A=ie;try{return G()}finally{A=me}},s.unstable_requestPaint=function(){Z=!0},s.unstable_runWithPriority=function(G,ie){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var me=A;A=G;try{return ie()}finally{A=me}},s.unstable_scheduleCallback=function(G,ie,me){var Ve=s.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ve+me:Ve):me=Ve,G){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=me+Qe,G={id:b++,callback:ie,priorityLevel:G,startTime:me,expirationTime:Qe,sortIndex:-1},me>Ve?(G.sortIndex=me,e(y,G),n(g)===null&&G===n(y)&&(J?(te(I),I=-1):J=!0,Ge(ne,me-Ve))):(G.sortIndex=Qe,e(g,G),q||j||(q=!0,fe||(fe=!0,V()))),G},s.unstable_shouldYield=C,s.unstable_wrapCallback=function(G){var ie=A;return function(){var me=A;A=ie;try{return G.apply(this,arguments)}finally{A=me}}}})(Jd)),Jd}var lv;function sw(){return lv||(lv=1,$d.exports=iw()),$d.exports}var Zd={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function rw(){if(ov)return sn;ov=1;var s=Um();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:y,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},sn.flushSync=function(g){var y=f.T,b=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=y,r.p=b,r.d.f()}},sn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},sn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},sn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,S=p(b,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:j}):b==="script"&&r.d.X(g,{crossOrigin:S,integrity:A,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},sn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},sn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,S=p(b,y.crossOrigin);r.d.L(g,b,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},sn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},sn.requestFormReset=function(g){r.d.r(g)},sn.unstable_batchedUpdates=function(g,y){return g(y)},sn.useFormState=function(g,y,b){return f.H.useFormState(g,y,b)},sn.useFormStatus=function(){return f.H.useHostTransitionStatus()},sn.version="19.2.4",sn}var uv;function aw(){if(uv)return Zd.exports;uv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Zd.exports=rw(),Zd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function lw(){if(cv)return Io;cv=1;var s=sw(),e=Um(),n=aw();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===l)return g(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,l=d;break}if(T===l){_=!0,l=h,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=h;break}if(T===l){_=!0,l=d,a=h;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function b(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=b(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,A=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function _e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case oe:return"Profiler";case Z:return"StrictMode";case ne:return"Suspense";case fe:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case ae:return t.displayName||"Context";case te:return(t._context.displayName||"Context")+".Consumer";case ye:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:_e(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return _e(t(i))}catch{}}return null}var Ge=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ve=[],Qe=-1;function M(t){return{current:t}}function Q(t){0>Qe||(t.current=Ve[Qe],Ve[Qe]=null,Qe--)}function le(t,i){Qe++,Ve[Qe]=t.current,t.current=i}var ce=M(null),Te=M(null),Ne=M(null),je=M(null);function _t(t,i){switch(le(Ne,i),le(Te,t),le(ce,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?S_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=S_(i),t=A_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(ce),le(ce,t)}function ut(){Q(ce),Q(Te),Q(Ne)}function ci(t){t.memoizedState!==null&&le(je,t);var i=ce.current,a=A_(i,t.type);i!==a&&(le(Te,t),le(ce,a))}function Dn(t){Te.current===t&&(Q(ce),Q(Te)),je.current===t&&(Q(je),wo._currentValue=me)}var vs,zi;function se(t){if(vs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);vs=i&&i[1]||"",zi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vs+t+zi}var de=!1;function Le(t,i){if(!t||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(F){var B=F}Reflect.construct(t,[],$)}else{try{$.call()}catch(F){B=F}t.call($.prototype)}}else{try{throw Error()}catch(F){B=F}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var O=_.split(`
`),z=T.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===z.length)for(l=O.length-1,h=z.length-1;1<=l&&0<=h&&O[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==z[h]){var K=`
`+O[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=h);break}}}finally{de=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?se(a):""}function xe(t,i){switch(t.tag){case 26:case 27:case 5:return se(t.type);case 16:return se("Lazy");case 13:return t.child!==i&&i!==null?se("Suspense Fallback"):se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return Le(t.type,!1);case 11:return Le(t.type.render,!1);case 1:return Le(t.type,!0);case 31:return se("Activity");default:return""}}function Re(t){try{var i="",a=null;do i+=xe(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var be=Object.prototype.hasOwnProperty,tt=s.unstable_scheduleCallback,nn=s.unstable_cancelCallback,Bi=s.unstable_shouldYield,Er=s.unstable_requestPaint,Kt=s.unstable_now,br=s.unstable_getCurrentPriorityLevel,Sl=s.unstable_ImmediatePriority,Al=s.unstable_UserBlockingPriority,Es=s.unstable_NormalPriority,Xh=s.unstable_LowPriority,mu=s.unstable_IdlePriority,pu=s.log,gu=s.unstable_setDisableYieldValue,Yn=null,Qt=null;function On(t){if(typeof pu=="function"&&gu(t),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Yn,t)}catch{}}var wt=Math.clz32?Math.clz32:_u,yu=Math.log,fa=Math.LN2;function _u(t){return t>>>=0,t===0?32:31-(yu(t)/fa|0)|0}var hi=256,Tr=262144,It=4194304;function fi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function di(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=fi(l):(_&=T,_!==0?h=fi(_):a||(a=T&~t,a!==0&&(h=fi(a))))):(T=l&~d,T!==0?h=fi(T):_!==0?h=fi(_):a||(a=l&~t,a!==0&&(h=fi(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Xn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function $h(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vu(){var t=It;return It<<=1,(It&62914560)===0&&(It=4194304),t}function mi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function wr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jh(t,i,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,z=t.hiddenUpdates;for(a=_&~a;0<a;){var K=31-wt(a),$=1<<K;T[K]=0,O[K]=-1;var B=z[K];if(B!==null)for(z[K]=null,K=0;K<B.length;K++){var F=B[K];F!==null&&(F.lane&=-536870913)}a&=~$}l!==0&&xr(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function xr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-wt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Rl(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-wt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Il(t,i){var a=i&-i;return a=(a&42)!==0?1:Sr(a),(a&(t.suspendedLanes|i))!==0?0:a}function Sr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function qi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Eu(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:X_(t.type))}function $n(t,i){var a=ie.p;try{return ie.p=t,i()}finally{ie.p=a}}var Jn=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Jn,qt="__reactProps$"+Jn,pi="__reactContainer$"+Jn,da="__reactEvents$"+Jn,Zh="__reactListeners$"+Jn,bu="__reactHandles$"+Jn,Tu="__reactResources$"+Jn,gi="__reactMarker$"+Jn;function ma(t){delete t[Nt],delete t[qt],delete t[da],delete t[Zh],delete t[bu]}function yi(t){var i=t[Nt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[pi]||a[Nt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=M_(t);t!==null;){if(a=t[Nt])return a;t=M_(t)}return i}t=a,a=t.parentNode}return null}function Mn(t){if(t=t[Nt]||t[pi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function bn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function _i(t){var i=t[Tu];return i||(i=t[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ct(t){t[gi]=!0}var Nl=new Set,Cl={};function vi(t,i){Ei(t,i),Ei(t+"Capture",i)}function Ei(t,i){for(Cl[t]=i,t=0;t<i.length;t++)Nl.add(i[t])}var Dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},Ml={};function wu(t){return be.call(Ml,t)?!0:be.call(Ol,t)?!1:Dl.test(t)?Ml[t]=!0:(Ol[t]=!0,!1)}function pa(t,i,a){if(wu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Tn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Dt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Ht(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bs(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vl(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function nt(t){if(!t._valueTracker){var i=bs(t)?"checked":"value";t._valueTracker=Vl(t,i,""+t[i])}}function Ar(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=bs(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function bi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rr=/[\n"\\]/g;function hn(t){return t.replace(Rr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ga(t,i,a,l,h,d,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Ht(i)):t.value!==""+Ht(i)&&(t.value=""+Ht(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?kl(t,_,Ht(i)):a!=null?kl(t,_,Ht(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ht(T):t.removeAttribute("name")}function xu(t,i,a,l,h,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){nt(t);return}a=a!=null?""+Ht(a):"",i=i!=null?""+Ht(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),nt(t)}function kl(t,i,a){i==="number"&&bi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ts(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ht(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Su(t,i,a){if(i!=null&&(i=""+Ht(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Ht(a):""}function ws(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ge(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ht(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),nt(t)}function fn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Au=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Au.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Ll(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&jl(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&jl(t,d,i[d])}function ya(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _a(t){return xs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Zn(){}var Ul=null;function Vn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ss=null,Ti=null;function Ir(t){var i=Mn(t);if(i&&(t=i.stateNode)){var a=t[qt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ga(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[qt]||null;if(!h)throw Error(r(90));ga(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ar(l)}break e;case"textarea":Su(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ts(t,!!a.multiple,i,!1)}}}var va=!1;function As(t,i,a){if(va)return t(i,a);va=!0;try{var l=t(i);return l}finally{if(va=!1,(Ss!==null||Ti!==null)&&(Ec(),Ss&&(i=Ss,t=Ti,Ti=Ss=null,Ir(i),t)))for(i=0;i<t.length;i++)Ir(t[i])}}function Wn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nr=!1;if(kn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Nr=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Nr=!1}var wi=null,Pl=null,Cr=null;function zl(){if(Cr)return Cr;var t,i=Pl,a=i.length,l,h="value"in wi?wi.value:wi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[d-l];l++);return Cr=h.slice(t,1<l?1-l:void 0)}function Dr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Hi(){return!0}function ei(){return!1}function Yt(t){function i(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Hi:ei,this.isPropagationStopped=ei,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),i}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=Yt(Fi),Rs=S({},Fi,{view:0,detail:0}),Bl=Yt(Rs),Is,Ea,Si,ba=S({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Si&&(Si&&t.type==="mousemove"?(Is=t.screenX-Si.screenX,Ea=t.screenY-Si.screenY):Ea=Is=0,Si=t),Is)},movementY:function(t){return"movementY"in t?t.movementY:Ea}}),ql=Yt(ba),Or=S({},ba,{dataTransfer:0}),Iu=Yt(Or),Nu=S({},Rs,{relatedTarget:0}),Mr=Yt(Nu),Hl=S({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Cu=Yt(Hl),Ta=S({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Du=Yt(Ta),Ou=S({},Fi,{data:0}),Ai=Yt(Ou),Mu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ku[t])?!!i[t]:!1}function Ns(){return ju}var un=S({},Rs,{key:function(t){if(t.key){var i=Mu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Dr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(t){return t.type==="keypress"?Dr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lu=Yt(un),Uu=S({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gi=Yt(Uu),c=S({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),m=Yt(c),E=S({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Yt(E),U=S({},ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Yt(U),re=S({},Fi,{newState:0,oldState:0}),Oe=Yt(re),xt=[9,13,27,32],Je=kn&&"CompositionEvent"in window,pt=null;kn&&"documentMode"in document&&(pt=document.documentMode);var jn=kn&&"TextEvent"in window&&!pt,Ri=kn&&(!Je||pt&&8<pt&&11>=pt),ti=" ",ni=!1;function Vr(t,i){switch(t){case"keyup":return xt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function wT(t,i){switch(t){case"compositionend":return wa(i);case"keypress":return i.which!==32?null:(ni=!0,ti);case"textInput":return t=i.data,t===ti&&ni?null:t;default:return null}}function xT(t,i){if(xa)return t==="compositionend"||!Je&&Vr(t,i)?(t=zl(),Cr=Pl=wi=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var ST={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!ST[t.type]:i==="textarea"}function Lp(t,i,a,l){Ss?Ti?Ti.push(l):Ti=[l]:Ss=l,i=Rc(i,"onChange"),0<i.length&&(a=new xi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Fl=null,Gl=null;function AT(t){v_(t,0)}function Pu(t){var i=bn(t);if(Ar(i))return t}function Up(t,i){if(t==="change")return i}var Pp=!1;if(kn){var Wh;if(kn){var ef="oninput"in document;if(!ef){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),ef=typeof zp.oninput=="function"}Wh=ef}else Wh=!1;Pp=Wh&&(!document.documentMode||9<document.documentMode)}function Bp(){Fl&&(Fl.detachEvent("onpropertychange",qp),Gl=Fl=null)}function qp(t){if(t.propertyName==="value"&&Pu(Gl)){var i=[];Lp(i,Gl,t,Vn(t)),As(AT,i)}}function RT(t,i,a){t==="focusin"?(Bp(),Fl=i,Gl=a,Fl.attachEvent("onpropertychange",qp)):t==="focusout"&&Bp()}function IT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pu(Gl)}function NT(t,i){if(t==="click")return Pu(i)}function CT(t,i){if(t==="input"||t==="change")return Pu(i)}function DT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var wn=typeof Object.is=="function"?Object.is:DT;function Kl(t,i){if(wn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!be.call(i,h)||!wn(t[h],i[h]))return!1}return!0}function Hp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fp(t,i){var a=Hp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hp(a)}}function Gp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Gp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Kp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=bi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=bi(t.document)}return i}function tf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var OT=kn&&"documentMode"in document&&11>=document.documentMode,Sa=null,nf=null,Ql=null,sf=!1;function Qp(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sf||Sa==null||Sa!==bi(l)||(l=Sa,"selectionStart"in l&&tf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ql&&Kl(Ql,l)||(Ql=l,l=Rc(nf,"onSelect"),0<l.length&&(i=new xi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Sa)))}function kr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Aa={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionrun:kr("Transition","TransitionRun"),transitionstart:kr("Transition","TransitionStart"),transitioncancel:kr("Transition","TransitionCancel"),transitionend:kr("Transition","TransitionEnd")},rf={},Yp={};kn&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function jr(t){if(rf[t])return rf[t];if(!Aa[t])return t;var i=Aa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Yp)return rf[t]=i[a];return t}var Xp=jr("animationend"),$p=jr("animationiteration"),Jp=jr("animationstart"),MT=jr("transitionrun"),VT=jr("transitionstart"),kT=jr("transitioncancel"),Zp=jr("transitionend"),Wp=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function ii(t,i){Wp.set(t,i),vi(i,[t])}var zu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ln=[],Ra=0,lf=0;function Bu(){for(var t=Ra,i=lf=Ra=0;i<t;){var a=Ln[i];Ln[i++]=null;var l=Ln[i];Ln[i++]=null;var h=Ln[i];Ln[i++]=null;var d=Ln[i];if(Ln[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&eg(a,h,d)}}function qu(t,i,a,l){Ln[Ra++]=t,Ln[Ra++]=i,Ln[Ra++]=a,Ln[Ra++]=l,lf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function of(t,i,a,l){return qu(t,i,a,l),Hu(t)}function Lr(t,i){return qu(t,null,null,i),Hu(t)}function eg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-wt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Hu(t){if(50<go)throw go=0,yd=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ia={};function jT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,i,a,l){return new jT(t,i,a,l)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ki(t,i){var a=t.alternate;return a===null?(a=xn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function tg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Fu(t,i,a,l,h,d){var _=0;if(l=t,typeof t=="function")uf(t)&&(_=1);else if(typeof t=="string")_=B1(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=xn(31,a,i,h),t.elementType=R,t.lanes=d,t;case J:return Ur(a.children,h,d,i);case Z:_=8,h|=24;break;case oe:return t=xn(12,a,i,h|2),t.elementType=oe,t.lanes=d,t;case ne:return t=xn(13,a,i,h),t.elementType=ne,t.lanes=d,t;case fe:return t=xn(19,a,i,h),t.elementType=fe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ae:_=10;break e;case te:_=9;break e;case ye:_=11;break e;case I:_=14;break e;case x:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=xn(_,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Ur(t,i,a,l){return t=xn(7,t,l,i),t.lanes=a,t}function cf(t,i,a){return t=xn(6,t,null,i),t.lanes=a,t}function ng(t){var i=xn(18,null,null,0);return i.stateNode=t,i}function hf(t,i,a){return i=xn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ig=new WeakMap;function Un(t,i){if(typeof t=="object"&&t!==null){var a=ig.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Re(i)},ig.set(t,i),i)}return{value:t,source:i,stack:Re(i)}}var Na=[],Ca=0,Gu=null,Yl=0,Pn=[],zn=0,Cs=null,Ii=1,Ni="";function Qi(t,i){Na[Ca++]=Yl,Na[Ca++]=Gu,Gu=t,Yl=i}function sg(t,i,a){Pn[zn++]=Ii,Pn[zn++]=Ni,Pn[zn++]=Cs,Cs=t;var l=Ii;t=Ni;var h=32-wt(l)-1;l&=~(1<<h),a+=1;var d=32-wt(i)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Ii=1<<32-wt(i)+h|a<<h|l,Ni=d+t}else Ii=1<<d|a<<h|l,Ni=t}function ff(t){t.return!==null&&(Qi(t,1),sg(t,1,0))}function df(t){for(;t===Gu;)Gu=Na[--Ca],Na[Ca]=null,Yl=Na[--Ca],Na[Ca]=null;for(;t===Cs;)Cs=Pn[--zn],Pn[zn]=null,Ni=Pn[--zn],Pn[zn]=null,Ii=Pn[--zn],Pn[zn]=null}function rg(t,i){Pn[zn++]=Ii,Pn[zn++]=Ni,Pn[zn++]=Cs,Ii=i.id,Ni=i.overflow,Cs=t}var Xt=null,ft=null,Ke=!1,Ds=null,Bn=!1,mf=Error(r(519));function Os(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xl(Un(i,t)),mf}function ag(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Nt]=t,i[qt]=l,a){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(a=0;a<_o.length;a++)Pe(_o[a],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),xu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),ws(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||w_(i.textContent,a)?(l.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),l.onScroll!=null&&Pe("scroll",i),l.onScrollEnd!=null&&Pe("scrollend",i),l.onClick!=null&&(i.onclick=Zn),i=!0):i=!1,i||Os(t,!0)}function lg(t){for(Xt=t.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:Xt=Xt.return}}function Da(t){if(t!==Xt)return!1;if(!Ke)return lg(t),Ke=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Od(t.type,t.memoizedProps)),a=!a),a&&ft&&Os(t),lg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));ft=O_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));ft=O_(t)}else i===27?(i=ft,Ks(t.type)?(t=Ld,Ld=null,ft=t):ft=i):ft=Xt?Hn(t.stateNode.nextSibling):null;return!0}function Pr(){ft=Xt=null,Ke=!1}function pf(){var t=Ds;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),Ds=null),t}function Xl(t){Ds===null?Ds=[t]:Ds.push(t)}var gf=M(null),zr=null,Yi=null;function Ms(t,i,a){le(gf,i._currentValue),i._currentValue=a}function Xi(t){t._currentValue=gf.current,Q(gf)}function yf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function _f(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var O=0;O<i.length;O++)if(T.context===i[O]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),yf(d.return,a,t),l||(_=null);break e}d=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),yf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Oa(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=h.type;wn(h.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(h===je.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(wo):t=[wo])}h=h.return}t!==null&&_f(i,t,a,l),i.flags|=262144}function Ku(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Br(t){zr=t,Yi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $t(t){return og(zr,t)}function Qu(t,i){return zr===null&&Br(t),og(t,i)}function og(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Yi===null){if(t===null)throw Error(r(308));Yi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Yi=Yi.next=i;return a}var LT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},UT=s.unstable_scheduleCallback,PT=s.unstable_NormalPriority,Ot={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new LT,data:new Map,refCount:0}}function $l(t){t.refCount--,t.refCount===0&&UT(PT,function(){t.controller.abort()})}var Jl=null,Ef=0,Ma=0,Va=null;function zT(t,i){if(Jl===null){var a=Jl=[];Ef=0,Ma=wd(),Va={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ef++,i.then(ug,ug),i}function ug(){if(--Ef===0&&Jl!==null){Va!==null&&(Va.status="fulfilled");var t=Jl;Jl=null,Ma=0,Va=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function BT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var cg=G.S;G.S=function(t,i){Qy=Kt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&zT(t,i),cg!==null&&cg(t,i)};var qr=M(null);function bf(){var t=qr.current;return t!==null?t:ct.pooledCache}function Yu(t,i){i===null?le(qr,qr.current):le(qr,i.pool)}function hg(){var t=bf();return t===null?null:{parent:Ot._currentValue,pool:t}}var ka=Error(r(460)),Tf=Error(r(474)),Xu=Error(r(542)),$u={then:function(){}};function fg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Zn,Zn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,pg(t),t;default:if(typeof i.status=="string")i.then(Zn,Zn);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,pg(t),t}throw Fr=i,ka}}function Hr(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Fr=a,ka):a}}var Fr=null;function mg(){if(Fr===null)throw Error(r(459));var t=Fr;return Fr=null,t}function pg(t){if(t===ka||t===Xu)throw Error(r(483))}var ja=null,Zl=0;function Ju(t){var i=Zl;return Zl+=1,ja===null&&(ja=[]),dg(ja,t,i)}function Wl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Zu(t,i){throw i.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function gg(t){function i(L,k){if(t){var P=L.deletions;P===null?(L.deletions=[k],L.flags|=16):P.push(k)}}function a(L,k){if(!t)return null;for(;k!==null;)i(L,k),k=k.sibling;return null}function l(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function h(L,k){return L=Ki(L,k),L.index=0,L.sibling=null,L}function d(L,k,P){return L.index=P,t?(P=L.alternate,P!==null?(P=P.index,P<k?(L.flags|=67108866,k):P):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function _(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function T(L,k,P,Y){return k===null||k.tag!==6?(k=cf(P,L.mode,Y),k.return=L,k):(k=h(k,P),k.return=L,k)}function O(L,k,P,Y){var ve=P.type;return ve===J?K(L,k,P.props.children,Y,P.key):k!==null&&(k.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&Hr(ve)===k.type)?(k=h(k,P.props),Wl(k,P),k.return=L,k):(k=Fu(P.type,P.key,P.props,null,L.mode,Y),Wl(k,P),k.return=L,k)}function z(L,k,P,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==P.containerInfo||k.stateNode.implementation!==P.implementation?(k=hf(P,L.mode,Y),k.return=L,k):(k=h(k,P.children||[]),k.return=L,k)}function K(L,k,P,Y,ve){return k===null||k.tag!==7?(k=Ur(P,L.mode,Y,ve),k.return=L,k):(k=h(k,P),k.return=L,k)}function $(L,k,P){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=cf(""+k,L.mode,P),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case j:return P=Fu(k.type,k.key,k.props,null,L.mode,P),Wl(P,k),P.return=L,P;case q:return k=hf(k,L.mode,P),k.return=L,k;case x:return k=Hr(k),$(L,k,P)}if(Ge(k)||V(k))return k=Ur(k,L.mode,P,null),k.return=L,k;if(typeof k.then=="function")return $(L,Ju(k),P);if(k.$$typeof===ae)return $(L,Qu(L,k),P);Zu(L,k)}return null}function B(L,k,P,Y){var ve=k!==null?k.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return ve!==null?null:T(L,k,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case j:return P.key===ve?O(L,k,P,Y):null;case q:return P.key===ve?z(L,k,P,Y):null;case x:return P=Hr(P),B(L,k,P,Y)}if(Ge(P)||V(P))return ve!==null?null:K(L,k,P,Y,null);if(typeof P.then=="function")return B(L,k,Ju(P),Y);if(P.$$typeof===ae)return B(L,k,Qu(L,P),Y);Zu(L,P)}return null}function F(L,k,P,Y,ve){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return L=L.get(P)||null,T(k,L,""+Y,ve);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case j:return L=L.get(Y.key===null?P:Y.key)||null,O(k,L,Y,ve);case q:return L=L.get(Y.key===null?P:Y.key)||null,z(k,L,Y,ve);case x:return Y=Hr(Y),F(L,k,P,Y,ve)}if(Ge(Y)||V(Y))return L=L.get(P)||null,K(k,L,Y,ve,null);if(typeof Y.then=="function")return F(L,k,P,Ju(Y),ve);if(Y.$$typeof===ae)return F(L,k,P,Qu(k,Y),ve);Zu(k,Y)}return null}function pe(L,k,P,Y){for(var ve=null,Xe=null,ge=k,ke=k=0,Be=null;ge!==null&&ke<P.length;ke++){ge.index>ke?(Be=ge,ge=null):Be=ge.sibling;var $e=B(L,ge,P[ke],Y);if($e===null){ge===null&&(ge=Be);break}t&&ge&&$e.alternate===null&&i(L,ge),k=d($e,k,ke),Xe===null?ve=$e:Xe.sibling=$e,Xe=$e,ge=Be}if(ke===P.length)return a(L,ge),Ke&&Qi(L,ke),ve;if(ge===null){for(;ke<P.length;ke++)ge=$(L,P[ke],Y),ge!==null&&(k=d(ge,k,ke),Xe===null?ve=ge:Xe.sibling=ge,Xe=ge);return Ke&&Qi(L,ke),ve}for(ge=l(ge);ke<P.length;ke++)Be=F(ge,L,ke,P[ke],Y),Be!==null&&(t&&Be.alternate!==null&&ge.delete(Be.key===null?ke:Be.key),k=d(Be,k,ke),Xe===null?ve=Be:Xe.sibling=Be,Xe=Be);return t&&ge.forEach(function(Js){return i(L,Js)}),Ke&&Qi(L,ke),ve}function we(L,k,P,Y){if(P==null)throw Error(r(151));for(var ve=null,Xe=null,ge=k,ke=k=0,Be=null,$e=P.next();ge!==null&&!$e.done;ke++,$e=P.next()){ge.index>ke?(Be=ge,ge=null):Be=ge.sibling;var Js=B(L,ge,$e.value,Y);if(Js===null){ge===null&&(ge=Be);break}t&&ge&&Js.alternate===null&&i(L,ge),k=d(Js,k,ke),Xe===null?ve=Js:Xe.sibling=Js,Xe=Js,ge=Be}if($e.done)return a(L,ge),Ke&&Qi(L,ke),ve;if(ge===null){for(;!$e.done;ke++,$e=P.next())$e=$(L,$e.value,Y),$e!==null&&(k=d($e,k,ke),Xe===null?ve=$e:Xe.sibling=$e,Xe=$e);return Ke&&Qi(L,ke),ve}for(ge=l(ge);!$e.done;ke++,$e=P.next())$e=F(ge,L,ke,$e.value,Y),$e!==null&&(t&&$e.alternate!==null&&ge.delete($e.key===null?ke:$e.key),k=d($e,k,ke),Xe===null?ve=$e:Xe.sibling=$e,Xe=$e);return t&&ge.forEach(function(Z1){return i(L,Z1)}),Ke&&Qi(L,ke),ve}function ot(L,k,P,Y){if(typeof P=="object"&&P!==null&&P.type===J&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case j:e:{for(var ve=P.key;k!==null;){if(k.key===ve){if(ve=P.type,ve===J){if(k.tag===7){a(L,k.sibling),Y=h(k,P.props.children),Y.return=L,L=Y;break e}}else if(k.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&Hr(ve)===k.type){a(L,k.sibling),Y=h(k,P.props),Wl(Y,P),Y.return=L,L=Y;break e}a(L,k);break}else i(L,k);k=k.sibling}P.type===J?(Y=Ur(P.props.children,L.mode,Y,P.key),Y.return=L,L=Y):(Y=Fu(P.type,P.key,P.props,null,L.mode,Y),Wl(Y,P),Y.return=L,L=Y)}return _(L);case q:e:{for(ve=P.key;k!==null;){if(k.key===ve)if(k.tag===4&&k.stateNode.containerInfo===P.containerInfo&&k.stateNode.implementation===P.implementation){a(L,k.sibling),Y=h(k,P.children||[]),Y.return=L,L=Y;break e}else{a(L,k);break}else i(L,k);k=k.sibling}Y=hf(P,L.mode,Y),Y.return=L,L=Y}return _(L);case x:return P=Hr(P),ot(L,k,P,Y)}if(Ge(P))return pe(L,k,P,Y);if(V(P)){if(ve=V(P),typeof ve!="function")throw Error(r(150));return P=ve.call(P),we(L,k,P,Y)}if(typeof P.then=="function")return ot(L,k,Ju(P),Y);if(P.$$typeof===ae)return ot(L,k,Qu(L,P),Y);Zu(L,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,k!==null&&k.tag===6?(a(L,k.sibling),Y=h(k,P),Y.return=L,L=Y):(a(L,k),Y=cf(P,L.mode,Y),Y.return=L,L=Y),_(L)):a(L,k)}return function(L,k,P,Y){try{Zl=0;var ve=ot(L,k,P,Y);return ja=null,ve}catch(ge){if(ge===ka||ge===Xu)throw ge;var Xe=xn(29,ge,null,L.mode);return Xe.lanes=Y,Xe.return=L,Xe}finally{}}}var Gr=gg(!0),yg=gg(!1),Vs=!1;function wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ks(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function js(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Hu(t),eg(t,null,a),i}return qu(t,l,i,a),Hu(t)}function eo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Rl(t,a)}}function Sf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Af=!1;function to(){if(Af){var t=Va;if(t!==null)throw t}}function no(t,i,a,l){Af=!1;var h=t.updateQueue;Vs=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var O=T,z=O.next;O.next=null,_===null?d=z:_.next=z,_=O;var K=t.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==_&&(T===null?K.firstBaseUpdate=z:T.next=z,K.lastBaseUpdate=O))}if(d!==null){var $=h.baseState;_=0,K=z=O=null,T=d;do{var B=T.lane&-536870913,F=B!==T.lane;if(F?(ze&B)===B:(l&B)===B){B!==0&&B===Ma&&(Af=!0),K!==null&&(K=K.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var pe=t,we=T;B=i;var ot=a;switch(we.tag){case 1:if(pe=we.payload,typeof pe=="function"){$=pe.call(ot,$,B);break e}$=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=we.payload,B=typeof pe=="function"?pe.call(ot,$,B):pe,B==null)break e;$=S({},$,B);break e;case 2:Vs=!0}}B=T.callback,B!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[B]:F.push(B))}else F={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(z=K=F,O=$):K=K.next=F,_|=B;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;F=T,T=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);K===null&&(O=$),h.baseState=O,h.firstBaseUpdate=z,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),Bs|=_,t.lanes=_,t.memoizedState=$}}function _g(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function vg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)_g(a[t],i)}var La=M(null),Wu=M(0);function Eg(t,i){t=ss,le(Wu,t),le(La,i),ss=t|i.baseLanes}function Rf(){le(Wu,ss),le(La,La.current)}function If(){ss=Wu.current,Q(La),Q(Wu)}var Sn=M(null),qn=null;function Ls(t){var i=t.alternate;le(St,St.current&1),le(Sn,t),qn===null&&(i===null||La.current!==null||i.memoizedState!==null)&&(qn=t)}function Nf(t){le(St,St.current),le(Sn,t),qn===null&&(qn=t)}function bg(t){t.tag===22?(le(St,St.current),le(Sn,t),qn===null&&(qn=t)):Us()}function Us(){le(St,St.current),le(Sn,Sn.current)}function An(t){Q(Sn),qn===t&&(qn=null),Q(St)}var St=M(0);function ec(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||kd(a)||jd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $i=0,Me=null,at=null,Mt=null,tc=!1,Ua=!1,Kr=!1,nc=0,io=0,Pa=null,qT=0;function vt(){throw Error(r(321))}function Cf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!wn(t[a],i[a]))return!1;return!0}function Df(t,i,a,l,h,d){return $i=d,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?sy:Kf,Kr=!1,d=a(l,h),Kr=!1,Ua&&(d=wg(i,a,l,h)),Tg(t),d}function Tg(t){G.H=ao;var i=at!==null&&at.next!==null;if($i=0,Mt=at=Me=null,tc=!1,io=0,Pa=null,i)throw Error(r(300));t===null||Vt||(t=t.dependencies,t!==null&&Ku(t)&&(Vt=!0))}function wg(t,i,a,l){Me=t;var h=0;do{if(Ua&&(Pa=null),io=0,Ua=!1,25<=h)throw Error(r(301));if(h+=1,Mt=at=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=ry,d=i(a,l)}while(Ua);return d}function HT(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?so(i):i,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(Me.flags|=1024),i}function Of(){var t=nc!==0;return nc=0,t}function Mf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Vf(t){if(tc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}tc=!1}$i=0,Mt=at=Me=null,Ua=!1,io=nc=0,Pa=null}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Me.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function At(){if(at===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var i=Mt===null?Me.memoizedState:Mt.next;if(i!==null)Mt=i,at=t;else{if(t===null)throw Me.alternate===null?Error(r(467)):Error(r(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Mt===null?Me.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function ic(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function so(t){var i=io;return io+=1,Pa===null&&(Pa=[]),t=dg(Pa,t,i),i=Me,(Mt===null?i.memoizedState:Mt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?sy:Kf),t}function sc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return so(t);if(t.$$typeof===ae)return $t(t)}throw Error(r(438,String(t)))}function kf(t){var i=null,a=Me.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ic(),Me.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=C;return i.index++,a}function Ji(t,i){return typeof i=="function"?i(t):i}function rc(t){var i=At();return jf(i,at,t)}function jf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=_=null,O=null,z=i,K=!1;do{var $=z.lane&-536870913;if($!==z.lane?(ze&$)===$:($i&$)===$){var B=z.revertLane;if(B===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),$===Ma&&(K=!0);else if(($i&B)===B){z=z.next,B===Ma&&(K=!0);continue}else $={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},O===null?(T=O=$,_=d):O=O.next=$,Me.lanes|=B,Bs|=B;$=z.action,Kr&&a(d,$),d=z.hasEagerState?z.eagerState:a(d,$)}else B={lane:$,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},O===null?(T=O=B,_=d):O=O.next=B,Me.lanes|=$,Bs|=$;z=z.next}while(z!==null&&z!==i);if(O===null?_=d:O.next=T,!wn(d,t.memoizedState)&&(Vt=!0,K&&(a=Va,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=O,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Lf(t){var i=At(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);wn(d,i.memoizedState)||(Vt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function xg(t,i,a){var l=Me,h=At(),d=Ke;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!wn((at||h).memoizedState,a);if(_&&(h.memoizedState=a,Vt=!0),h=h.queue,zf(Rg.bind(null,l,h,t),[t]),h.getSnapshot!==i||_||Mt!==null&&Mt.memoizedState.tag&1){if(l.flags|=2048,za(9,{destroy:void 0},Ag.bind(null,l,h,a,i),null),ct===null)throw Error(r(349));d||($i&127)!==0||Sg(l,i,a)}return a}function Sg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Me.updateQueue,i===null?(i=ic(),Me.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Ag(t,i,a,l){i.value=a,i.getSnapshot=l,Ig(i)&&Ng(t)}function Rg(t,i,a){return a(function(){Ig(i)&&Ng(t)})}function Ig(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!wn(t,a)}catch{return!0}}function Ng(t){var i=Lr(t,2);i!==null&&yn(i,t,2)}function Uf(t){var i=cn();if(typeof t=="function"){var a=t;if(t=a(),Kr){On(!0);try{a()}finally{On(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:t},i}function Cg(t,i,a,l){return t.baseState=a,jf(t,at,typeof l=="function"?l:Ji)}function FT(t,i,a,l,h){if(oc(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Dg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Dg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=G.T,_={};G.T=_;try{var T=a(h,l),O=G.S;O!==null&&O(_,T),Og(t,i,T)}catch(z){Pf(t,i,z)}finally{d!==null&&_.types!==null&&(d.types=_.types),G.T=d}}else try{d=a(h,l),Og(t,i,d)}catch(z){Pf(t,i,z)}}function Og(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Mg(t,i,l)},function(l){return Pf(t,i,l)}):Mg(t,i,a)}function Mg(t,i,a){i.status="fulfilled",i.value=a,Vg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Dg(t,a)))}function Pf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Vg(i),i=i.next;while(i!==l)}t.action=null}function Vg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function kg(t,i){return i}function jg(t,i){if(Ke){var a=ct.formState;if(a!==null){e:{var l=Me;if(Ke){if(ft){t:{for(var h=ft,d=Bn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Hn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ft=Hn(h.nextSibling),l=h.data==="F!";break e}}Os(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kg,lastRenderedState:i},a.queue=l,a=ty.bind(null,Me,l),l.dispatch=a,l=Uf(!1),d=Gf.bind(null,Me,!1,l.queue),l=cn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=FT.bind(null,Me,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Lg(t){var i=At();return Ug(i,at,t)}function Ug(t,i,a){if(i=jf(t,i,kg)[0],t=rc(Ji)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=so(i)}catch(_){throw _===ka?Xu:_}else l=i;i=At();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Me.flags|=2048,za(9,{destroy:void 0},GT.bind(null,h,a),null)),[l,d,t]}function GT(t,i){t.action=i}function Pg(t){var i=At(),a=at;if(a!==null)return Ug(i,a,t);At(),i=i.memoizedState,a=At();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function za(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Me.updateQueue,i===null&&(i=ic(),Me.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function zg(){return At().memoizedState}function ac(t,i,a,l){var h=cn();Me.flags|=t,h.memoizedState=za(1|i,{destroy:void 0},a,l===void 0?null:l)}function lc(t,i,a,l){var h=At();l=l===void 0?null:l;var d=h.memoizedState.inst;at!==null&&l!==null&&Cf(l,at.memoizedState.deps)?h.memoizedState=za(i,d,a,l):(Me.flags|=t,h.memoizedState=za(1|i,d,a,l))}function Bg(t,i){ac(8390656,8,t,i)}function zf(t,i){lc(2048,8,t,i)}function KT(t){Me.flags|=4;var i=Me.updateQueue;if(i===null)i=ic(),Me.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function qg(t){var i=At().memoizedState;return KT({ref:i,nextImpl:t}),function(){if((Ze&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Hg(t,i){return lc(4,2,t,i)}function Fg(t,i){return lc(4,4,t,i)}function Gg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Kg(t,i,a){a=a!=null?a.concat([t]):null,lc(4,4,Gg.bind(null,i,t),a)}function Bf(){}function Qg(t,i){var a=At();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Cf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Yg(t,i){var a=At();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Cf(i,l[1]))return l[0];if(l=t(),Kr){On(!0);try{t()}finally{On(!1)}}return a.memoizedState=[l,i],l}function qf(t,i,a){return a===void 0||($i&1073741824)!==0&&(ze&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Xy(),Me.lanes|=t,Bs|=t,a)}function Xg(t,i,a,l){return wn(a,i)?a:La.current!==null?(t=qf(t,a,l),wn(t,i)||(Vt=!0),t):($i&42)===0||($i&1073741824)!==0&&(ze&261930)===0?(Vt=!0,t.memoizedState=a):(t=Xy(),Me.lanes|=t,Bs|=t,i)}function $g(t,i,a,l,h){var d=ie.p;ie.p=d!==0&&8>d?d:8;var _=G.T,T={};G.T=T,Gf(t,!1,i,a);try{var O=h(),z=G.S;if(z!==null&&z(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var K=BT(O,l);ro(t,i,K,Nn(t))}else ro(t,i,l,Nn(t))}catch($){ro(t,i,{then:function(){},status:"rejected",reason:$},Nn())}finally{ie.p=d,_!==null&&T.types!==null&&(_.types=T.types),G.T=_}}function QT(){}function Hf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=Jg(t).queue;$g(t,h,i,me,a===null?QT:function(){return Zg(t),a(l)})}function Jg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:me},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Zg(t){var i=Jg(t);i.next===null&&(i=t.alternate.memoizedState),ro(t,i.next.queue,{},Nn())}function Ff(){return $t(wo)}function Wg(){return At().memoizedState}function ey(){return At().memoizedState}function YT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();t=ks(a);var l=js(i,t,a);l!==null&&(yn(l,i,a),eo(l,i,a)),i={cache:vf()},t.payload=i;return}i=i.return}}function XT(t,i,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},oc(t)?ny(i,a):(a=of(t,i,a,l),a!==null&&(yn(a,t,l),iy(a,i,l)))}function ty(t,i,a){var l=Nn();ro(t,i,a,l)}function ro(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(t))ny(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(h.hasEagerState=!0,h.eagerState=T,wn(T,_))return qu(t,i,h,0),ct===null&&Bu(),!1}catch{}finally{}if(a=of(t,i,h,l),a!==null)return yn(a,t,l),iy(a,i,l),!0}return!1}function Gf(t,i,a,l){if(l={lane:2,revertLane:wd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},oc(t)){if(i)throw Error(r(479))}else i=of(t,a,l,2),i!==null&&yn(i,t,2)}function oc(t){var i=t.alternate;return t===Me||i!==null&&i===Me}function ny(t,i){Ua=tc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function iy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Rl(t,a)}}var ao={readContext:$t,use:sc,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};ao.useEffectEvent=vt;var sy={readContext:$t,use:sc,useCallback:function(t,i){return cn().memoizedState=[t,i===void 0?null:i],t},useContext:$t,useEffect:Bg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,ac(4194308,4,Gg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ac(4194308,4,t,i)},useInsertionEffect:function(t,i){ac(4,2,t,i)},useMemo:function(t,i){var a=cn();i=i===void 0?null:i;var l=t();if(Kr){On(!0);try{t()}finally{On(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=cn();if(a!==void 0){var h=a(i);if(Kr){On(!0);try{a(i)}finally{On(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=XT.bind(null,Me,t),[l.memoizedState,t]},useRef:function(t){var i=cn();return t={current:t},i.memoizedState=t},useState:function(t){t=Uf(t);var i=t.queue,a=ty.bind(null,Me,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Bf,useDeferredValue:function(t,i){var a=cn();return qf(a,t,i)},useTransition:function(){var t=Uf(!1);return t=$g.bind(null,Me,t.queue,!0,!1),cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Me,h=cn();if(Ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ct===null)throw Error(r(349));(ze&127)!==0||Sg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Bg(Rg.bind(null,l,d,t),[t]),l.flags|=2048,za(9,{destroy:void 0},Ag.bind(null,l,d,a,i),null),a},useId:function(){var t=cn(),i=ct.identifierPrefix;if(Ke){var a=Ni,l=Ii;a=(l&~(1<<32-wt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=nc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=qT++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Ff,useFormState:jg,useActionState:jg,useOptimistic:function(t){var i=cn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Gf.bind(null,Me,!0,a),a.dispatch=i,[t,i]},useMemoCache:kf,useCacheRefresh:function(){return cn().memoizedState=YT.bind(null,Me)},useEffectEvent:function(t){var i=cn(),a={impl:t};return i.memoizedState=a,function(){if((Ze&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Kf={readContext:$t,use:sc,useCallback:Qg,useContext:$t,useEffect:zf,useImperativeHandle:Kg,useInsertionEffect:Hg,useLayoutEffect:Fg,useMemo:Yg,useReducer:rc,useRef:zg,useState:function(){return rc(Ji)},useDebugValue:Bf,useDeferredValue:function(t,i){var a=At();return Xg(a,at.memoizedState,t,i)},useTransition:function(){var t=rc(Ji)[0],i=At().memoizedState;return[typeof t=="boolean"?t:so(t),i]},useSyncExternalStore:xg,useId:Wg,useHostTransitionStatus:Ff,useFormState:Lg,useActionState:Lg,useOptimistic:function(t,i){var a=At();return Cg(a,at,t,i)},useMemoCache:kf,useCacheRefresh:ey};Kf.useEffectEvent=qg;var ry={readContext:$t,use:sc,useCallback:Qg,useContext:$t,useEffect:zf,useImperativeHandle:Kg,useInsertionEffect:Hg,useLayoutEffect:Fg,useMemo:Yg,useReducer:Lf,useRef:zg,useState:function(){return Lf(Ji)},useDebugValue:Bf,useDeferredValue:function(t,i){var a=At();return at===null?qf(a,t,i):Xg(a,at.memoizedState,t,i)},useTransition:function(){var t=Lf(Ji)[0],i=At().memoizedState;return[typeof t=="boolean"?t:so(t),i]},useSyncExternalStore:xg,useId:Wg,useHostTransitionStatus:Ff,useFormState:Pg,useActionState:Pg,useOptimistic:function(t,i){var a=At();return at!==null?Cg(a,at,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:kf,useCacheRefresh:ey};ry.useEffectEvent=qg;function Qf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Yf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Nn(),h=ks(l);h.payload=i,a!=null&&(h.callback=a),i=js(t,h,l),i!==null&&(yn(i,t,l),eo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Nn(),h=ks(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=js(t,h,l),i!==null&&(yn(i,t,l),eo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Nn(),l=ks(a);l.tag=2,i!=null&&(l.callback=i),i=js(t,l,a),i!==null&&(yn(i,t,a),eo(i,t,a))}};function ay(t,i,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Kl(a,l)||!Kl(h,d):!0}function ly(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Yf.enqueueReplaceState(i,i.state,null)}function Qr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function oy(t){zu(t)}function uy(t){console.error(t)}function cy(t){zu(t)}function uc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function hy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(t,i,a){return a=ks(a),a.tag=3,a.payload={element:null},a.callback=function(){uc(t,i)},a}function fy(t){return t=ks(t),t.tag=3,t}function dy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){hy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){hy(i,a,l),typeof h!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function $T(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Oa(i,a,h,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return qn===null?bc():a.alternate===null&&Et===0&&(Et=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===$u?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Ed(t,l,h)),!1;case 22:return a.flags|=65536,l===$u?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Ed(t,l,h)),!1}throw Error(r(435,a.tag))}return Ed(t,l,h),bc(),!1}if(Ke)return i=Sn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==mf&&(t=Error(r(422),{cause:l}),Xl(Un(t,a)))):(l!==mf&&(i=Error(r(423),{cause:l}),Xl(Un(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Un(l,a),h=Xf(t.stateNode,l,h),Sf(t,h),Et!==4&&(Et=2)),!1;var d=Error(r(520),{cause:l});if(d=Un(d,a),po===null?po=[d]:po.push(d),Et!==4&&(Et=2),i===null)return!0;l=Un(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Xf(a.stateNode,l,t),Sf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(qs===null||!qs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=fy(h),dy(h,t,a,l),Sf(a,h),!1}a=a.return}while(a!==null);return!1}var $f=Error(r(461)),Vt=!1;function Jt(t,i,a,l){i.child=t===null?yg(i,null,a,l):Gr(i,t.child,a,l)}function my(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Br(i),l=Df(t,i,a,_,d,h),T=Of(),t!==null&&!Vt?(Mf(t,i,h),Zi(t,i,h)):(Ke&&T&&ff(i),i.flags|=1,Jt(t,i,l,h),i.child)}function py(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!uf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,gy(t,i,d,l,h)):(t=Fu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!sd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Kl,a(_,l)&&t.ref===i.ref)return Zi(t,i,h)}return i.flags|=1,t=Ki(d,l),t.ref=i.ref,t.return=i,i.child=t}function gy(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Kl(d,l)&&t.ref===i.ref)if(Vt=!1,i.pendingProps=l=d,sd(t,h))(t.flags&131072)!==0&&(Vt=!0);else return i.lanes=t.lanes,Zi(t,i,h)}return Jf(t,i,a,l,h)}function yy(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return _y(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yu(i,d!==null?d.cachePool:null),d!==null?Eg(i,d):Rf(),bg(i);else return l=i.lanes=536870912,_y(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Yu(i,d.cachePool),Eg(i,d),Us(),i.memoizedState=null):(t!==null&&Yu(i,null),Rf(),Us());return Jt(t,i,h,a),i.child}function lo(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function _y(t,i,a,l,h){var d=bf();return d=d===null?null:{parent:Ot._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Yu(i,null),Rf(),bg(i),t!==null&&Oa(t,i,l,!0),i.childLanes=h,null}function cc(t,i){return i=fc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function vy(t,i,a){return Gr(i,t.child,null,a),t=cc(i,i.pendingProps),t.flags|=2,An(i),i.memoizedState=null,t}function JT(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ke){if(l.mode==="hidden")return t=cc(i,l),i.lanes=536870912,lo(null,t);if(Nf(i),(t=ft)?(t=D_(t,Bn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Cs!==null?{id:Ii,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=ng(t),a.return=i,i.child=a,Xt=i,ft=null)):t=null,t===null)throw Os(i);return i.lanes=536870912,null}return cc(i,l)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Nf(i),h)if(i.flags&256)i.flags&=-257,i=vy(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Vt||Oa(t,i,a,!1),h=(a&t.childLanes)!==0,Vt||h){if(l=ct,l!==null&&(_=Il(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Lr(t,_),yn(l,t,_),$f;bc(),i=vy(t,i,a)}else t=d.treeContext,ft=Hn(_.nextSibling),Xt=i,Ke=!0,Ds=null,Bn=!1,t!==null&&rg(i,t),i=cc(i,l),i.flags|=4096;return i}return t=Ki(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function hc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Jf(t,i,a,l,h){return Br(i),a=Df(t,i,a,l,void 0,h),l=Of(),t!==null&&!Vt?(Mf(t,i,h),Zi(t,i,h)):(Ke&&l&&ff(i),i.flags|=1,Jt(t,i,a,h),i.child)}function Ey(t,i,a,l,h,d){return Br(i),i.updateQueue=null,a=wg(i,l,a,h),Tg(t),l=Of(),t!==null&&!Vt?(Mf(t,i,d),Zi(t,i,d)):(Ke&&l&&ff(i),i.flags|=1,Jt(t,i,a,d),i.child)}function by(t,i,a,l,h){if(Br(i),i.stateNode===null){var d=Ia,_=a.contextType;typeof _=="object"&&_!==null&&(d=$t(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Yf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},wf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?$t(_):Ia,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Qf(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Yf.enqueueReplaceState(d,d.state,null),no(i,l,d,h),to(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,O=Qr(a,T);d.props=O;var z=d.context,K=a.contextType;_=Ia,typeof K=="object"&&K!==null&&(_=$t(K));var $=a.getDerivedStateFromProps;K=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||z!==_)&&ly(i,d,l,_),Vs=!1;var B=i.memoizedState;d.state=B,no(i,l,d,h),to(),z=i.memoizedState,T||B!==z||Vs?(typeof $=="function"&&(Qf(i,a,$,l),z=i.memoizedState),(O=Vs||ay(i,a,O,l,B,z,_))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=_,l=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,xf(t,i),_=i.memoizedProps,K=Qr(a,_),d.props=K,$=i.pendingProps,B=d.context,z=a.contextType,O=Ia,typeof z=="object"&&z!==null&&(O=$t(z)),T=a.getDerivedStateFromProps,(z=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==$||B!==O)&&ly(i,d,l,O),Vs=!1,B=i.memoizedState,d.state=B,no(i,l,d,h),to();var F=i.memoizedState;_!==$||B!==F||Vs||t!==null&&t.dependencies!==null&&Ku(t.dependencies)?(typeof T=="function"&&(Qf(i,a,T,l),F=i.memoizedState),(K=Vs||ay(i,a,K,l,B,F,O)||t!==null&&t.dependencies!==null&&Ku(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=O,l=K):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,hc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Gr(i,t.child,null,h),i.child=Gr(i,null,a,h)):Jt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Zi(t,i,h),t}function Ty(t,i,a,l){return Pr(),i.flags|=256,Jt(t,i,a,l),i.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(t){return{baseLanes:t,cachePool:hg()}}function ed(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=In),t}function wy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(St.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ke){if(h?Ls(i):Us(),(t=ft)?(t=D_(t,Bn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Cs!==null?{id:Ii,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=ng(t),a.return=i,i.child=a,Xt=i,ft=null)):t=null,t===null)throw Os(i);return jd(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(Us(),h=i.mode,T=fc({mode:"hidden",children:T},h),l=Ur(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Wf(a),l.childLanes=ed(t,_,a),i.memoizedState=Zf,lo(null,l)):(Ls(i),td(i,T))}var O=t.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(d)i.flags&256?(Ls(i),i.flags&=-257,i=nd(t,i,a)):i.memoizedState!==null?(Us(),i.child=t.child,i.flags|=128,i=null):(Us(),T=l.fallback,h=i.mode,l=fc({mode:"visible",children:l.children},h),T=Ur(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,Gr(i,t.child,null,a),l=i.child,l.memoizedState=Wf(a),l.childLanes=ed(t,_,a),i.memoizedState=Zf,i=lo(null,l));else if(Ls(i),jd(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var z=_.dgst;_=z,l=Error(r(419)),l.stack="",l.digest=_,Xl({value:l,source:null,stack:null}),i=nd(t,i,a)}else if(Vt||Oa(t,i,a,!1),_=(a&t.childLanes)!==0,Vt||_){if(_=ct,_!==null&&(l=Il(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Lr(t,l),yn(_,t,l),$f;kd(T)||bc(),i=nd(t,i,a)}else kd(T)?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,ft=Hn(T.nextSibling),Xt=i,Ke=!0,Ds=null,Bn=!1,t!==null&&rg(i,t),i=td(i,l.children),i.flags|=4096);return i}return h?(Us(),T=l.fallback,h=i.mode,O=t.child,z=O.sibling,l=Ki(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,z!==null?T=Ki(z,T):(T=Ur(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,lo(null,l),l=i.child,T=t.child.memoizedState,T===null?T=Wf(a):(h=T.cachePool,h!==null?(O=Ot._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=hg(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=ed(t,_,a),i.memoizedState=Zf,lo(t.child,l)):(Ls(i),a=t.child,t=a.sibling,a=Ki(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function td(t,i){return i=fc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function fc(t,i){return t=xn(22,t,null,i),t.lanes=0,t}function nd(t,i,a){return Gr(i,t.child,null,a),t=td(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function xy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),yf(t.return,i,a)}function id(t,i,a,l,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Sy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var _=St.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,le(St,_),Jt(t,i,l,a),l=Ke?Yl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xy(t,a,i);else if(t.tag===19)xy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&ec(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),id(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&ec(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}id(i,!0,a,null,d,l);break;case"together":id(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Zi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Bs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Oa(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Ki(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ki(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function sd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Ku(t)))}function ZT(t,i,a){switch(i.tag){case 3:_t(i,i.stateNode.containerInfo),Ms(i,Ot,t.memoizedState.cache),Pr();break;case 27:case 5:ci(i);break;case 4:_t(i,i.stateNode.containerInfo);break;case 10:Ms(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Nf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ls(i),i.flags|=128,null):(a&i.child.childLanes)!==0?wy(t,i,a):(Ls(i),t=Zi(t,i,a),t!==null?t.sibling:null);Ls(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Oa(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Sy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(St,St.current),l)break;return null;case 22:return i.lanes=0,yy(t,i,a,i.pendingProps);case 24:Ms(i,Ot,t.memoizedState.cache)}return Zi(t,i,a)}function Ay(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Vt=!0;else{if(!sd(t,a)&&(i.flags&128)===0)return Vt=!1,ZT(t,i,a);Vt=(t.flags&131072)!==0}else Vt=!1,Ke&&(i.flags&1048576)!==0&&sg(i,Yl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Hr(i.elementType),i.type=t,typeof t=="function")uf(t)?(l=Qr(t,l),i.tag=1,i=by(null,i,t,l,a)):(i.tag=0,i=Jf(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ye){i.tag=11,i=my(null,i,t,l,a);break e}else if(h===I){i.tag=14,i=py(null,i,t,l,a);break e}}throw i=_e(t)||t,Error(r(306,i,""))}}return i;case 0:return Jf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Qr(l,i.pendingProps),by(t,i,l,h,a);case 3:e:{if(_t(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,xf(t,i),no(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Ms(i,Ot,l),l!==d.cache&&_f(i,[Ot],a,!0),to(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ty(t,i,l,a);break e}else if(l!==h){h=Un(Error(r(424)),i),Xl(h),i=Ty(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ft=Hn(t.firstChild),Xt=i,Ke=!0,Ds=null,Bn=!0,a=yg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Pr(),l===h){i=Zi(t,i,a);break e}Jt(t,i,l,a)}i=i.child}return i;case 26:return hc(t,i),t===null?(a=L_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ke||(a=i.type,t=i.pendingProps,l=Ic(Ne.current).createElement(a),l[Nt]=i,l[qt]=t,Zt(l,a,t),Ct(l),i.stateNode=l):i.memoizedState=L_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ci(i),t===null&&Ke&&(l=i.stateNode=V_(i.type,i.pendingProps,Ne.current),Xt=i,Bn=!0,h=ft,Ks(i.type)?(Ld=h,ft=Hn(l.firstChild)):ft=h),Jt(t,i,i.pendingProps.children,a),hc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ke&&((h=l=ft)&&(l=I1(l,i.type,i.pendingProps,Bn),l!==null?(i.stateNode=l,Xt=i,ft=Hn(l.firstChild),Bn=!1,h=!0):h=!1),h||Os(i)),ci(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Od(h,d)?l=null:_!==null&&Od(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Df(t,i,HT,null,null,a),wo._currentValue=h),hc(t,i),Jt(t,i,l,a),i.child;case 6:return t===null&&Ke&&((t=a=ft)&&(a=N1(a,i.pendingProps,Bn),a!==null?(i.stateNode=a,Xt=i,ft=null,t=!0):t=!1),t||Os(i)),null;case 13:return wy(t,i,a);case 4:return _t(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Gr(i,null,l,a):Jt(t,i,l,a),i.child;case 11:return my(t,i,i.type,i.pendingProps,a);case 7:return Jt(t,i,i.pendingProps,a),i.child;case 8:return Jt(t,i,i.pendingProps.children,a),i.child;case 12:return Jt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ms(i,i.type,l.value),Jt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Br(i),h=$t(h),l=l(h),i.flags|=1,Jt(t,i,l,a),i.child;case 14:return py(t,i,i.type,i.pendingProps,a);case 15:return gy(t,i,i.type,i.pendingProps,a);case 19:return Sy(t,i,a);case 31:return JT(t,i,a);case 22:return yy(t,i,a,i.pendingProps);case 24:return Br(i),l=$t(Ot),t===null?(h=bf(),h===null&&(h=ct,d=vf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},wf(i),Ms(i,Ot,h)):((t.lanes&a)!==0&&(xf(t,i),no(i,null,null,a),to()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ms(i,Ot,l)):(l=d.cache,Ms(i,Ot,l),l!==h.cache&&_f(i,[Ot],a,!0))),Jt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Wi(t){t.flags|=4}function rd(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Wy())t.flags|=8192;else throw Fr=$u,Tf}else t.flags&=-16777217}function Ry(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!q_(i))if(Wy())t.flags|=8192;else throw Fr=$u,Tf}function dc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?vu():536870912,t.lanes|=i,Fa|=i)}function oo(t,i){if(!Ke)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function dt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function WT(t,i,a){var l=i.pendingProps;switch(df(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(i),null;case 1:return dt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Xi(Ot),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Da(i)?Wi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pf())),dt(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(Wi(i),d!==null?(dt(i),Ry(i,d)):(dt(i),rd(i,h,null,l,a))):d?d!==t.memoizedState?(Wi(i),dt(i),Ry(i,d)):(dt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Wi(i),dt(i),rd(i,h,t,l,a)),null;case 27:if(Dn(i),a=Ne.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Wi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return dt(i),null}t=ce.current,Da(i)?ag(i):(t=V_(h,l,a),i.stateNode=t,Wi(i))}return dt(i),null;case 5:if(Dn(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Wi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return dt(i),null}if(d=ce.current,Da(i))ag(i);else{var _=Ic(Ne.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}d[Nt]=i,d[qt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Zt(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Wi(i)}}return dt(i),rd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Wi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Ne.current,Da(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Xt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Nt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||w_(t.nodeValue,a)),t||Os(i,!0)}else t=Ic(t).createTextNode(l),t[Nt]=i,i.stateNode=t}return dt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Da(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Nt]=i}else Pr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),t=!1}else a=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(An(i),i):(An(i),null);if((i.flags&128)!==0)throw Error(r(558))}return dt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Da(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Nt]=i}else Pr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),h=!1}else h=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(An(i),i):(An(i),null)}return An(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),dc(i,i.updateQueue),dt(i),null);case 4:return ut(),t===null&&Rd(i.stateNode.containerInfo),dt(i),null;case 10:return Xi(i.type),dt(i),null;case 19:if(Q(St),l=i.memoizedState,l===null)return dt(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)oo(l,!1);else{if(Et!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=ec(t),d!==null){for(i.flags|=128,oo(l,!1),t=d.updateQueue,i.updateQueue=t,dc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)tg(a,t),a=a.sibling;return le(St,St.current&1|2),Ke&&Qi(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Kt()>_c&&(i.flags|=128,h=!0,oo(l,!1),i.lanes=4194304)}else{if(!h)if(t=ec(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,dc(i,t),oo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ke)return dt(i),null}else 2*Kt()-l.renderingStartTime>_c&&a!==536870912&&(i.flags|=128,h=!0,oo(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Kt(),t.sibling=null,a=St.current,le(St,h?a&1|2:a&1),Ke&&Qi(i,l.treeForkCount),t):(dt(i),null);case 22:case 23:return An(i),If(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(dt(i),i.subtreeFlags&6&&(i.flags|=8192)):dt(i),a=i.updateQueue,a!==null&&dc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&Q(qr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Xi(Ot),dt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function e1(t,i){switch(df(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Xi(Ot),ut(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Dn(i),null;case 31:if(i.memoizedState!==null){if(An(i),i.alternate===null)throw Error(r(340));Pr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(An(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Pr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Q(St),null;case 4:return ut(),null;case 10:return Xi(i.type),null;case 22:case 23:return An(i),If(),t!==null&&Q(qr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Xi(Ot),null;case 25:return null;default:return null}}function Iy(t,i){switch(df(i),i.tag){case 3:Xi(Ot),ut();break;case 26:case 27:case 5:Dn(i);break;case 4:ut();break;case 31:i.memoizedState!==null&&An(i);break;case 13:An(i);break;case 19:Q(St);break;case 10:Xi(i.type);break;case 22:case 23:An(i),If(),t!==null&&Q(qr);break;case 24:Xi(Ot)}}function uo(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(T){st(i,i.return,T)}}function Ps(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=i;var O=a,z=T;try{z()}catch(K){st(h,O,K)}}}l=l.next}while(l!==d)}}catch(K){st(i,i.return,K)}}function Ny(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{vg(i,a)}catch(l){st(t,t.return,l)}}}function Cy(t,i,a){a.props=Qr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){st(t,i,l)}}function co(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){st(t,i,h)}}function Ci(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){st(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){st(t,i,h)}else a.current=null}function Dy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){st(t,t.return,h)}}function ad(t,i,a){try{var l=t.stateNode;T1(l,t.type,a,i),l[qt]=i}catch(h){st(t,t.return,h)}}function Oy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ks(t.type)||t.tag===4}function ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Oy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ks(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function od(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Zn));else if(l!==4&&(l===27&&Ks(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(od(t,i,a),t=t.sibling;t!==null;)od(t,i,a),t=t.sibling}function mc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Ks(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(mc(t,i,a),t=t.sibling;t!==null;)mc(t,i,a),t=t.sibling}function My(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Zt(i,l,a),i[Nt]=t,i[qt]=a}catch(d){st(t,t.return,d)}}var es=!1,kt=!1,ud=!1,Vy=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function t1(t,i){if(t=t.containerInfo,Cd=kc,t=Kp(t),tf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,O=-1,z=0,K=0,$=t,B=null;t:for(;;){for(var F;$!==a||h!==0&&$.nodeType!==3||(T=_+h),$!==d||l!==0&&$.nodeType!==3||(O=_+l),$.nodeType===3&&(_+=$.nodeValue.length),(F=$.firstChild)!==null;)B=$,$=F;for(;;){if($===t)break t;if(B===a&&++z===h&&(T=_),B===d&&++K===l&&(O=_),(F=$.nextSibling)!==null)break;$=B,B=$.parentNode}$=F}a=T===-1||O===-1?null:{start:T,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:t,selectionRange:a},kc=!1,Ft=i;Ft!==null;)if(i=Ft,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ft=t;else for(;Ft!==null;){switch(i=Ft,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var pe=Qr(a.type,h);t=l.getSnapshotBeforeUpdate(pe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){st(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Vd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Ft=t;break}Ft=i.return}}function ky(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ns(t,a),l&4&&uo(5,a);break;case 1:if(ns(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){st(a,a.return,_)}else{var h=Qr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){st(a,a.return,_)}}l&64&&Ny(a),l&512&&co(a,a.return);break;case 3:if(ns(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{vg(t,i)}catch(_){st(a,a.return,_)}}break;case 27:i===null&&l&4&&My(a);case 26:case 5:ns(t,a),i===null&&l&4&&Dy(a),l&512&&co(a,a.return);break;case 12:ns(t,a);break;case 31:ns(t,a),l&4&&Uy(t,a);break;case 13:ns(t,a),l&4&&Py(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=c1.bind(null,a),C1(t,a))));break;case 22:if(l=a.memoizedState!==null||es,!l){i=i!==null&&i.memoizedState!==null||kt,h=es;var d=kt;es=l,(kt=i)&&!d?is(t,a,(a.subtreeFlags&8772)!==0):ns(t,a),es=h,kt=d}break;case 30:break;default:ns(t,a)}}function jy(t){var i=t.alternate;i!==null&&(t.alternate=null,jy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ma(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var gt=null,dn=!1;function ts(t,i,a){for(a=a.child;a!==null;)Ly(t,i,a),a=a.sibling}function Ly(t,i,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:kt||Ci(a,i),ts(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Ci(a,i);var l=gt,h=dn;Ks(a.type)&&(gt=a.stateNode,dn=!1),ts(t,i,a),Eo(a.stateNode),gt=l,dn=h;break;case 5:kt||Ci(a,i);case 6:if(l=gt,h=dn,gt=null,ts(t,i,a),gt=l,dn=h,gt!==null)if(dn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(a.stateNode)}catch(d){st(a,i,d)}else try{gt.removeChild(a.stateNode)}catch(d){st(a,i,d)}break;case 18:gt!==null&&(dn?(t=gt,N_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Za(t)):N_(gt,a.stateNode));break;case 4:l=gt,h=dn,gt=a.stateNode.containerInfo,dn=!0,ts(t,i,a),gt=l,dn=h;break;case 0:case 11:case 14:case 15:Ps(2,a,i),kt||Ps(4,a,i),ts(t,i,a);break;case 1:kt||(Ci(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Cy(a,i,l)),ts(t,i,a);break;case 21:ts(t,i,a);break;case 22:kt=(l=kt)||a.memoizedState!==null,ts(t,i,a),kt=l;break;default:ts(t,i,a)}}function Uy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Za(t)}catch(a){st(i,i.return,a)}}}function Py(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Za(t)}catch(a){st(i,i.return,a)}}function n1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Vy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Vy),i;default:throw Error(r(435,t.tag))}}function pc(t,i){var a=n1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=h1.bind(null,t,l);l.then(h,h)}})}function mn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Ks(T.type)){gt=T.stateNode,dn=!1;break e}break;case 5:gt=T.stateNode,dn=!1;break e;case 3:case 4:gt=T.stateNode.containerInfo,dn=!0;break e}T=T.return}if(gt===null)throw Error(r(160));Ly(d,_,h),gt=null,dn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)zy(i,t),i=i.sibling}var si=null;function zy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(i,t),pn(t),l&4&&(Ps(3,t,t.return),uo(3,t),Ps(5,t,t.return));break;case 1:mn(i,t),pn(t),l&512&&(kt||a===null||Ci(a,a.return)),l&64&&es&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=si;if(mn(i,t),pn(t),l&512&&(kt||a===null||Ci(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[gi]||d[Nt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Zt(d,l,a),d[Nt]=t,Ct(d),l=d;break e;case"link":var _=z_("link","href",h).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=h.createElement(l),Zt(d,l,a),h.head.appendChild(d);break;case"meta":if(_=z_("meta","content",h).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=h.createElement(l),Zt(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Nt]=t,Ct(d),l=d}t.stateNode=l}else B_(h,t.type,t.stateNode);else t.stateNode=P_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?B_(h,t.type,t.stateNode):P_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&ad(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(i,t),pn(t),l&512&&(kt||a===null||Ci(a,a.return)),a!==null&&l&4&&ad(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,t),pn(t),l&512&&(kt||a===null||Ci(a,a.return)),t.flags&32){h=t.stateNode;try{fn(h,"")}catch(pe){st(t,t.return,pe)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,ad(t,h,a!==null?a.memoizedProps:h)),l&1024&&(ud=!0);break;case 6:if(mn(i,t),pn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(pe){st(t,t.return,pe)}}break;case 3:if(Dc=null,h=si,si=Nc(i.containerInfo),mn(i,t),si=h,pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Za(i.containerInfo)}catch(pe){st(t,t.return,pe)}ud&&(ud=!1,By(t));break;case 4:l=si,si=Nc(t.stateNode.containerInfo),mn(i,t),pn(t),si=l;break;case 12:mn(i,t),pn(t);break;case 31:mn(i,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,pc(t,l)));break;case 13:mn(i,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yc=Kt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,pc(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,z=es,K=kt;if(es=z||h,kt=K||O,mn(i,t),kt=K,es=z,pn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||O||es||kt||Yr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(d=O.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=O.stateNode;var $=O.memoizedProps.style,B=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(pe){st(O,O.return,pe)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(pe){st(O,O.return,pe)}}}else if(i.tag===18){if(a===null){O=i;try{var F=O.stateNode;h?C_(F,!0):C_(O.stateNode,!1)}catch(pe){st(O,O.return,pe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,pc(t,a))));break;case 19:mn(i,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,pc(t,l)));break;case 30:break;case 21:break;default:mn(i,t),pn(t)}}function pn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Oy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=ld(t);mc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(fn(_,""),a.flags&=-33);var T=ld(t);mc(t,T,_);break;case 3:case 4:var O=a.stateNode.containerInfo,z=ld(t);od(t,z,O);break;default:throw Error(r(161))}}catch(K){st(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function By(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;By(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ns(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ky(t,i.alternate,i),i=i.sibling}function Yr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ps(4,i,i.return),Yr(i);break;case 1:Ci(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Cy(i,i.return,a),Yr(i);break;case 27:Eo(i.stateNode);case 26:case 5:Ci(i,i.return),Yr(i);break;case 22:i.memoizedState===null&&Yr(i);break;case 30:Yr(i);break;default:Yr(i)}t=t.sibling}}function is(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:is(h,d,a),uo(4,d);break;case 1:if(is(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){st(l,l.return,z)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)_g(O[h],T)}catch(z){st(l,l.return,z)}}a&&_&64&&Ny(d),co(d,d.return);break;case 27:My(d);case 26:case 5:is(h,d,a),a&&l===null&&_&4&&Dy(d),co(d,d.return);break;case 12:is(h,d,a);break;case 31:is(h,d,a),a&&_&4&&Uy(h,d);break;case 13:is(h,d,a),a&&_&4&&Py(h,d);break;case 22:d.memoizedState===null&&is(h,d,a),co(d,d.return);break;case 30:break;default:is(h,d,a)}i=i.sibling}}function cd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&$l(a))}function hd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&$l(t))}function ri(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)qy(t,i,a,l),i=i.sibling}function qy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ri(t,i,a,l),h&2048&&uo(9,i);break;case 1:ri(t,i,a,l);break;case 3:ri(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&$l(t)));break;case 12:if(h&2048){ri(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){st(i,i.return,O)}}else ri(t,i,a,l);break;case 31:ri(t,i,a,l);break;case 13:ri(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ri(t,i,a,l):ho(t,i):d._visibility&2?ri(t,i,a,l):(d._visibility|=2,Ba(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&cd(_,i);break;case 24:ri(t,i,a,l),h&2048&&hd(i.alternate,i);break;default:ri(t,i,a,l)}}function Ba(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,T=a,O=l,z=_.flags;switch(_.tag){case 0:case 11:case 15:Ba(d,_,T,O,h),uo(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?Ba(d,_,T,O,h):ho(d,_):(K._visibility|=2,Ba(d,_,T,O,h)),h&&z&2048&&cd(_.alternate,_);break;case 24:Ba(d,_,T,O,h),h&&z&2048&&hd(_.alternate,_);break;default:Ba(d,_,T,O,h)}i=i.sibling}}function ho(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:ho(a,l),h&2048&&cd(l.alternate,l);break;case 24:ho(a,l),h&2048&&hd(l.alternate,l);break;default:ho(a,l)}i=i.sibling}}var fo=8192;function qa(t,i,a){if(t.subtreeFlags&fo)for(t=t.child;t!==null;)Hy(t,i,a),t=t.sibling}function Hy(t,i,a){switch(t.tag){case 26:qa(t,i,a),t.flags&fo&&t.memoizedState!==null&&q1(a,si,t.memoizedState,t.memoizedProps);break;case 5:qa(t,i,a);break;case 3:case 4:var l=si;si=Nc(t.stateNode.containerInfo),qa(t,i,a),si=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=fo,fo=16777216,qa(t,i,a),fo=l):qa(t,i,a));break;default:qa(t,i,a)}}function Fy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function mo(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ft=l,Ky(l,t)}Fy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gy(t),t=t.sibling}function Gy(t){switch(t.tag){case 0:case 11:case 15:mo(t),t.flags&2048&&Ps(9,t,t.return);break;case 3:mo(t);break;case 12:mo(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,gc(t)):mo(t);break;default:mo(t)}}function gc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ft=l,Ky(l,t)}Fy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ps(8,i,i.return),gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,gc(i));break;default:gc(i)}t=t.sibling}}function Ky(t,i){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:Ps(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:$l(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=t;Ft!==null;){l=Ft;var h=l.sibling,d=l.return;if(jy(l),l===a){Ft=null;break e}if(h!==null){h.return=d,Ft=h;break e}Ft=d}}}var i1={getCacheForType:function(t){var i=$t(Ot),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return $t(Ot).controller.signal}},s1=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ct=null,Ue=null,ze=0,it=0,Rn=null,zs=!1,Ha=!1,fd=!1,ss=0,Et=0,Bs=0,Xr=0,dd=0,In=0,Fa=0,po=null,gn=null,md=!1,yc=0,Qy=0,_c=1/0,vc=null,qs=null,Pt=0,Hs=null,Ga=null,rs=0,pd=0,gd=null,Yy=null,go=0,yd=null;function Nn(){return(Ze&2)!==0&&ze!==0?ze&-ze:G.T!==null?wd():Eu()}function Xy(){if(In===0)if((ze&536870912)===0||Ke){var t=Tr;Tr<<=1,(Tr&3932160)===0&&(Tr=262144),In=t}else In=536870912;return t=Sn.current,t!==null&&(t.flags|=32),In}function yn(t,i,a){(t===ct&&(it===2||it===9)||t.cancelPendingCommit!==null)&&(Ka(t,0),Fs(t,ze,In,!1)),wr(t,a),((Ze&2)===0||t!==ct)&&(t===ct&&((Ze&2)===0&&(Xr|=a),Et===4&&Fs(t,ze,In,!1)),Di(t))}function $y(t,i,a){if((Ze&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Xn(t,i),h=l?l1(t,i):vd(t,i,!0),d=l;do{if(h===0){Ha&&!l&&Fs(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!r1(a)){h=vd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=t;h=po;var O=T.current.memoizedState.isDehydrated;if(O&&(Ka(T,_).flags|=256),_=vd(T,_,!1),_!==2){if(fd&&!O){T.errorRecoveryDisabledLanes|=d,Xr|=d,h=4;break e}d=gn,gn=h,d!==null&&(gn===null?gn=d:gn.push.apply(gn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Ka(t,0),Fs(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Fs(l,i,In,!zs);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=yc+300-Kt(),10<h)){if(Fs(l,i,In,!zs),di(l,0,!0)!==0)break e;rs=i,l.timeoutHandle=R_(Jy.bind(null,l,a,gn,vc,md,i,In,Xr,Fa,zs,d,"Throttled",-0,0),h);break e}Jy(l,a,gn,vc,md,i,In,Xr,Fa,zs,d,null,-0,0)}}break}while(!0);Di(t)}function Jy(t,i,a,l,h,d,_,T,O,z,K,$,B,F){if(t.timeoutHandle=-1,$=i.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},Hy(i,d,$);var pe=(d&62914560)===d?yc-Kt():(d&4194048)===d?Qy-Kt():0;if(pe=H1($,pe),pe!==null){rs=d,t.cancelPendingCommit=pe(r_.bind(null,t,i,d,a,l,h,_,T,O,K,$,null,B,F)),Fs(t,d,_,!z);return}}r_(t,i,d,a,l,h,_,T,O)}function r1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!wn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fs(t,i,a,l){i&=~dd,i&=~Xr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-wt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&xr(t,a,i)}function Ec(){return(Ze&6)===0?(yo(0),!1):!0}function _d(){if(Ue!==null){if(it===0)var t=Ue.return;else t=Ue,Yi=zr=null,Vf(t),ja=null,Zl=0,t=Ue;for(;t!==null;)Iy(t.alternate,t),t=t.return;Ue=null}}function Ka(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,S1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),rs=0,_d(),ct=t,Ue=a=Ki(t.current,null),ze=i,it=0,Rn=null,zs=!1,Ha=Xn(t,i),fd=!1,Fa=In=dd=Xr=Bs=Et=0,gn=po=null,md=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-wt(l),d=1<<h;i|=t[h],l&=~d}return ss=i,Bu(),a}function Zy(t,i){Me=null,G.H=ao,i===ka||i===Xu?(i=mg(),it=3):i===Tf?(i=mg(),it=4):it=i===$f?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,Ue===null&&(Et=1,uc(t,Un(i,t.current)))}function Wy(){var t=Sn.current;return t===null?!0:(ze&4194048)===ze?qn===null:(ze&62914560)===ze||(ze&536870912)!==0?t===qn:!1}function e_(){var t=G.H;return G.H=ao,t===null?ao:t}function t_(){var t=G.A;return G.A=i1,t}function bc(){Et=4,zs||(ze&4194048)!==ze&&Sn.current!==null||(Ha=!0),(Bs&134217727)===0&&(Xr&134217727)===0||ct===null||Fs(ct,ze,In,!1)}function vd(t,i,a){var l=Ze;Ze|=2;var h=e_(),d=t_();(ct!==t||ze!==i)&&(vc=null,Ka(t,i)),i=!1;var _=Et;e:do try{if(it!==0&&Ue!==null){var T=Ue,O=Rn;switch(it){case 8:_d(),_=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(i=!0);var z=it;if(it=0,Rn=null,Qa(t,T,O,z),a&&Ha){_=0;break e}break;default:z=it,it=0,Rn=null,Qa(t,T,O,z)}}a1(),_=Et;break}catch(K){Zy(t,K)}while(!0);return i&&t.shellSuspendCounter++,Yi=zr=null,Ze=l,G.H=h,G.A=d,Ue===null&&(ct=null,ze=0,Bu()),_}function a1(){for(;Ue!==null;)n_(Ue)}function l1(t,i){var a=Ze;Ze|=2;var l=e_(),h=t_();ct!==t||ze!==i?(vc=null,_c=Kt()+500,Ka(t,i)):Ha=Xn(t,i);e:do try{if(it!==0&&Ue!==null){i=Ue;var d=Rn;t:switch(it){case 1:it=0,Rn=null,Qa(t,i,d,1);break;case 2:case 9:if(fg(d)){it=0,Rn=null,i_(i);break}i=function(){it!==2&&it!==9||ct!==t||(it=7),Di(t)},d.then(i,i);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:fg(d)?(it=0,Rn=null,i_(i)):(it=0,Rn=null,Qa(t,i,d,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var T=Ue;if(_?q_(_):T.stateNode.complete){it=0,Rn=null;var O=T.sibling;if(O!==null)Ue=O;else{var z=T.return;z!==null?(Ue=z,Tc(z)):Ue=null}break t}}it=0,Rn=null,Qa(t,i,d,5);break;case 6:it=0,Rn=null,Qa(t,i,d,6);break;case 8:_d(),Et=6;break e;default:throw Error(r(462))}}o1();break}catch(K){Zy(t,K)}while(!0);return Yi=zr=null,G.H=l,G.A=h,Ze=a,Ue!==null?0:(ct=null,ze=0,Bu(),Et)}function o1(){for(;Ue!==null&&!Bi();)n_(Ue)}function n_(t){var i=Ay(t.alternate,t,ss);t.memoizedProps=t.pendingProps,i===null?Tc(t):Ue=i}function i_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Ey(a,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=Ey(a,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:Vf(i);default:Iy(a,i),i=Ue=tg(i,ss),i=Ay(a,i,ss)}t.memoizedProps=t.pendingProps,i===null?Tc(t):Ue=i}function Qa(t,i,a,l){Yi=zr=null,Vf(i),ja=null,Zl=0;var h=i.return;try{if($T(t,h,i,a,ze)){Et=1,uc(t,Un(a,t.current)),Ue=null;return}}catch(d){if(h!==null)throw Ue=h,d;Et=1,uc(t,Un(a,t.current)),Ue=null;return}i.flags&32768?(Ke||l===1?t=!0:Ha||(ze&536870912)!==0?t=!1:(zs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Sn.current,l!==null&&l.tag===13&&(l.flags|=16384))),s_(i,t)):Tc(i)}function Tc(t){var i=t;do{if((i.flags&32768)!==0){s_(i,zs);return}t=i.return;var a=WT(i.alternate,i,ss);if(a!==null){Ue=a;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=t}while(i!==null);Et===0&&(Et=5)}function s_(t,i){do{var a=e1(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);Et=6,Ue=null}function r_(t,i,a,l,h,d,_,T,O){t.cancelPendingCommit=null;do wc();while(Pt!==0);if((Ze&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=lf,Jh(t,a,d,_,T,O),t===ct&&(Ue=ct=null,ze=0),Ga=i,Hs=t,rs=a,pd=d,gd=h,Yy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,f1(Es,function(){return c_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=ie.p,ie.p=2,_=Ze,Ze|=4;try{t1(t,i,a)}finally{Ze=_,ie.p=h,G.T=l}}Pt=1,a_(),l_(),o_()}}function a_(){if(Pt===1){Pt=0;var t=Hs,i=Ga,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=ie.p;ie.p=2;var h=Ze;Ze|=4;try{zy(i,t);var d=Dd,_=Kp(t.containerInfo),T=d.focusedElem,O=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&Gp(T.ownerDocument.documentElement,T)){if(O!==null&&tf(T)){var z=O.start,K=O.end;if(K===void 0&&(K=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(K,T.value.length);else{var $=T.ownerDocument||document,B=$&&$.defaultView||window;if(B.getSelection){var F=B.getSelection(),pe=T.textContent.length,we=Math.min(O.start,pe),ot=O.end===void 0?we:Math.min(O.end,pe);!F.extend&&we>ot&&(_=ot,ot=we,we=_);var L=Fp(T,we),k=Fp(T,ot);if(L&&k&&(F.rangeCount!==1||F.anchorNode!==L.node||F.anchorOffset!==L.offset||F.focusNode!==k.node||F.focusOffset!==k.offset)){var P=$.createRange();P.setStart(L.node,L.offset),F.removeAllRanges(),we>ot?(F.addRange(P),F.extend(k.node,k.offset)):(P.setEnd(k.node,k.offset),F.addRange(P))}}}}for($=[],F=T;F=F.parentNode;)F.nodeType===1&&$.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var Y=$[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}kc=!!Cd,Dd=Cd=null}finally{Ze=h,ie.p=l,G.T=a}}t.current=i,Pt=2}}function l_(){if(Pt===2){Pt=0;var t=Hs,i=Ga,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=ie.p;ie.p=2;var h=Ze;Ze|=4;try{ky(t,i.alternate,i)}finally{Ze=h,ie.p=l,G.T=a}}Pt=3}}function o_(){if(Pt===4||Pt===3){Pt=0,Er();var t=Hs,i=Ga,a=rs,l=Yy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Pt=5:(Pt=0,Ga=Hs=null,u_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(qs=null),qi(a),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Yn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,h=ie.p,ie.p=2,G.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{G.T=i,ie.p=h}}(rs&3)!==0&&wc(),Di(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===yd?go++:(go=0,yd=t):go=0,yo(0)}}function u_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,$l(i)))}function wc(){return a_(),l_(),o_(),c_()}function c_(){if(Pt!==5)return!1;var t=Hs,i=pd;pd=0;var a=qi(rs),l=G.T,h=ie.p;try{ie.p=32>a?32:a,G.T=null,a=gd,gd=null;var d=Hs,_=rs;if(Pt=0,Ga=Hs=null,rs=0,(Ze&6)!==0)throw Error(r(331));var T=Ze;if(Ze|=4,Gy(d.current),qy(d,d.current,_,a),Ze=T,yo(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Yn,d)}catch{}return!0}finally{ie.p=h,G.T=l,u_(t,i)}}function h_(t,i,a){i=Un(a,i),i=Xf(t.stateNode,i,2),t=js(t,i,2),t!==null&&(wr(t,2),Di(t))}function st(t,i,a){if(t.tag===3)h_(t,t,a);else for(;i!==null;){if(i.tag===3){h_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(qs===null||!qs.has(l))){t=Un(a,t),a=fy(2),l=js(i,a,2),l!==null&&(dy(a,l,i,t),wr(l,2),Di(l));break}}i=i.return}}function Ed(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new s1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(fd=!0,h.add(a),t=u1.bind(null,t,i,a),i.then(t,t))}function u1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ct===t&&(ze&a)===a&&(Et===4||Et===3&&(ze&62914560)===ze&&300>Kt()-yc?(Ze&2)===0&&Ka(t,0):dd|=a,Fa===ze&&(Fa=0)),Di(t)}function f_(t,i){i===0&&(i=vu()),t=Lr(t,i),t!==null&&(wr(t,i),Di(t))}function c1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),f_(t,a)}function h1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),f_(t,a)}function f1(t,i){return tt(t,i)}var xc=null,Ya=null,bd=!1,Sc=!1,Td=!1,Gs=0;function Di(t){t!==Ya&&t.next===null&&(Ya===null?xc=Ya=t:Ya=Ya.next=t),Sc=!0,bd||(bd=!0,m1())}function yo(t,i){if(!Td&&Sc){Td=!0;do for(var a=!1,l=xc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-wt(42|t)+1)-1,d&=h&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,g_(l,d))}else d=ze,d=di(l,l===ct?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Xn(l,d)||(a=!0,g_(l,d));l=l.next}while(a);Td=!1}}function d1(){d_()}function d_(){Sc=bd=!1;var t=0;Gs!==0&&x1()&&(t=Gs);for(var i=Kt(),a=null,l=xc;l!==null;){var h=l.next,d=m_(l,i);d===0?(l.next=null,a===null?xc=h:a.next=h,h===null&&(Ya=a)):(a=l,(t!==0||(d&3)!==0)&&(Sc=!0)),l=h}Pt!==0&&Pt!==5||yo(t),Gs!==0&&(Gs=0)}function m_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-wt(d),T=1<<_,O=h[_];O===-1?((T&a)===0||(T&l)!==0)&&(h[_]=$h(T,i)):O<=i&&(t.expiredLanes|=T),d&=~T}if(i=ct,a=ze,a=di(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(it===2||it===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&nn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Xn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&nn(l),qi(a)){case 2:case 8:a=Al;break;case 32:a=Es;break;case 268435456:a=mu;break;default:a=Es}return l=p_.bind(null,t),a=tt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&nn(l),t.callbackPriority=2,t.callbackNode=null,2}function p_(t,i){if(Pt!==0&&Pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(wc()&&t.callbackNode!==a)return null;var l=ze;return l=di(t,t===ct?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:($y(t,l,i),m_(t,Kt()),t.callbackNode!=null&&t.callbackNode===a?p_.bind(null,t):null)}function g_(t,i){if(wc())return null;$y(t,i,!0)}function m1(){A1(function(){(Ze&6)!==0?tt(Sl,d1):d_()})}function wd(){if(Gs===0){var t=Ma;t===0&&(t=hi,hi<<=1,(hi&261888)===0&&(hi=256)),Gs=t}return Gs}function y_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:_a(""+t)}function __(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function p1(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=y_((h[qt]||null).action),_=l.submitter;_&&(i=(i=_[qt]||null)?y_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new xi("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Gs!==0){var O=_?__(h,_):new FormData(h);Hf(a,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(T.preventDefault(),O=_?__(h,_):new FormData(h),Hf(a,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var xd=0;xd<af.length;xd++){var Sd=af[xd],g1=Sd.toLowerCase(),y1=Sd[0].toUpperCase()+Sd.slice(1);ii(g1,"on"+y1)}ii(Xp,"onAnimationEnd"),ii($p,"onAnimationIteration"),ii(Jp,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(MT,"onTransitionRun"),ii(VT,"onTransitionStart"),ii(kT,"onTransitionCancel"),ii(Zp,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_o));function v_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],O=T.instance,z=T.currentTarget;if(T=T.listener,O!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=z;try{d(h)}catch(K){zu(K)}h.currentTarget=null,d=O}else for(_=0;_<l.length;_++){if(T=l[_],O=T.instance,z=T.currentTarget,T=T.listener,O!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=z;try{d(h)}catch(K){zu(K)}h.currentTarget=null,d=O}}}}function Pe(t,i){var a=i[da];a===void 0&&(a=i[da]=new Set);var l=t+"__bubble";a.has(l)||(E_(i,t,2,!1),a.add(l))}function Ad(t,i,a){var l=0;i&&(l|=4),E_(a,t,l,i)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function Rd(t){if(!t[Ac]){t[Ac]=!0,Nl.forEach(function(a){a!=="selectionchange"&&(_1.has(a)||Ad(a,!1,t),Ad(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ac]||(i[Ac]=!0,Ad("selectionchange",!1,i))}}function E_(t,i,a,l){switch(X_(i)){case 2:var h=K1;break;case 8:h=Q1;break;default:h=qd}a=h.bind(null,i,a,t),h=void 0,!Nr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Id(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=yi(T),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=d=_;continue e}T=T.parentNode}}l=l.return}As(function(){var z=d,K=Vn(a),$=[];e:{var B=Wp.get(t);if(B!==void 0){var F=xi,pe=t;switch(t){case"keypress":if(Dr(a)===0)break e;case"keydown":case"keyup":F=Lu;break;case"focusin":pe="focus",F=Mr;break;case"focusout":pe="blur",F=Mr;break;case"beforeblur":case"afterblur":F=Mr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=m;break;case Xp:case $p:case Jp:F=Cu;break;case Zp:F=w;break;case"scroll":case"scrollend":F=Bl;break;case"wheel":F=H;break;case"copy":case"cut":case"paste":F=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Gi;break;case"toggle":case"beforetoggle":F=Oe}var we=(i&4)!==0,ot=!we&&(t==="scroll"||t==="scrollend"),L=we?B!==null?B+"Capture":null:B;we=[];for(var k=z,P;k!==null;){var Y=k;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||L===null||(Y=Wn(k,L),Y!=null&&we.push(vo(k,Y,P))),ot)break;k=k.return}0<we.length&&(B=new F(B,pe,null,a,K),$.push({event:B,listeners:we}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",B&&a!==Ul&&(pe=a.relatedTarget||a.fromElement)&&(yi(pe)||pe[pi]))break e;if((F||B)&&(B=K.window===K?K:(B=K.ownerDocument)?B.defaultView||B.parentWindow:window,F?(pe=a.relatedTarget||a.toElement,F=z,pe=pe?yi(pe):null,pe!==null&&(ot=u(pe),we=pe.tag,pe!==ot||we!==5&&we!==27&&we!==6)&&(pe=null)):(F=null,pe=z),F!==pe)){if(we=ql,Y="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(we=Gi,Y="onPointerLeave",L="onPointerEnter",k="pointer"),ot=F==null?B:bn(F),P=pe==null?B:bn(pe),B=new we(Y,k+"leave",F,a,K),B.target=ot,B.relatedTarget=P,Y=null,yi(K)===z&&(we=new we(L,k+"enter",pe,a,K),we.target=P,we.relatedTarget=ot,Y=we),ot=Y,F&&pe)t:{for(we=v1,L=F,k=pe,P=0,Y=L;Y;Y=we(Y))P++;Y=0;for(var ve=k;ve;ve=we(ve))Y++;for(;0<P-Y;)L=we(L),P--;for(;0<Y-P;)k=we(k),Y--;for(;P--;){if(L===k||k!==null&&L===k.alternate){we=L;break t}L=we(L),k=we(k)}we=null}else we=null;F!==null&&b_($,B,F,we,!1),pe!==null&&ot!==null&&b_($,ot,pe,we,!0)}}e:{if(B=z?bn(z):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var Xe=Up;else if(jp(B))if(Pp)Xe=CT;else{Xe=IT;var ge=RT}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&ya(z.elementType)&&(Xe=Up):Xe=NT;if(Xe&&(Xe=Xe(t,z))){Lp($,Xe,a,K);break e}ge&&ge(t,B,z),t==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&kl(B,"number",B.value)}switch(ge=z?bn(z):window,t){case"focusin":(jp(ge)||ge.contentEditable==="true")&&(Sa=ge,nf=z,Ql=null);break;case"focusout":Ql=nf=Sa=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,Qp($,a,K);break;case"selectionchange":if(OT)break;case"keydown":case"keyup":Qp($,a,K)}var ke;if(Je)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else xa?Vr(t,a)&&(Be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Ri&&a.locale!=="ko"&&(xa||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&xa&&(ke=zl()):(wi=K,Pl="value"in wi?wi.value:wi.textContent,xa=!0)),ge=Rc(z,Be),0<ge.length&&(Be=new Ai(Be,t,null,a,K),$.push({event:Be,listeners:ge}),ke?Be.data=ke:(ke=wa(a),ke!==null&&(Be.data=ke)))),(ke=jn?wT(t,a):xT(t,a))&&(Be=Rc(z,"onBeforeInput"),0<Be.length&&(ge=new Ai("onBeforeInput","beforeinput",null,a,K),$.push({event:ge,listeners:Be}),ge.data=ke)),p1($,t,z,a,K)}v_($,i)})}function vo(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Rc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Wn(t,a),h!=null&&l.unshift(vo(t,h,d)),h=Wn(t,i),h!=null&&l.push(vo(t,h,d))),t.tag===3)return l;t=t.return}return[]}function v1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function b_(t,i,a,l,h){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,O=T.alternate,z=T.stateNode;if(T=T.tag,O!==null&&O===l)break;T!==5&&T!==26&&T!==27||z===null||(O=z,h?(z=Wn(a,d),z!=null&&_.unshift(vo(a,z,O))):h||(z=Wn(a,d),z!=null&&_.push(vo(a,z,O)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var E1=/\r\n?/g,b1=/\u0000|\uFFFD/g;function T_(t){return(typeof t=="string"?t:""+t).replace(E1,`
`).replace(b1,"")}function w_(t,i){return i=T_(i),T_(t)===i}function lt(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||fn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&fn(t,""+l);break;case"className":Tn(t,"class",l);break;case"tabIndex":Tn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(t,a,l);break;case"style":Ll(t,l,d);break;case"data":if(i!=="object"){Tn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=_a(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&lt(t,i,"name",h.name,h,null),lt(t,i,"formEncType",h.formEncType,h,null),lt(t,i,"formMethod",h.formMethod,h,null),lt(t,i,"formTarget",h.formTarget,h,null)):(lt(t,i,"encType",h.encType,h,null),lt(t,i,"method",h.method,h,null),lt(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=_a(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Zn);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=_a(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),pa(t,"popover",l);break;case"xlinkActuate":Dt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":pa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ru.get(a)||a,pa(t,a,l))}}function Nd(t,i,a,l,h,d){switch(a){case"style":Ll(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?fn(t,l):(typeof l=="number"||typeof l=="bigint")&&fn(t,""+l);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):pa(t,a,l)}}}function Zt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:lt(t,i,d,_,a,null)}}h&&lt(t,i,"srcSet",a.srcSet,a,null),l&&lt(t,i,"src",a.src,a,null);return;case"input":Pe("invalid",t);var T=d=_=h=null,O=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":_=K;break;case"checked":O=K;break;case"defaultChecked":z=K;break;case"value":d=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:lt(t,i,l,K,a,null)}}xu(t,d,T,O,z,_,h,!1);return;case"select":Pe("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:lt(t,i,h,T,a,null)}i=d,a=_,t.multiple=!!l,i!=null?Ts(t,!!l,i,!1):a!=null&&Ts(t,!!l,a,!0);return;case"textarea":Pe("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:lt(t,i,_,T,a,null)}ws(t,l,h,d);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:lt(t,i,O,l,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(l=0;l<_o.length;l++)Pe(_o[l],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:lt(t,i,z,l,a,null)}return;default:if(ya(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&Nd(t,i,K,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&lt(t,i,T,l,a,null))}function T1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,T=null,O=null,z=null,K=null;for(F in a){var $=a[F];if(a.hasOwnProperty(F)&&$!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":O=$;default:l.hasOwnProperty(F)||lt(t,i,F,null,l,$)}}for(var B in l){var F=l[B];if($=a[B],l.hasOwnProperty(B)&&(F!=null||$!=null))switch(B){case"type":d=F;break;case"name":h=F;break;case"checked":z=F;break;case"defaultChecked":K=F;break;case"value":_=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==$&&lt(t,i,B,F,l,$)}}ga(t,_,T,O,z,K,d,h);return;case"select":F=_=T=B=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":F=O;default:l.hasOwnProperty(d)||lt(t,i,d,null,l,O)}for(h in l)if(d=l[h],O=a[h],l.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":B=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==O&&lt(t,i,h,d,l,O)}i=T,a=_,l=F,B!=null?Ts(t,!!a,B,!1):!!l!=!!a&&(i!=null?Ts(t,!!a,i,!0):Ts(t,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:lt(t,i,T,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":B=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&lt(t,i,_,h,l,d)}Su(t,B,F);return;case"option":for(var pe in a)if(B=a[pe],a.hasOwnProperty(pe)&&B!=null&&!l.hasOwnProperty(pe))switch(pe){case"selected":t.selected=!1;break;default:lt(t,i,pe,null,l,B)}for(O in l)if(B=l[O],F=a[O],l.hasOwnProperty(O)&&B!==F&&(B!=null||F!=null))switch(O){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:lt(t,i,O,B,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)B=a[we],a.hasOwnProperty(we)&&B!=null&&!l.hasOwnProperty(we)&&lt(t,i,we,null,l,B);for(z in l)if(B=l[z],F=a[z],l.hasOwnProperty(z)&&B!==F&&(B!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:lt(t,i,z,B,l,F)}return;default:if(ya(i)){for(var ot in a)B=a[ot],a.hasOwnProperty(ot)&&B!==void 0&&!l.hasOwnProperty(ot)&&Nd(t,i,ot,void 0,l,B);for(K in l)B=l[K],F=a[K],!l.hasOwnProperty(K)||B===F||B===void 0&&F===void 0||Nd(t,i,K,B,l,F);return}}for(var L in a)B=a[L],a.hasOwnProperty(L)&&B!=null&&!l.hasOwnProperty(L)&&lt(t,i,L,null,l,B);for($ in l)B=l[$],F=a[$],!l.hasOwnProperty($)||B===F||B==null&&F==null||lt(t,i,$,B,l,F)}function x_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function w1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,_=h.initiatorType,T=h.duration;if(d&&T&&x_(_)){for(_=0,T=h.responseEnd,l+=1;l<a.length;l++){var O=a[l],z=O.startTime;if(z>T)break;var K=O.transferSize,$=O.initiatorType;K&&x_($)&&(O=O.responseEnd,_+=K*(O<T?1:(T-z)/(O-z)))}if(--l,i+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Cd=null,Dd=null;function Ic(t){return t.nodeType===9?t:t.ownerDocument}function S_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Od(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Md=null;function x1(){var t=window.event;return t&&t.type==="popstate"?t===Md?!1:(Md=t,!0):(Md=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,S1=typeof clearTimeout=="function"?clearTimeout:void 0,I_=typeof Promise=="function"?Promise:void 0,A1=typeof queueMicrotask=="function"?queueMicrotask:typeof I_<"u"?function(t){return I_.resolve(null).then(t).catch(R1)}:R_;function R1(t){setTimeout(function(){throw t})}function Ks(t){return t==="head"}function N_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Za(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Eo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Eo(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[gi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Eo(t.ownerDocument.body);a=h}while(a);Za(i)}function C_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Vd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vd(a),ma(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function I1(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[gi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Hn(t.nextSibling),t===null)break}return null}function N1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Hn(t.nextSibling),t===null))return null;return t}function D_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Hn(t.nextSibling),t===null))return null;return t}function kd(t){return t.data==="$?"||t.data==="$~"}function jd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function C1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Hn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Ld=null;function O_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Hn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function M_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function V_(t,i,a){switch(i=Ic(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Eo(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ma(t)}var Fn=new Map,k_=new Set;function Nc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var as=ie.d;ie.d={f:D1,r:O1,D:M1,C:V1,L:k1,m:j1,X:U1,S:L1,M:P1};function D1(){var t=as.f(),i=Ec();return t||i}function O1(t){var i=Mn(t);i!==null&&i.tag===5&&i.type==="form"?Zg(i):as.r(t)}var Xa=typeof document>"u"?null:document;function j_(t,i,a){var l=Xa;if(l&&typeof i=="string"&&i){var h=hn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),k_.has(h)||(k_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Zt(i,"link",t),Ct(i),l.head.appendChild(i)))}}function M1(t){as.D(t),j_("dns-prefetch",t,null)}function V1(t,i){as.C(t,i),j_("preconnect",t,i)}function k1(t,i,a){as.L(t,i,a);var l=Xa;if(l&&t&&i){var h='link[rel="preload"][as="'+hn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+hn(a.imageSizes)+'"]')):h+='[href="'+hn(t)+'"]';var d=h;switch(i){case"style":d=$a(t);break;case"script":d=Ja(t)}Fn.has(d)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Fn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(bo(d))||i==="script"&&l.querySelector(To(d))||(i=l.createElement("link"),Zt(i,"link",t),Ct(i),l.head.appendChild(i)))}}function j1(t,i){as.m(t,i);var a=Xa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+hn(l)+'"][href="'+hn(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ja(t)}if(!Fn.has(d)&&(t=S({rel:"modulepreload",href:t},i),Fn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(To(d)))return}l=a.createElement("link"),Zt(l,"link",t),Ct(l),a.head.appendChild(l)}}}function L1(t,i,a){as.S(t,i,a);var l=Xa;if(l&&t){var h=_i(l).hoistableStyles,d=$a(t);i=i||"default";var _=h.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(bo(d)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Fn.get(d))&&Ud(t,a);var O=_=l.createElement("link");Ct(O),Zt(O,"link",t),O._p=new Promise(function(z,K){O.onload=z,O.onerror=K}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Cc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(d,_)}}}function U1(t,i){as.X(t,i);var a=Xa;if(a&&t){var l=_i(a).hoistableScripts,h=Ja(t),d=l.get(h);d||(d=a.querySelector(To(h)),d||(t=S({src:t,async:!0},i),(i=Fn.get(h))&&Pd(t,i),d=a.createElement("script"),Ct(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function P1(t,i){as.M(t,i);var a=Xa;if(a&&t){var l=_i(a).hoistableScripts,h=Ja(t),d=l.get(h);d||(d=a.querySelector(To(h)),d||(t=S({src:t,async:!0,type:"module"},i),(i=Fn.get(h))&&Pd(t,i),d=a.createElement("script"),Ct(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function L_(t,i,a,l){var h=(h=Ne.current)?Nc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=$a(a.href),a=_i(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=$a(a.href);var d=_i(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(bo(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Fn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(t,a),d||z1(h,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ja(a),a=_i(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function $a(t){return'href="'+hn(t)+'"'}function bo(t){return'link[rel="stylesheet"]['+t+"]"}function U_(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function z1(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Zt(i,"link",a),Ct(i),t.head.appendChild(i))}function Ja(t){return'[src="'+hn(t)+'"]'}function To(t){return"script[async]"+t}function P_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+hn(a.href)+'"]');if(l)return i.instance=l,Ct(l),l;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ct(l),Zt(l,"style",h),Cc(l,a.precedence,t),i.instance=l;case"stylesheet":h=$a(a.href);var d=t.querySelector(bo(h));if(d)return i.state.loading|=4,i.instance=d,Ct(d),d;l=U_(a),(h=Fn.get(h))&&Ud(l,h),d=(t.ownerDocument||t).createElement("link"),Ct(d);var _=d;return _._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),Zt(d,"link",l),i.state.loading|=4,Cc(d,a.precedence,t),i.instance=d;case"script":return d=Ja(a.src),(h=t.querySelector(To(d)))?(i.instance=h,Ct(h),h):(l=a,(h=Fn.get(d))&&(l=S({},a),Pd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ct(h),Zt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Cc(l,a.precedence,t));return i.instance}function Cc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Ud(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Pd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Dc=null;function z_(t,i,a){if(Dc===null){var l=new Map,h=Dc=new Map;h.set(a,l)}else h=Dc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[gi]||d[Nt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function B_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function B1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function q_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function q1(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=$a(l.href),d=i.querySelector(bo(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Oc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Ct(d);return}d=i.ownerDocument||i,l=U_(l),(h=Fn.get(h))&&Ud(l,h),d=d.createElement("link"),Ct(d);var _=d;_._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),Zt(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Oc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var zd=0;function H1(t,i){return t.stylesheets&&t.count===0&&Vc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Vc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&zd===0&&(zd=62500*w1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>zd?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Mc=null;function Vc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Mc=new Map,i.forEach(F1,t),Mc=null,Oc.call(t))}function F1(t,i){if(!(i.state.loading&4)){var a=Mc.get(t);if(a)var l=a.get(null);else{a=new Map,Mc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Oc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var wo={$$typeof:ae,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function G1(t,i,a,l,h,d,_,T,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function H_(t,i,a,l,h,d,_,T,O,z,K,$){return t=new G1(t,i,a,_,O,z,K,$,T),i=1,d===!0&&(i|=24),d=xn(3,null,null,i),t.current=d,d.stateNode=t,i=vf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},wf(d),t}function F_(t){return t?(t=Ia,t):Ia}function G_(t,i,a,l,h,d){h=F_(h),l.context===null?l.context=h:l.pendingContext=h,l=ks(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=js(t,l,i),a!==null&&(yn(a,t,i),eo(a,t,i))}function K_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Bd(t,i){K_(t,i),(t=t.alternate)&&K_(t,i)}function Q_(t){if(t.tag===13||t.tag===31){var i=Lr(t,67108864);i!==null&&yn(i,t,67108864),Bd(t,67108864)}}function Y_(t){if(t.tag===13||t.tag===31){var i=Nn();i=Sr(i);var a=Lr(t,i);a!==null&&yn(a,t,i),Bd(t,i)}}var kc=!0;function K1(t,i,a,l){var h=G.T;G.T=null;var d=ie.p;try{ie.p=2,qd(t,i,a,l)}finally{ie.p=d,G.T=h}}function Q1(t,i,a,l){var h=G.T;G.T=null;var d=ie.p;try{ie.p=8,qd(t,i,a,l)}finally{ie.p=d,G.T=h}}function qd(t,i,a,l){if(kc){var h=Hd(l);if(h===null)Id(t,i,l,jc,a),$_(t,l);else if(X1(h,t,i,a,l))l.stopPropagation();else if($_(t,l),i&4&&-1<Y1.indexOf(t)){for(;h!==null;){var d=Mn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=fi(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var O=1<<31-wt(_);T.entanglements[1]|=O,_&=~O}Di(d),(Ze&6)===0&&(_c=Kt()+500,yo(0))}}break;case 31:case 13:T=Lr(d,2),T!==null&&yn(T,d,2),Ec(),Bd(d,2)}if(d=Hd(l),d===null&&Id(t,i,l,jc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Id(t,i,l,null,a)}}function Hd(t){return t=Vn(t),Fd(t)}var jc=null;function Fd(t){if(jc=null,t=yi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return jc=t,null}function X_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(br()){case Sl:return 2;case Al:return 8;case Es:case Xh:return 32;case mu:return 268435456;default:return 32}default:return 32}}var Gd=!1,Qs=null,Ys=null,Xs=null,xo=new Map,So=new Map,$s=[],Y1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $_(t,i){switch(t){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":xo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(i.pointerId)}}function Ao(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Mn(i),i!==null&&Q_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function X1(t,i,a,l,h){switch(i){case"focusin":return Qs=Ao(Qs,t,i,a,l,h),!0;case"dragenter":return Ys=Ao(Ys,t,i,a,l,h),!0;case"mouseover":return Xs=Ao(Xs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return xo.set(d,Ao(xo.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,So.set(d,Ao(So.get(d)||null,t,i,a,l,h)),!0}return!1}function J_(t){var i=yi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,$n(t.priority,function(){Y_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,$n(t.priority,function(){Y_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Hd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ul=l,a.target.dispatchEvent(l),Ul=null}else return i=Mn(a),i!==null&&Q_(i),t.blockedOn=a,!1;i.shift()}return!0}function Z_(t,i,a){Lc(t)&&a.delete(i)}function $1(){Gd=!1,Qs!==null&&Lc(Qs)&&(Qs=null),Ys!==null&&Lc(Ys)&&(Ys=null),Xs!==null&&Lc(Xs)&&(Xs=null),xo.forEach(Z_),So.forEach(Z_)}function Uc(t,i){t.blockedOn===i&&(t.blockedOn=null,Gd||(Gd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,$1)))}var Pc=null;function W_(t){Pc!==t&&(Pc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Pc===t&&(Pc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Fd(l||a)===null)continue;break}var d=Mn(a);d!==null&&(t.splice(i,3),i-=3,Hf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Za(t){function i(O){return Uc(O,t)}Qs!==null&&Uc(Qs,t),Ys!==null&&Uc(Ys,t),Xs!==null&&Uc(Xs,t),xo.forEach(i),So.forEach(i);for(var a=0;a<$s.length;a++){var l=$s[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<$s.length&&(a=$s[0],a.blockedOn===null);)J_(a),a.blockedOn===null&&$s.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[qt]||null;if(typeof d=="function")_||W_(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[qt]||null)T=_.formAction;else if(Fd(h)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),W_(a)}}}function ev(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Kd(t){this._internalRoot=t}zc.prototype.render=Kd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Nn();G_(a,l,t,i,null,null)},zc.prototype.unmount=Kd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;G_(t.current,2,null,t,null,null),Ec(),i[pi]=null}};function zc(t){this._internalRoot=t}zc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Eu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<$s.length&&i!==0&&i<$s[a].priority;a++);$s.splice(a,0,t),a===0&&J_(t)}};var tv=e.version;if(tv!=="19.2.4")throw Error(r(527,tv,"19.2.4"));ie.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var J1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Yn=Bc.inject(J1),Qt=Bc}catch{}}return Io.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=oy,d=uy,_=cy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=H_(t,1,!1,null,null,a,l,null,h,d,_,ev),t[pi]=i.current,Rd(t),new Kd(i)},Io.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=oy,_=uy,T=cy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=H_(t,1,!0,i,a??null,l,h,O,d,_,T,ev),i.context=F_(null),a=i.current,l=Nn(),l=Sr(l),h=ks(l),h.callback=null,js(a,h,l),a=l,i.current.lanes=a,wr(i,a),Di(i),t[pi]=i.current,Rd(t),new zc(i)},Io.version="19.2.4",Io}var hv;function ow(){if(hv)return Xd.exports;hv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Xd.exports=lw(),Xd.exports}var uw=ow();const cw=F0(uw),hw=()=>{};var fv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},fw=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],p=s[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},K0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,p=f?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,b=u>>2,S=(u&3)<<4|p>>4;let A=(p&15)<<2|y>>6,j=y&63;g||(j=64,f||(A=64)),r.push(n[b],n[S],n[A],n[j])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(G0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):fw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const S=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||p==null||y==null||S==null)throw new dw;const A=u<<2|p>>4;if(r.push(A),y!==64){const j=p<<4&240|y>>2;if(r.push(j),S!==64){const q=y<<6&192|S;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class dw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mw=function(s){const e=G0(s);return K0.encodeByteArray(e,!0)},ah=function(s){return mw(s).replace(/\./g,"")},Q0=function(s){try{return K0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=()=>pw().__FIREBASE_DEFAULTS__,yw=()=>{if(typeof process>"u"||typeof fv>"u")return;const s=fv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_w=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Q0(s[1]);return e&&JSON.parse(e)},Ah=()=>{try{return hw()||gw()||yw()||_w()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Y0=s=>{var e,n;return(n=(e=Ah())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},vw=s=>{const e=Y0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},X0=()=>{var s;return(s=Ah())==null?void 0:s.config},$0=s=>{var e;return(e=Ah())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ah(JSON.stringify(n)),ah(JSON.stringify(f)),""].join(".")}const jo={};function Tw(){const s={prod:[],emulator:[]};for(const e of Object.keys(jo))jo[e]?s.emulator.push(e):s.prod.push(e);return s}function ww(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let dv=!1;function Z0(s,e){if(typeof window>"u"||typeof document>"u"||!yl(window.location.host)||jo[s]===e||jo[s]||dv)return;jo[s]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=Tw().prod.length>0;function f(){const A=document.getElementById(r);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,j){A.setAttribute("width","24"),A.setAttribute("id",j),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{dv=!0,f()},A}function b(A,j){A.setAttribute("id",j),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=ww(r),j=n("text"),q=document.getElementById(j)||document.createElement("span"),J=n("learnmore"),Z=document.getElementById(J)||document.createElement("a"),oe=n("preprendIcon"),te=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ae=A.element;p(ae),b(Z,J);const ye=y();g(te,oe),ae.append(te,q,Z,ye),document.body.appendChild(ae)}u?(q.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function Sw(){var e;const s=(e=Ah())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Aw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Iw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nw(){const s=on();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Cw(){return!Sw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dw(){try{return typeof indexedDB=="object"}catch{return!1}}function Ow(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="FirebaseError";class ys extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Mw,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?Vw(u,r):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new ys(o,p,r)}}function Vw(s,e){return s.replace(kw,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const kw=/\{\$([^}]+)}/g;function jw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function na(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(mv(u)&&mv(f)){if(!na(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function mv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Co(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Do(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Lw(s,e){const n=new Uw(s,e);return n.subscribe.bind(n)}class Uw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Pw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Wd),o.error===void 0&&(o.error=Wd),o.complete===void 0&&(o.complete=Wd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pw(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(s){return s&&s._delegate?s._delegate:s}class ia{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ew;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qw(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bw(s){return s===$r?void 0:s}function qw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const Fw={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},Gw=qe.INFO,Kw={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},Qw=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=Kw[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=Gw,this._logHandler=Qw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const Yw=(s,e)=>e.some(n=>s instanceof n);let pv,gv;function Xw(){return pv||(pv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $w(){return gv||(gv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,fm=new WeakMap,eE=new WeakMap,em=new WeakMap,zm=new WeakMap;function Jw(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(rr(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&W0.set(n,s)}).catch(()=>{}),zm.set(e,s),e}function Zw(s){if(fm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});fm.set(s,e)}let dm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return fm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||eE.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Ww(s){dm=s(dm)}function ex(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(tm(this),e,...n);return eE.set(r,e.sort?e.sort():[e]),rr(r)}:$w().includes(s)?function(...e){return s.apply(tm(this),e),rr(W0.get(this))}:function(...e){return rr(s.apply(tm(this),e))}}function tx(s){return typeof s=="function"?ex(s):(s instanceof IDBTransaction&&Zw(s),Yw(s,Xw())?new Proxy(s,dm):s)}function rr(s){if(s instanceof IDBRequest)return Jw(s);if(em.has(s))return em.get(s);const e=tx(s);return e!==s&&(em.set(s,e),zm.set(e,s)),e}const tm=s=>zm.get(s);function nx(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),p=rr(f);return r&&f.addEventListener("upgradeneeded",g=>{r(rr(f.result),g.oldVersion,g.newVersion,rr(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const ix=["get","getKey","getAll","getAllKeys","count"],sx=["put","add","delete","clear"],nm=new Map;function yv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(nm.get(e))return nm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=sx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ix.includes(n)))return;const u=async function(f,...p){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return nm.set(e,u),u}Ww(s=>({...s,get:(e,n,r)=>yv(e,n)||s.get(e,n,r),has:(e,n)=>!!yv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ax(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ax(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mm="@firebase/app",_v="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Pm("@firebase/app"),lx="@firebase/app-compat",ox="@firebase/analytics-compat",ux="@firebase/analytics",cx="@firebase/app-check-compat",hx="@firebase/app-check",fx="@firebase/auth",dx="@firebase/auth-compat",mx="@firebase/database",px="@firebase/data-connect",gx="@firebase/database-compat",yx="@firebase/functions",_x="@firebase/functions-compat",vx="@firebase/installations",Ex="@firebase/installations-compat",bx="@firebase/messaging",Tx="@firebase/messaging-compat",wx="@firebase/performance",xx="@firebase/performance-compat",Sx="@firebase/remote-config",Ax="@firebase/remote-config-compat",Rx="@firebase/storage",Ix="@firebase/storage-compat",Nx="@firebase/firestore",Cx="@firebase/ai",Dx="@firebase/firestore-compat",Ox="firebase",Mx="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",Vx={[mm]:"fire-core",[lx]:"fire-core-compat",[ux]:"fire-analytics",[ox]:"fire-analytics-compat",[hx]:"fire-app-check",[cx]:"fire-app-check-compat",[fx]:"fire-auth",[dx]:"fire-auth-compat",[mx]:"fire-rtdb",[px]:"fire-data-connect",[gx]:"fire-rtdb-compat",[yx]:"fire-fn",[_x]:"fire-fn-compat",[vx]:"fire-iid",[Ex]:"fire-iid-compat",[bx]:"fire-fcm",[Tx]:"fire-fcm-compat",[wx]:"fire-perf",[xx]:"fire-perf-compat",[Sx]:"fire-rc",[Ax]:"fire-rc-compat",[Rx]:"fire-gcs",[Ix]:"fire-gcs-compat",[Nx]:"fire-fst",[Dx]:"fire-fst-compat",[Cx]:"fire-vertex","fire-js":"fire-js",[Ox]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,kx=new Map,gm=new Map;function vv(s,e){try{s.container.addComponent(e)}catch(n){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function cl(s){const e=s.name;if(gm.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,s);for(const n of lh.values())vv(n,s);for(const n of kx.values())vv(n,s);return!0}function Bm(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Gn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new tu("app","Firebase",jx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=Mx;function tE(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:pm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ar.create("bad-app-name",{appName:String(o)});if(n||(n=X0()),!n)throw ar.create("no-options");const u=lh.get(o);if(u){if(na(n,u.options)&&na(r,u.config))return u;throw ar.create("duplicate-app",{appName:o})}const f=new Hw(o);for(const g of gm.values())f.addComponent(g);const p=new Lx(n,r,f);return lh.set(o,p),p}function nE(s=pm){const e=lh.get(s);if(!e&&s===pm&&X0())return tE();if(!e)throw ar.create("no-app",{appName:s});return e}function lr(s,e,n){let r=Vx[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(f.join(" "));return}cl(new ia(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebase-heartbeat-database",Px=1,Ho="firebase-heartbeat-store";let im=null;function iE(){return im||(im=nx(Ux,Px,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ho)}catch(n){console.warn(n)}}}}).catch(s=>{throw ar.create("idb-open",{originalErrorMessage:s.message})})),im}async function zx(s){try{const n=(await iE()).transaction(Ho),r=await n.objectStore(Ho).get(sE(s));return await n.done,r}catch(e){if(e instanceof ys)fs.warn(e.message);else{const n=ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(n.message)}}}async function Ev(s,e){try{const r=(await iE()).transaction(Ho,"readwrite");await r.objectStore(Ho).put(e,sE(s)),await r.done}catch(n){if(n instanceof ys)fs.warn(n.message);else{const r=ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fs.warn(r.message)}}}function sE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=1024,qx=30;class Hx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Gx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=bv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>qx){const f=Kx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bv(),{heartbeatsToSend:r,unsentEntries:o}=Fx(this._heartbeatsCache.heartbeats),u=ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return fs.warn(n),""}}}function bv(){return new Date().toISOString().substring(0,10)}function Fx(s,e=Bx){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Tv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Tv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Gx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dw()?Ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Tv(s){return ah(JSON.stringify({version:2,heartbeats:s})).length}function Kx(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(s){cl(new ia("platform-logger",e=>new rx(e),"PRIVATE")),cl(new ia("heartbeat",e=>new Hx(e),"PRIVATE")),lr(mm,_v,s),lr(mm,_v,"esm2020"),lr("fire-js","")}Qx("");var Yx="firebase",Xx="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(Yx,Xx,"app");function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $x=rE,aE=new tu("auth","Firebase",rE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Pm("@firebase/auth");function Jx(s,...e){oh.logLevel<=qe.WARN&&oh.warn(`Auth (${_l}): ${s}`,...e)}function $c(s,...e){oh.logLevel<=qe.ERROR&&oh.error(`Auth (${_l}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(s,...e){throw qm(s,...e)}function Vi(s,...e){return qm(s,...e)}function lE(s,e,n){const r={...$x(),[e]:n};return new tu("auth","Firebase",r).create(e,{appName:s.name})}function cs(s){return lE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return aE.create(s,...e)}function Se(s,e,...n){if(!s)throw qm(e,...n)}function os(s){const e="INTERNAL ASSERTION FAILED: "+s;throw $c(e),new Error(e)}function ds(s,e){s||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function Zx(){return wv()==="http:"||wv()==="https:"}function wv(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zx()||Rw()||"connection"in navigator)?navigator.onLine:!0}function eS(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=xw()||Iw()}get(){return Wx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(s,e){ds(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iS=new iu(3e4,6e4);function gr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function yr(s,e,n,r,o={}){return uE(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const p=nu({key:s.config.apiKey,...f}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return Aw()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&yl(s.emulatorConfig.host)&&(y.credentials="include"),oE.fetch()(await cE(s,s.config.apiHost,n,p),y)})}async function uE(s,e,n){s._canInitEmulator=!1;const r={...tS,...e};try{const o=new rS(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw qc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(s,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw qc(s,"email-already-in-use",f);if(g==="USER_DISABLED")throw qc(s,"user-disabled",f);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw lE(s,b,y);oi(s,b)}}catch(o){if(o instanceof ys)throw o;oi(s,"network-request-failed",{message:String(o)})}}async function su(s,e,n,r,o={}){const u=await yr(s,e,n,r,o);return"mfaPendingCredential"in u&&oi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function cE(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?Hm(s.config,o):`${s.config.apiScheme}://${o}`;return nS.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function sS(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vi(this.auth,"network-request-failed")),iS.get())})}}function qc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Vi(s,e,r);return o.customData._tokenResponse=n,o}function xv(s){return s!==void 0&&s.enterprise!==void 0}class aS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lS(s,e){return yr(s,"GET","/v2/recaptchaConfig",gr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(s,e){return yr(s,"POST","/v1/accounts:delete",e)}async function uh(s,e){return yr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uS(s,e=!1){const n=Bt(s),r=await n.getIdToken(e),o=Fm(r);Se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Lo(sm(o.auth_time)),issuedAtTime:Lo(sm(o.iat)),expirationTime:Lo(sm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function sm(s){return Number(s)*1e3}function Fm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const o=Q0(n);return o?JSON.parse(o):($c("Failed to decode base64 JWT payload"),null)}catch(o){return $c("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Sv(s){const e=Fm(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ys&&cS(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function cS({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lo(this.lastLoginAt),this.creationTime=Lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(s){var S;const e=s.auth,n=await s.getIdToken(),r=await Fo(s,uh(e,{idToken:n}));Se(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(S=o.providerUserInfo)!=null&&S.length?hE(o.providerUserInfo):[],f=dS(s.providerData,u),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),y=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new _m(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function fS(s){const e=Bt(s);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dS(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function hE(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(s,e){const n=await uE(s,{},async()=>{const r=nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await cE(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return s.emulatorConfig&&yl(s.emulatorConfig.host)&&(g.credentials="include"),oE.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pS(s,e){return yr(s,"POST","/v2/accounts:revokeToken",gr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=Sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await mS(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new sl;return r&&(Se(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sl,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new hS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _m(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Fo(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uS(this,e)}reload(){return fS(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await Fo(this,oS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:S,emailVerified:A,isAnonymous:j,providerData:q,stsTokenManager:J}=n;Se(S&&J,e,"internal-error");const Z=sl.fromJSON(this.name,J);Se(typeof S=="string",e,"internal-error"),Zs(r,e.name),Zs(o,e.name),Se(typeof A=="boolean",e,"internal-error"),Se(typeof j=="boolean",e,"internal-error"),Zs(u,e.name),Zs(f,e.name),Zs(p,e.name),Zs(g,e.name),Zs(y,e.name),Zs(b,e.name);const oe=new ai({uid:S,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:j,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:Z,createdAt:y,lastLoginAt:b});return q&&Array.isArray(q)&&(oe.providerData=q.map(te=>({...te}))),g&&(oe._redirectEventId=g),oe}static async _fromIdTokenResponse(e,n,r=!1){const o=new sl;o.updateFromServerResponse(n);const u=new ai({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await ch(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?hE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),p=new sl;p.updateFromIdToken(r);const g=new ai({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new _m(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function us(s){ds(s instanceof Function,"Expected a class definition");let e=Av.get(s);return e?(ds(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Av.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fE.type="NONE";const Rv=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(s,e,n){return`firebase:${s}:${e}:${n}`}class rl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Jc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Jc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uh(this.auth,{idToken:e}).catch(()=>{});return n?ai._fromGetAccountInfoResponse(this.auth,n,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rl(us(Rv),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||us(Rv);const f=Jc(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(f);if(b){let S;if(typeof b=="string"){const A=await uh(e,{idToken:b}).catch(()=>{});if(!A)break;S=await ai._fromGetAccountInfoResponse(e,A,b)}else S=ai._fromJSON(e,b);y!==u&&(p=S),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new rl(u,e,r):(u=g[0],p&&await u._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new rl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(vE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||pE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dE(s=on()){return/firefox\//i.test(s)}function mE(s=on()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pE(s=on()){return/crios\//i.test(s)}function gE(s=on()){return/iemobile/i.test(s)}function yE(s=on()){return/android/i.test(s)}function _E(s=on()){return/blackberry/i.test(s)}function vE(s=on()){return/webos/i.test(s)}function Gm(s=on()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function gS(s=on()){var e;return Gm(s)&&!!((e=window.navigator)!=null&&e.standalone)}function yS(){return Nw()&&document.documentMode===10}function EE(s=on()){return Gm(s)||yE(s)||vE(s)||_E(s)||/windows phone/i.test(s)||gE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(s,e=[]){let n;switch(s){case"Browser":n=Iv(on());break;case"Worker":n=`${Iv(on())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_l}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,p)=>{try{const g=e(u);f(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(s,e={}){return yr(s,"GET","/v2/passwordPolicy",gr(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=6;class bS{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ES,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nv(this),this.idTokenSubscription=new Nv(this),this.beforeStateQueue=new _S(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=us(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await rl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uh(this,{idToken:e}),r=await ai._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(Gn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,p=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===p)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(cs(this));const n=e?Bt(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vS(this),n=new bS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&us(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await rl.create(this,[us(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Jx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ua(s){return Bt(s)}class Nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lw(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wS(s){Rh=s}function TE(s){return Rh.loadJS(s)}function xS(){return Rh.recaptchaEnterpriseScript}function SS(){return Rh.gapiScript}function AS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class RS{constructor(){this.enterprise=new IS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const NS="recaptcha-enterprise",wE="NO_RECAPTCHA";class CS{constructor(e){this.type=NS,this.auth=ua(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{lS(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new aS(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(g=>{p(g)})})}function o(u,f,p){const g=window.grecaptcha;xv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(wE)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RS().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(p=>{if(!n&&xv(window.grecaptcha))o(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=xS();g.length!==0&&(g+=p),TE(g).then(()=>{o(p,u,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function Cv(s,e,n,r=!1,o=!1){const u=new CS(s);let f;if(o)f=wE;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function vm(s,e,n,r,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Cv(s,e,n,n==="getOobCode");return r(s,f)}else return r(s,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await Cv(s,e,n,n==="getOobCode");return r(s,p)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(s,e){const n=Bm(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(na(u,e??{}))return o;oi(o,"already-initialized")}return n.initialize({options:e})}function OS(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(us);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MS(s,e,n){const r=ua(s);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=xE(e),{host:f,port:p}=VS(e),g=p===null?"":`:${p}`,y={url:`${u}//${f}${g}/`},b=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(na(y,r.config.emulator)&&na(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,yl(f)?(J0(`${u}//${f}${g}`),Z0("Auth",!0)):kS()}function xE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function VS(s){const e=xE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Dv(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Dv(f)}}}function Dv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function kS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}async function jS(s,e){return yr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(s,e){return su(s,"POST","/v1/accounts:signInWithPassword",gr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(s,e){return su(s,"POST","/v1/accounts:signInWithEmailLink",gr(s,e))}async function PS(s,e){return su(s,"POST","/v1/accounts:signInWithEmailLink",gr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends Km{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Go(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Go(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,n,"signInWithPassword",LS);case"emailLink":return US(e,{email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,r,"signUpPassword",jS);case"emailLink":return PS(e,{idToken:n,email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(s,e){return su(s,"POST","/v1/accounts:signInWithIdp",gr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="http://localhost";class sa extends Km{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):oi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new sa(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return al(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,al(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,al(e,n)}buildRequest(){const e={requestUri:zS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qS(s){const e=Co(Do(s)).link,n=e?Co(Do(e)).deep_link_id:null,r=Co(Do(s)).deep_link_id;return(r?Co(Do(r)).link:null)||r||n||e||s}class Qm{constructor(e){const n=Co(Do(e)),r=n.apiKey??null,o=n.oobCode??null,u=BS(n.mode??null);Se(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qS(e);try{return new Qm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.providerId=vl.PROVIDER_ID}static credential(e,n){return Go._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qm.parseLink(n);return Se(r,"argument-error"),Go._fromEmailAndCode(e,r.code,r.tenantId)}}vl.PROVIDER_ID="password";vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends SE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends ru{constructor(){super("facebook.com")}static credential(e){return sa._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.FACEBOOK_SIGN_IN_METHOD="facebook.com";er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sa._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ru{constructor(){super("github.com")}static credential(e){return sa._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends ru{constructor(){super("twitter.com")}static credential(e,n){return sa._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(s,e){return su(s,"POST","/v1/accounts:signUp",gr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await ai._fromIdTokenResponse(e,r,o),f=Ov(r);return new ra({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Ov(r);return new ra({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Ov(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends ys{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new hh(e,n,r,o)}}function AE(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(s,u,e,r):u})}async function FS(s,e,n=!1){const r=await Fo(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ra._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(s,e,n=!1){const{auth:r}=s;if(Gn(r.app))return Promise.reject(cs(r));const o="reauthenticate";try{const u=await Fo(s,AE(r,o,e,s),n);Se(u.idToken,r,"internal-error");const f=Fm(u.idToken);Se(f,r,"internal-error");const{sub:p}=f;return Se(s.uid===p,r,"user-mismatch"),ra._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&oi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(s,e,n=!1){if(Gn(s.app))return Promise.reject(cs(s));const r="signIn",o=await AE(s,r,e),u=await ra._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function KS(s,e){return RE(ua(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(s){const e=ua(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QS(s,e,n){if(Gn(s.app))return Promise.reject(cs(s));const r=ua(s),f=await vm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HS).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&IE(s),g}),p=await ra._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function YS(s,e,n){return Gn(s.app)?Promise.reject(cs(s)):KS(Bt(s),vl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IE(s),r})}function XS(s,e,n,r){return Bt(s).onIdTokenChanged(e,n,r)}function $S(s,e,n){return Bt(s).beforeAuthStateChanged(e,n)}function JS(s,e,n,r){return Bt(s).onAuthStateChanged(e,n,r)}function ZS(s){return Bt(s).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=1e3,eA=10;class CE extends NE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);yS()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,eA):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},WS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CE.type="LOCAL";const tA=CE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE extends NE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DE.type="SESSION";const OE=DE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Ih(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(f).map(async y=>y(n.origin,u)),g=await nA(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((p,g)=>{const y=Ym("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const A=S;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(A.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function sA(s){ki().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function rA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aA(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function lA(){return ME()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebaseLocalStorageDb",oA=1,dh="firebaseLocalStorage",kE="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(s,e){return s.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function uA(){const s=indexedDB.deleteDatabase(VE);return new au(s).toPromise()}function Em(){const s=indexedDB.open(VE,oA);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(dh,{keyPath:kE})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(dh)?e(r):(r.close(),await uA(),e(await Em()))})})}async function Mv(s,e,n){const r=Nh(s,!0).put({[kE]:e,value:n});return new au(r).toPromise()}async function cA(s,e){const n=Nh(s,!1).get(e),r=await new au(n).toPromise();return r===void 0?null:r.value}function Vv(s,e){const n=Nh(s,!0).delete(e);return new au(n).toPromise()}const hA=800,fA=3;class jE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ME()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ih._getInstance(lA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await rA(),!this.activeServiceWorker)return;this.sender=new iA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await Mv(e,fh,"1"),await Vv(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Nh(o,!1).getAll();return new au(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jE.type="LOCAL";const dA=jE;new iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(s,e){return e?us(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Km{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return al(e,this._buildIdpRequest())}_linkToIdToken(e,n){return al(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return al(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pA(s){return RE(s.auth,new Xm(s),s.bypassAuthState)}function gA(s){const{auth:e,user:n}=s;return Se(n,e,"internal-error"),GS(n,new Xm(s),s.bypassAuthState)}async function yA(s){const{auth:e,user:n}=s;return Se(n,e,"internal-error"),FS(n,new Xm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pA;case"linkViaPopup":case"linkViaRedirect":return yA;case"reauthViaPopup":case"reauthViaRedirect":return gA;default:oi(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new iu(2e3,1e4);class il extends LE{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,il.currentPopupAction&&il.currentPopupAction.cancel(),il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,il.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_A.get())};e()}}il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="pendingRedirect",Zc=new Map;class EA extends LE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const r=await bA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bA(s,e){const n=xA(e),r=wA(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function TA(s,e){Zc.set(s._key(),e)}function wA(s){return us(s._redirectPersistence)}function xA(s){return Jc(vA,s.config.apiKey,s.name)}async function SA(s,e,n=!1){if(Gn(s.app))return Promise.reject(cs(s));const r=ua(s),o=mA(r,e),f=await new EA(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=600*1e3;class RA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!UE(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AA&&this.cachedEventUids.clear(),this.cachedEventUids.has(kv(e))}saveEventToCache(e){this.cachedEventUids.add(kv(e)),this.lastProcessedEventTime=Date.now()}}function kv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function UE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IA(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(s,e={}){return yr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DA=/^https?/;async function OA(s){if(s.config.emulator)return;const{authorizedDomains:e}=await NA(s);for(const n of e)try{if(MA(n))return}catch{}oi(s,"unauthorized-domain")}function MA(s){const e=ym(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!DA.test(n))return!1;if(CA.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new iu(3e4,6e4);function jv(){const s=ki().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function kA(s){return new Promise((e,n)=>{var o,u,f;function r(){jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jv(),n(Vi(s,"network-request-failed"))},timeout:VA.get()})}if((u=(o=ki().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=ki().gapi)!=null&&f.load)r();else{const p=AS("iframefcb");return ki()[p]=()=>{gapi.load?r():n(Vi(s,"network-request-failed"))},TE(`${SS()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function jA(s){return Wc=Wc||kA(s),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=new iu(5e3,15e3),UA="__/auth/iframe",PA="emulator/auth/iframe",zA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qA(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Hm(e,PA):`https://${s.config.authDomain}/${UA}`,r={apiKey:e.apiKey,appName:s.name,v:_l},o=BA.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${nu(r).slice(1)}`}async function HA(s){const e=await jA(s),n=ki().gapi;return Se(n,s,"internal-error"),e.open({where:document.body,url:qA(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zA,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=Vi(s,"network-request-failed"),p=ki().setTimeout(()=>{u(f)},LA.get());function g(){ki().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GA=500,KA=600,QA="_blank",YA="http://localhost";class Lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XA(s,e,n,r=GA,o=KA){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...FA,width:r.toString(),height:o.toString(),top:u,left:f},y=on().toLowerCase();n&&(p=pE(y)?QA:n),dE(y)&&(e=e||YA,g.scrollbars="yes");const b=Object.entries(g).reduce((A,[j,q])=>`${A}${j}=${q},`,"");if(gS(y)&&p!=="_self")return $A(e||"",p),new Lv(null);const S=window.open(e||"",p,b);Se(S,s,"popup-blocked");try{S.focus()}catch{}return new Lv(S)}function $A(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="__/auth/handler",ZA="emulator/auth/handler",WA=encodeURIComponent("fac");async function Uv(s,e,n,r,o,u){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:_l,eventId:o};if(e instanceof SE){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",jw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,S]of Object.entries({}))f[b]=S}if(e instanceof ru){const b=e.getScopes().filter(S=>S!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${WA}=${encodeURIComponent(g)}`:"";return`${e2(s)}?${nu(p).slice(1)}${y}`}function e2({config:s}){return s.emulator?Hm(s,ZA):`https://${s.authDomain}/${JA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="webStorageSupport";class t2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OE,this._completeRedirectFn=SA,this._overrideRedirectResult=TA}async _openPopup(e,n,r,o){var f;ds((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await Uv(e,n,r,ym(),o);return XA(e,u,Ym())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await Uv(e,n,r,ym(),o);return sA(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ds(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await HA(e),r=new RA(e);return n.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rm,{type:rm},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[rm];u!==void 0&&n(!!u),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EE()||mE()||Gm()}}const n2=t2;var Pv="@firebase/auth",zv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r2(s){cl(new ia("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;Se(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bE(s)},y=new TS(r,o,u,g);return OS(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cl(new ia("auth-internal",e=>{const n=ua(e.getProvider("auth").getImmediate());return(r=>new i2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(Pv,zv,s2(s)),lr(Pv,zv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=300,l2=$0("authIdTokenMaxAge")||a2;let Bv=null;const o2=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>l2)return;const o=n==null?void 0:n.token;Bv!==o&&(Bv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function u2(s=nE()){const e=Bm(s,"auth");if(e.isInitialized())return e.getImmediate();const n=DS(s,{popupRedirectResolver:n2,persistence:[dA,tA,OE]}),r=$0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=o2(u.toString());$S(n,f,()=>f(n.currentUser)),XS(n,p=>f(p))}}const o=Y0("auth");return o&&MS(n,`http://${o}`),n}function c2(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}wS({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Vi("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",c2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r2("Browser");var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var or,PE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function R(){}R.prototype=x.prototype,I.F=x.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(C,D,V){for(var N=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)N[_e-2]=arguments[_e];return x.prototype[D].apply(C,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,x,R){R||(R=0);const C=Array(16);if(typeof x=="string")for(var D=0;D<16;++D)C[D]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(D=0;D<16;++D)C[D]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=I.g[0],R=I.g[1],D=I.g[2];let V=I.g[3],N;N=x+(V^R&(D^V))+C[0]+3614090360&4294967295,x=R+(N<<7&4294967295|N>>>25),N=V+(D^x&(R^D))+C[1]+3905402710&4294967295,V=x+(N<<12&4294967295|N>>>20),N=D+(R^V&(x^R))+C[2]+606105819&4294967295,D=V+(N<<17&4294967295|N>>>15),N=R+(x^D&(V^x))+C[3]+3250441966&4294967295,R=D+(N<<22&4294967295|N>>>10),N=x+(V^R&(D^V))+C[4]+4118548399&4294967295,x=R+(N<<7&4294967295|N>>>25),N=V+(D^x&(R^D))+C[5]+1200080426&4294967295,V=x+(N<<12&4294967295|N>>>20),N=D+(R^V&(x^R))+C[6]+2821735955&4294967295,D=V+(N<<17&4294967295|N>>>15),N=R+(x^D&(V^x))+C[7]+4249261313&4294967295,R=D+(N<<22&4294967295|N>>>10),N=x+(V^R&(D^V))+C[8]+1770035416&4294967295,x=R+(N<<7&4294967295|N>>>25),N=V+(D^x&(R^D))+C[9]+2336552879&4294967295,V=x+(N<<12&4294967295|N>>>20),N=D+(R^V&(x^R))+C[10]+4294925233&4294967295,D=V+(N<<17&4294967295|N>>>15),N=R+(x^D&(V^x))+C[11]+2304563134&4294967295,R=D+(N<<22&4294967295|N>>>10),N=x+(V^R&(D^V))+C[12]+1804603682&4294967295,x=R+(N<<7&4294967295|N>>>25),N=V+(D^x&(R^D))+C[13]+4254626195&4294967295,V=x+(N<<12&4294967295|N>>>20),N=D+(R^V&(x^R))+C[14]+2792965006&4294967295,D=V+(N<<17&4294967295|N>>>15),N=R+(x^D&(V^x))+C[15]+1236535329&4294967295,R=D+(N<<22&4294967295|N>>>10),N=x+(D^V&(R^D))+C[1]+4129170786&4294967295,x=R+(N<<5&4294967295|N>>>27),N=V+(R^D&(x^R))+C[6]+3225465664&4294967295,V=x+(N<<9&4294967295|N>>>23),N=D+(x^R&(V^x))+C[11]+643717713&4294967295,D=V+(N<<14&4294967295|N>>>18),N=R+(V^x&(D^V))+C[0]+3921069994&4294967295,R=D+(N<<20&4294967295|N>>>12),N=x+(D^V&(R^D))+C[5]+3593408605&4294967295,x=R+(N<<5&4294967295|N>>>27),N=V+(R^D&(x^R))+C[10]+38016083&4294967295,V=x+(N<<9&4294967295|N>>>23),N=D+(x^R&(V^x))+C[15]+3634488961&4294967295,D=V+(N<<14&4294967295|N>>>18),N=R+(V^x&(D^V))+C[4]+3889429448&4294967295,R=D+(N<<20&4294967295|N>>>12),N=x+(D^V&(R^D))+C[9]+568446438&4294967295,x=R+(N<<5&4294967295|N>>>27),N=V+(R^D&(x^R))+C[14]+3275163606&4294967295,V=x+(N<<9&4294967295|N>>>23),N=D+(x^R&(V^x))+C[3]+4107603335&4294967295,D=V+(N<<14&4294967295|N>>>18),N=R+(V^x&(D^V))+C[8]+1163531501&4294967295,R=D+(N<<20&4294967295|N>>>12),N=x+(D^V&(R^D))+C[13]+2850285829&4294967295,x=R+(N<<5&4294967295|N>>>27),N=V+(R^D&(x^R))+C[2]+4243563512&4294967295,V=x+(N<<9&4294967295|N>>>23),N=D+(x^R&(V^x))+C[7]+1735328473&4294967295,D=V+(N<<14&4294967295|N>>>18),N=R+(V^x&(D^V))+C[12]+2368359562&4294967295,R=D+(N<<20&4294967295|N>>>12),N=x+(R^D^V)+C[5]+4294588738&4294967295,x=R+(N<<4&4294967295|N>>>28),N=V+(x^R^D)+C[8]+2272392833&4294967295,V=x+(N<<11&4294967295|N>>>21),N=D+(V^x^R)+C[11]+1839030562&4294967295,D=V+(N<<16&4294967295|N>>>16),N=R+(D^V^x)+C[14]+4259657740&4294967295,R=D+(N<<23&4294967295|N>>>9),N=x+(R^D^V)+C[1]+2763975236&4294967295,x=R+(N<<4&4294967295|N>>>28),N=V+(x^R^D)+C[4]+1272893353&4294967295,V=x+(N<<11&4294967295|N>>>21),N=D+(V^x^R)+C[7]+4139469664&4294967295,D=V+(N<<16&4294967295|N>>>16),N=R+(D^V^x)+C[10]+3200236656&4294967295,R=D+(N<<23&4294967295|N>>>9),N=x+(R^D^V)+C[13]+681279174&4294967295,x=R+(N<<4&4294967295|N>>>28),N=V+(x^R^D)+C[0]+3936430074&4294967295,V=x+(N<<11&4294967295|N>>>21),N=D+(V^x^R)+C[3]+3572445317&4294967295,D=V+(N<<16&4294967295|N>>>16),N=R+(D^V^x)+C[6]+76029189&4294967295,R=D+(N<<23&4294967295|N>>>9),N=x+(R^D^V)+C[9]+3654602809&4294967295,x=R+(N<<4&4294967295|N>>>28),N=V+(x^R^D)+C[12]+3873151461&4294967295,V=x+(N<<11&4294967295|N>>>21),N=D+(V^x^R)+C[15]+530742520&4294967295,D=V+(N<<16&4294967295|N>>>16),N=R+(D^V^x)+C[2]+3299628645&4294967295,R=D+(N<<23&4294967295|N>>>9),N=x+(D^(R|~V))+C[0]+4096336452&4294967295,x=R+(N<<6&4294967295|N>>>26),N=V+(R^(x|~D))+C[7]+1126891415&4294967295,V=x+(N<<10&4294967295|N>>>22),N=D+(x^(V|~R))+C[14]+2878612391&4294967295,D=V+(N<<15&4294967295|N>>>17),N=R+(V^(D|~x))+C[5]+4237533241&4294967295,R=D+(N<<21&4294967295|N>>>11),N=x+(D^(R|~V))+C[12]+1700485571&4294967295,x=R+(N<<6&4294967295|N>>>26),N=V+(R^(x|~D))+C[3]+2399980690&4294967295,V=x+(N<<10&4294967295|N>>>22),N=D+(x^(V|~R))+C[10]+4293915773&4294967295,D=V+(N<<15&4294967295|N>>>17),N=R+(V^(D|~x))+C[1]+2240044497&4294967295,R=D+(N<<21&4294967295|N>>>11),N=x+(D^(R|~V))+C[8]+1873313359&4294967295,x=R+(N<<6&4294967295|N>>>26),N=V+(R^(x|~D))+C[15]+4264355552&4294967295,V=x+(N<<10&4294967295|N>>>22),N=D+(x^(V|~R))+C[6]+2734768916&4294967295,D=V+(N<<15&4294967295|N>>>17),N=R+(V^(D|~x))+C[13]+1309151649&4294967295,R=D+(N<<21&4294967295|N>>>11),N=x+(D^(R|~V))+C[4]+4149444226&4294967295,x=R+(N<<6&4294967295|N>>>26),N=V+(R^(x|~D))+C[11]+3174756917&4294967295,V=x+(N<<10&4294967295|N>>>22),N=D+(x^(V|~R))+C[2]+718787259&4294967295,D=V+(N<<15&4294967295|N>>>17),N=R+(V^(D|~x))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+V&4294967295}r.prototype.v=function(I,x){x===void 0&&(x=I.length);const R=x-this.blockSize,C=this.C;let D=this.h,V=0;for(;V<x;){if(D==0)for(;V<=R;)o(this,I,V),V+=this.blockSize;if(typeof I=="string"){for(;V<x;)if(C[D++]=I.charCodeAt(V++),D==this.blockSize){o(this,C),D=0;break}}else for(;V<x;)if(C[D++]=I[V++],D==this.blockSize){o(this,C),D=0;break}}this.h=D,this.o+=x},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;x=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=x&255,x/=256;for(this.v(I),I=Array(16),x=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)I[x++]=this.g[R]>>>C&255;return I};function u(I,x){var R=p;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=x(I)}function f(I,x){this.h=x;const R=[];let C=!0;for(let D=I.length-1;D>=0;D--){const V=I[D]|0;C&&V==x||(R[D]=V,C=!1)}this.g=R}var p={};function g(I){return-128<=I&&I<128?u(I,function(x){return new f([x|0],x<0?-1:0)}):new f([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return S;if(I<0)return Z(y(-I));const x=[];let R=1;for(let C=0;I>=R;C++)x[C]=I/R|0,R*=4294967296;return new f(x,0)}function b(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return Z(b(I.substring(1),x));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(x,8));let C=S;for(let V=0;V<I.length;V+=8){var D=Math.min(8,I.length-V);const N=parseInt(I.substring(V,V+D),x);D<8?(D=y(Math.pow(x,D)),C=C.j(D).add(y(N))):(C=C.j(R),C=C.add(y(N)))}return C}var S=g(0),A=g(1),j=g(16777216);s=f.prototype,s.m=function(){if(J(this))return-Z(this).m();let I=0,x=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);I+=(C>=0?C:4294967296+C)*x,x*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(q(this))return"0";if(J(this))return"-"+Z(this).toString(I);const x=y(Math.pow(I,6));var R=this;let C="";for(;;){const D=ye(R,x).g;R=oe(R,D.j(x));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=D,q(R))return V+C;for(;V.length<6;)V="0"+V;C=V+C}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function q(I){if(I.h!=0)return!1;for(let x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function J(I){return I.h==-1}s.l=function(I){return I=oe(this,I),J(I)?-1:q(I)?0:1};function Z(I){const x=I.g.length,R=[];for(let C=0;C<x;C++)R[C]=~I.g[C];return new f(R,~I.h).add(A)}s.abs=function(){return J(this)?Z(this):this},s.add=function(I){const x=Math.max(this.g.length,I.g.length),R=[];let C=0;for(let D=0;D<=x;D++){let V=C+(this.i(D)&65535)+(I.i(D)&65535),N=(V>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);C=N>>>16,V&=65535,N&=65535,R[D]=N<<16|V}return new f(R,R[R.length-1]&-2147483648?-1:0)};function oe(I,x){return I.add(Z(x))}s.j=function(I){if(q(this)||q(I))return S;if(J(this))return J(I)?Z(this).j(Z(I)):Z(Z(this).j(I));if(J(I))return Z(this.j(Z(I)));if(this.l(j)<0&&I.l(j)<0)return y(this.m()*I.m());const x=this.g.length+I.g.length,R=[];for(var C=0;C<2*x;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let D=0;D<I.g.length;D++){const V=this.i(C)>>>16,N=this.i(C)&65535,_e=I.i(D)>>>16,Ge=I.i(D)&65535;R[2*C+2*D]+=N*Ge,te(R,2*C+2*D),R[2*C+2*D+1]+=V*Ge,te(R,2*C+2*D+1),R[2*C+2*D+1]+=N*_e,te(R,2*C+2*D+1),R[2*C+2*D+2]+=V*_e,te(R,2*C+2*D+2)}for(I=0;I<x;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=x;I<2*x;I++)R[I]=0;return new f(R,0)};function te(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function ae(I,x){this.g=I,this.h=x}function ye(I,x){if(q(x))throw Error("division by zero");if(q(I))return new ae(S,S);if(J(I))return x=ye(Z(I),x),new ae(Z(x.g),Z(x.h));if(J(x))return x=ye(I,Z(x)),new ae(Z(x.g),x.h);if(I.g.length>30){if(J(I)||J(x))throw Error("slowDivide_ only works with positive integers.");for(var R=A,C=x;C.l(I)<=0;)R=ne(R),C=ne(C);var D=fe(R,1),V=fe(C,1);for(C=fe(C,2),R=fe(R,2);!q(C);){var N=V.add(C);N.l(I)<=0&&(D=D.add(R),V=N),C=fe(C,1),R=fe(R,1)}return x=oe(I,D.j(x)),new ae(D,x)}for(D=S;I.l(x)>=0;){for(R=Math.max(1,Math.floor(I.m()/x.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),V=y(R),N=V.j(x);J(N)||N.l(I)>0;)R-=C,V=y(R),N=V.j(x);q(V)&&(V=A),D=D.add(V),I=oe(I,N)}return new ae(D,I)}s.B=function(I){return ye(this,I).h},s.and=function(I){const x=Math.max(this.g.length,I.g.length),R=[];for(let C=0;C<x;C++)R[C]=this.i(C)&I.i(C);return new f(R,this.h&I.h)},s.or=function(I){const x=Math.max(this.g.length,I.g.length),R=[];for(let C=0;C<x;C++)R[C]=this.i(C)|I.i(C);return new f(R,this.h|I.h)},s.xor=function(I){const x=Math.max(this.g.length,I.g.length),R=[];for(let C=0;C<x;C++)R[C]=this.i(C)^I.i(C);return new f(R,this.h^I.h)};function ne(I){const x=I.g.length+1,R=[];for(let C=0;C<x;C++)R[C]=I.i(C)<<1|I.i(C-1)>>>31;return new f(R,I.h)}function fe(I,x){const R=x>>5;x%=32;const C=I.g.length-R,D=[];for(let V=0;V<C;V++)D[V]=x>0?I.i(V+R)>>>x|I.i(V+R+1)<<32-x:I.i(V+R);return new f(D,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,PE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=b,or=f}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zE,Oo,BE,eh,bm,qE,HE,FE;(function(){var s,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hc=="object"&&Hc];for(var m=0;m<c.length;++m){var E=c[m];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function o(c,m){if(m)e:{var E=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var U=c[w];if(!(U in E))break e;E=E[U]}c=c[c.length-1],w=E[c],m=m(w),m!=w&&m!=null&&e(E,c,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(m){var E=[],w;for(w in m)Object.prototype.hasOwnProperty.call(m,w)&&E.push([w,m[w]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function g(c,m,E){return c.call.apply(c.bind,arguments)}function y(c,m,E){return y=g,y.apply(null,arguments)}function b(c,m){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function S(c,m){function E(){}E.prototype=m.prototype,c.Z=m.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(w,U,H){for(var re=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)re[Oe-2]=arguments[Oe];return m.prototype[U].apply(w,re)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function j(c){const m=c.length;if(m>0){const E=Array(m);for(let w=0;w<m;w++)E[w]=c[w];return E}return[]}function q(c,m){for(let w=1;w<arguments.length;w++){const U=arguments[w];var E=typeof U;if(E=E!="object"?E:U?Array.isArray(U)?"array":E:"null",E=="array"||E=="object"&&typeof U.length=="number"){E=c.length||0;const H=U.length||0;c.length=E+H;for(let re=0;re<H;re++)c[E+re]=U[re]}else c.push(U)}}class J{constructor(m,E){this.i=m,this.j=E,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(c){f.setTimeout(()=>{throw c},0)}function oe(){var c=I;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class te{constructor(){this.h=this.g=null}add(m,E){const w=ae.get();w.set(m,E),this.h?this.h.next=w:this.g=w,this.h=w}}var ae=new J(()=>new ye,c=>c.reset());class ye{constructor(){this.next=this.g=this.h=null}set(m,E){this.h=m,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,fe=!1,I=new te,x=()=>{const c=Promise.resolve(void 0);ne=()=>{c.then(R)}};function R(){for(var c;c=oe();){try{c.h.call(c.g)}catch(E){Z(E)}var m=ae;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}fe=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};f.addEventListener("test",E,m),f.removeEventListener("test",E,m)}catch{}return c})();function N(c){return/^[\s\xa0]*$/.test(c)}function _e(c,m){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}S(_e,D),_e.prototype.init=function(c,m){const E=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(E=="mouseover"?m=c.fromElement:E=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ge="closure_listenable_"+(Math.random()*1e6|0),G=0;function ie(c,m,E,w,U){this.listener=c,this.proxy=null,this.src=m,this.type=E,this.capture=!!w,this.ha=U,this.key=++G,this.da=this.fa=!1}function me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ve(c,m,E){for(const w in c)m.call(E,c[w],w,c)}function Qe(c,m){for(const E in c)m.call(void 0,c[E],E,c)}function M(c){const m={};for(const E in c)m[E]=c[E];return m}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(c,m){let E,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(E in w)c[E]=w[E];for(let H=0;H<Q.length;H++)E=Q[H],Object.prototype.hasOwnProperty.call(w,E)&&(c[E]=w[E])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,m,E,w,U){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const re=Ne(c,m,w,U);return re>-1?(m=c[re],E||(m.fa=!1)):(m=new ie(m,this.src,H,!!w,U),m.fa=E,c.push(m)),m};function Te(c,m){const E=m.type;if(E in c.g){var w=c.g[E],U=Array.prototype.indexOf.call(w,m,void 0),H;(H=U>=0)&&Array.prototype.splice.call(w,U,1),H&&(me(m),c.g[E].length==0&&(delete c.g[E],c.h--))}}function Ne(c,m,E,w){for(let U=0;U<c.length;++U){const H=c[U];if(!H.da&&H.listener==m&&H.capture==!!E&&H.ha==w)return U}return-1}var je="closure_lm_"+(Math.random()*1e6|0),_t={};function ut(c,m,E,w,U){if(Array.isArray(m)){for(let H=0;H<m.length;H++)ut(c,m[H],E,w,U);return null}return E=Re(E),c&&c[Ge]?c.J(m,E,p(w)?!!w.capture:!1,U):ci(c,m,E,!1,w,U)}function ci(c,m,E,w,U,H){if(!m)throw Error("Invalid event type");const re=p(U)?!!U.capture:!!U;let Oe=Le(c);if(Oe||(c[je]=Oe=new ce(c)),E=Oe.add(m,E,w,re,H),E.proxy)return E;if(w=Dn(),E.proxy=w,w.src=c,w.listener=E,c.addEventListener)V||(U=re),U===void 0&&(U=!1),c.addEventListener(m.toString(),w,U);else if(c.attachEvent)c.attachEvent(se(m.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Dn(){function c(E){return m.call(c.src,c.listener,E)}const m=de;return c}function vs(c,m,E,w,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)vs(c,m[H],E,w,U);else w=p(w)?!!w.capture:!!w,E=Re(E),c&&c[Ge]?(c=c.i,H=String(m).toString(),H in c.g&&(m=c.g[H],E=Ne(m,E,w,U),E>-1&&(me(m[E]),Array.prototype.splice.call(m,E,1),m.length==0&&(delete c.g[H],c.h--)))):c&&(c=Le(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Ne(m,E,w,U)),(E=c>-1?m[c]:null)&&zi(E))}function zi(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Ge])Te(m.i,c);else{var E=c.type,w=c.proxy;m.removeEventListener?m.removeEventListener(E,w,c.capture):m.detachEvent?m.detachEvent(se(E),w):m.addListener&&m.removeListener&&m.removeListener(w),(E=Le(m))?(Te(E,c),E.h==0&&(E.src=null,m[je]=null)):me(c)}}}function se(c){return c in _t?_t[c]:_t[c]="on"+c}function de(c,m){if(c.da)c=!0;else{m=new _e(m,this);const E=c.listener,w=c.ha||c.src;c.fa&&zi(c),c=E.call(w,m)}return c}function Le(c){return c=c[je],c instanceof ce?c:null}var xe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Re(c){return typeof c=="function"?c:(c[xe]||(c[xe]=function(m){return c.handleEvent(m)}),c[xe])}function be(){C.call(this),this.i=new ce(this),this.M=this,this.G=null}S(be,C),be.prototype[Ge]=!0,be.prototype.removeEventListener=function(c,m,E,w){vs(this,c,m,E,w)};function tt(c,m){var E,w=c.G;if(w)for(E=[];w;w=w.G)E.push(w);if(c=c.M,w=m.type||m,typeof m=="string")m=new D(m,c);else if(m instanceof D)m.target=m.target||c;else{var U=m;m=new D(w,c),le(m,U)}U=!0;let H,re;if(E)for(re=E.length-1;re>=0;re--)H=m.g=E[re],U=nn(H,w,!0,m)&&U;if(H=m.g=c,U=nn(H,w,!0,m)&&U,U=nn(H,w,!1,m)&&U,E)for(re=0;re<E.length;re++)H=m.g=E[re],U=nn(H,w,!1,m)&&U}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const E=c.g[m];for(let w=0;w<E.length;w++)me(E[w]);delete c.g[m],c.h--}}this.G=null},be.prototype.J=function(c,m,E,w){return this.i.add(String(c),m,!1,E,w)},be.prototype.K=function(c,m,E,w){return this.i.add(String(c),m,!0,E,w)};function nn(c,m,E,w){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let H=0;H<m.length;++H){const re=m[H];if(re&&!re.da&&re.capture==E){const Oe=re.listener,xt=re.ha||re.src;re.fa&&Te(c.i,re),U=Oe.call(xt,w)!==!1&&U}}return U&&!w.defaultPrevented}function Bi(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function Er(c){c.g=Bi(()=>{c.g=null,c.i&&(c.i=!1,Er(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Kt extends C{constructor(m,E){super(),this.m=m,this.l=E,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Er(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(c){C.call(this),this.h=c,this.g={}}S(br,C);var Sl=[];function Al(c){Ve(c.g,function(m,E){this.g.hasOwnProperty(E)&&zi(m)},c),c.g={}}br.prototype.N=function(){br.Z.N.call(this),Al(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Es=f.JSON.stringify,Xh=f.JSON.parse,mu=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function pu(){}function gu(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){D.call(this,"d")}S(Qt,D);function On(){D.call(this,"c")}S(On,D);var wt={},yu=null;function fa(){return yu=yu||new be}wt.Ia="serverreachability";function _u(c){D.call(this,wt.Ia,c)}S(_u,D);function hi(c){const m=fa();tt(m,new _u(m))}wt.STAT_EVENT="statevent";function Tr(c,m){D.call(this,wt.STAT_EVENT,c),this.stat=m}S(Tr,D);function It(c){const m=fa();tt(m,new Tr(m,c))}wt.Ja="timingevent";function fi(c,m){D.call(this,wt.Ja,c),this.size=m}S(fi,D);function di(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function $h(c,m,E,w,U,H){c.info(function(){if(c.g)if(H){var re="",Oe=H.split("&");for(let Je=0;Je<Oe.length;Je++){var xt=Oe[Je].split("=");if(xt.length>1){const pt=xt[0];xt=xt[1];const jn=pt.split("_");re=jn.length>=2&&jn[1]=="type"?re+(pt+"="+xt+"&"):re+(pt+"=redacted&")}}}else re=null;else re=H;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+m+`
`+E+`
`+re})}function vu(c,m,E,w,U,H,re){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+m+`
`+E+`
`+H+" "+re})}function mi(c,m,E,w){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Jh(c,E)+(w?" "+w:"")})}function wr(c,m){c.info(function(){return"TIMEOUT: "+m})}Xn.prototype.info=function(){};function Jh(c,m){if(!c.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var E=H[c];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var U=w[0];if(U!="noop"&&U!="stop"&&U!="close")for(let re=1;re<w.length;re++)w[re]=""}}}}return Es(H)}catch{return m}}var xr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Il;function Sr(){}S(Sr,pu),Sr.prototype.g=function(){return new XMLHttpRequest},Il=new Sr;function qi(c){return encodeURIComponent(String(c))}function Eu(c){var m=1;c=c.split(":");const E=[];for(;m>0&&c.length;)E.push(c.shift()),m--;return c.length&&E.push(c.join(":")),E}function $n(c,m,E,w){this.j=c,this.i=m,this.l=E,this.S=w||1,this.V=new br(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var Nt={},qt={};function pi(c,m,E){c.M=1,c.A=Ar(Dt(m)),c.u=E,c.R=!0,da(c,null)}function da(c,m){c.F=Date.now(),gi(c),c.B=Dt(c.A);var E=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),ya(E.i,"t",w),c.C=0,E=c.j.L,c.h=new Jn,c.g=ku(c.j,E?m:null,!c.u),c.P>0&&(c.O=new Kt(y(c.Y,c,c.g),c.P)),m=c.V,E=c.g,w=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(Sl[0]=U.toString()),U=Sl);for(let H=0;H<U.length;H++){const re=ut(E,U[H],w||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),hi(),$h(c.i,c.v,c.B,c.l,c.S,c.u)}$n.prototype.ba=function(c){c=c.target;const m=this.O;m&&ei(c)==3?m.j():this.Y(c)},$n.prototype.Y=function(c){try{if(c==this.g)e:{const Oe=ei(this.g),xt=this.g.ya(),Je=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Oe!=4||xt==7||(xt==8||Je<=0?hi(3):hi(2)),yi(this);var m=this.g.ca();this.X=m;var E=Zh(this);if(this.o=m==200,vu(this.i,this.v,this.B,this.l,this.S,Oe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var w,U=this.g;if((w=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(w)){var H=w;break t}}H=null}if(c=H)mi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_i(this,c);else{this.o=!1,this.m=3,It(12),bn(this),Mn(this);break e}}if(this.R){c=!0;let pt;for(;!this.K&&this.C<E.length;)if(pt=Tu(this,E),pt==qt){Oe==4&&(this.m=4,It(14),c=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Nt){this.m=4,It(15),mi(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else mi(this.i,this.l,pt,null),_i(this,pt);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||E.length!=0||this.h.h||(this.m=1,It(16),c=!1),this.o=this.o&&c,!c)mi(this.i,this.l,E,"[Invalid Chunked Response]"),bn(this),Mn(this);else if(E.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Hl(re),re.P=!0,It(11))}}else mi(this.i,this.l,E,null),_i(this,E);Oe==4&&bn(this),this.o&&!this.K&&(Oe==4?Du(this.j,this):(this.o=!1,gi(this)))}else Fi(this.g),m==400&&E.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),bn(this),Mn(this)}}}catch{}finally{}};function Zh(c){if(!bu(c))return c.g.la();const m=Yt(c.g);if(m==="")return"";let E="";const w=m.length,U=ei(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return bn(c),Mn(c),"";c.h.i=new f.TextDecoder}for(let H=0;H<w;H++)c.h.h=!0,E+=c.h.i.decode(m[H],{stream:!(U&&H==w-1)});return m.length=0,c.h.g+=E,c.C=0,c.h.g}function bu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Tu(c,m){var E=c.C,w=m.indexOf(`
`,E);return w==-1?qt:(E=Number(m.substring(E,w)),isNaN(E)?Nt:(w+=1,w+E>m.length?qt:(m=m.slice(w,w+E),c.C=w+E,m)))}$n.prototype.cancel=function(){this.K=!0,bn(this)};function gi(c){c.T=Date.now()+c.H,ma(c,c.H)}function ma(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=di(y(c.aa,c),m)}function yi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}$n.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(wr(this.i,this.B),this.M!=2&&(hi(),It(17)),bn(this),this.m=2,Mn(this)):ma(this,this.T-c)};function Mn(c){c.j.I==0||c.K||Du(c.j,c)}function bn(c){yi(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,Al(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function _i(c,m){try{var E=c.j;if(E.I!=0&&(E.g==c||Ei(E.h,c))){if(!c.L&&Ei(E.h,c)&&E.I==3){try{var w=E.Ba.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)Ta(E),Is(E);else break e;Mr(E),It(18)}}else E.xa=U[1],0<E.xa-E.K&&U[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=di(y(E.Va,E),6e3));vi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ai(E,11)}else if((c.L||E.g==c)&&Ta(E),!N(m))for(U=E.Ba.g.parse(m),m=0;m<U.length;m++){let Je=U[m];const pt=Je[0];if(!(pt<=E.K))if(E.K=pt,Je=Je[1],E.I==2)if(Je[0]=="c"){E.M=Je[1],E.ba=Je[2];const jn=Je[3];jn!=null&&(E.ka=jn,E.j.info("VER="+E.ka));const Ri=Je[4];Ri!=null&&(E.za=Ri,E.j.info("SVER="+E.za));const ti=Je[5];ti!=null&&typeof ti=="number"&&ti>0&&(w=1.5*ti,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const ni=c.g;if(ni){const Vr=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vr){var H=w.h;H.g||Vr.indexOf("spdy")==-1&&Vr.indexOf("quic")==-1&&Vr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Dl(H,H.h),H.h=null))}if(w.G){const wa=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(w.wa=wa,nt(w.J,w.G,wa))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var re=c;if(w.na=Vu(w,w.L?w.ba:null,w.W),re.L){Ol(w.h,re);var Oe=re,xt=w.O;xt&&(Oe.H=xt),Oe.D&&(yi(Oe),gi(Oe)),w.g=re}else Nu(w);E.i.length>0&&Si(E)}else Je[0]!="stop"&&Je[0]!="close"||Ai(E,7);else E.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Ai(E,7):Bl(E):Je[0]!="noop"&&E.l&&E.l.qa(Je),E.A=0)}}hi(4)}catch{}}var Ct=class{constructor(c,m){this.g=c,this.map=m}};function Nl(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cl(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vi(c){return c.h?1:c.g?c.g.size:0}function Ei(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Dl(c,m){c.g?c.g.add(m):c.h=m}function Ol(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Nl.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ml(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const E of c.g.values())m=m.concat(E.G);return m}return j(c.i)}var wu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pa(c,m){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const w=c[E].indexOf("=");let U,H=null;w>=0?(U=c[E].substring(0,w),H=c[E].substring(w+1)):U=c[E],m(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Tn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof Tn?(this.l=c.l,Ht(this,c.j),this.o=c.o,this.g=c.g,bs(this,c.u),this.h=c.h,Vl(this,Ru(c.i)),this.m=c.m):c&&(m=String(c).match(wu))?(this.l=!1,Ht(this,m[1]||"",!0),this.o=bi(m[2]||""),this.g=bi(m[3]||"",!0),bs(this,m[4]),this.h=bi(m[5]||"",!0),Vl(this,m[6]||"",!0),this.m=bi(m[7]||"")):(this.l=!1,this.i=new ws(null,this.l))}Tn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(Rr(m,ga,!0),":");var E=this.g;return(E||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Rr(m,ga,!0),"@"),c.push(qi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Rr(E,E.charAt(0)=="/"?kl:xu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Rr(E,Su)),c.join("")},Tn.prototype.resolve=function(c){const m=Dt(this);let E=!!c.j;E?Ht(m,c.j):E=!!c.o,E?m.o=c.o:E=!!c.g,E?m.g=c.g:E=c.u!=null;var w=c.h;if(E)bs(m,c.u);else if(E=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var U=m.h.lastIndexOf("/");U!=-1&&(w=m.h.slice(0,U+1)+w)}if(U=w,U==".."||U==".")w="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){w=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let re=0;re<U.length;){const Oe=U[re++];Oe=="."?w&&re==U.length&&H.push(""):Oe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),w&&re==U.length&&H.push("")):(H.push(Oe),w=!0)}w=H.join("/")}else w=U}return E?m.h=w:E=c.i.toString()!=="",E?Vl(m,Ru(c.i)):E=!!c.m,E&&(m.m=c.m),m};function Dt(c){return new Tn(c)}function Ht(c,m,E){c.j=E?bi(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function bs(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Vl(c,m,E){m instanceof ws?(c.i=m,_a(c.i,c.l)):(E||(m=Rr(m,Ts)),c.i=new ws(m,c.l))}function nt(c,m,E){c.i.set(m,E)}function Ar(c){return nt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function bi(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Rr(c,m,E){return typeof c=="string"?(c=encodeURI(c).replace(m,hn),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function hn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ga=/[#\/\?@]/g,xu=/[#\?:]/g,kl=/[#\?]/g,Ts=/[#\?@]/g,Su=/#/g;function ws(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function fn(c){c.g||(c.g=new Map,c.h=0,c.i&&pa(c.i,function(m,E){c.add(decodeURIComponent(m.replace(/\+/g," ")),E)}))}s=ws.prototype,s.add=function(c,m){fn(this),this.i=null,c=xs(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(m),this.h+=1,this};function Au(c,m){fn(c),m=xs(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function jl(c,m){return fn(c),m=xs(c,m),c.g.has(m)}s.forEach=function(c,m){fn(this),this.g.forEach(function(E,w){E.forEach(function(U){c.call(m,U,w,this)},this)},this)};function Ll(c,m){fn(c);let E=[];if(typeof m=="string")jl(c,m)&&(E=E.concat(c.g.get(xs(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)E=E.concat(c[m]);return E}s.set=function(c,m){return fn(this),this.i=null,c=xs(this,c),jl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=Ll(this,c),c.length>0?String(c[0]):m):m};function ya(c,m,E){Au(c,m),E.length>0&&(c.i=null,c.g.set(xs(c,m),j(E)),c.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let w=0;w<m.length;w++){var E=m[w];const U=qi(E);E=Ll(this,E);for(let H=0;H<E.length;H++){let re=U;E[H]!==""&&(re+="="+qi(E[H])),c.push(re)}}return this.i=c.join("&")};function Ru(c){const m=new ws;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function xs(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function _a(c,m){m&&!c.j&&(fn(c),c.i=null,c.g.forEach(function(E,w){const U=w.toLowerCase();w!=U&&(Au(this,w),ya(this,U,E))},c)),c.j=m}function Zn(c,m){const E=new Xn;if(f.Image){const w=new Image;w.onload=b(Vn,E,"TestLoadImage: loaded",!0,m,w),w.onerror=b(Vn,E,"TestLoadImage: error",!1,m,w),w.onabort=b(Vn,E,"TestLoadImage: abort",!1,m,w),w.ontimeout=b(Vn,E,"TestLoadImage: timeout",!1,m,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else m(!1)}function Ul(c,m){const E=new Xn,w=new AbortController,U=setTimeout(()=>{w.abort(),Vn(E,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:w.signal}).then(H=>{clearTimeout(U),H.ok?Vn(E,"TestPingServer: ok",!0,m):Vn(E,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Vn(E,"TestPingServer: error",!1,m)})}function Vn(c,m,E,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(E)}catch{}}function Ss(){this.g=new mu}function Ti(c){this.i=c.Sb||null,this.h=c.ab||!1}S(Ti,pu),Ti.prototype.g=function(){return new Ir(this.i,this.h)};function Ir(c,m){be.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Ir,be),s=Ir.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Wn(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;va(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function va(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?As(this):Wn(this),this.readyState==3&&va(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,As(this))},s.Na=function(c){this.g&&(this.response=c,As(this))},s.ga=function(){this.g&&As(this)};function As(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Wn(c)}s.setRequestHeader=function(c,m){this.A.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var E=m.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=m.next();return c.join(`\r
`)};function Wn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function kn(c){let m="";return Ve(c,function(E,w){m+=w,m+=":",m+=E,m+=`\r
`}),m}function Nr(c,m,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=kn(E),typeof c=="string"?E!=null&&qi(E):nt(c,m,E))}function rt(c){be.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(rt,be);var wi=/^https?$/i,Pl=["POST","PUT"];s=rt.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,m,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Il.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){Cr(this,H);return}if(c=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)E.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const H of w.keys())E.set(H,w.get(H));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(H=>H.toLowerCase()=="content-type"),U=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Pl,m,void 0)>=0)||w||U||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,re]of E)this.g.setRequestHeader(H,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){Cr(this,H)}};function Cr(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,zl(c),Hi(c)}function zl(c){c.A||(c.A=!0,tt(c,"complete"),tt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,tt(this,"complete"),tt(this,"abort"),Hi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),rt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Dr(this):this.Xa())},s.Xa=function(){Dr(this)};function Dr(c){if(c.h&&typeof u<"u"){if(c.v&&ei(c)==4)setTimeout(c.Ca.bind(c),0);else if(tt(c,"readystatechange"),ei(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var E;if(!(E=m)){var w;if(w=H===0){let re=String(c.D).match(wu)[1]||null;!re&&f.self&&f.self.location&&(re=f.self.location.protocol.slice(0,-1)),w=!wi.test(re?re.toLowerCase():"")}E=w}if(E)tt(c,"complete"),tt(c,"success");else{c.o=6;try{var U=ei(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",zl(c)}}finally{Hi(c)}}}}function Hi(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,m||tt(c,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ei(c){return c.g?c.g.readyState:0}s.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Xh(m)}};function Yt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(c){const m={};c=(c.g&&ei(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(N(c[w]))continue;var E=Eu(c[w]);const U=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const H=m[U]||[];m[U]=H,H.push(E)}Qe(m,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(c,m,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||m}function Rs(c){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,c),this.Za=xi("retryDelaySeedMs",1e4,c),this.Ta=xi("forwardChannelMaxRetries",2,c),this.va=xi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Nl(c&&c.concurrentRequestLimit),this.Ba=new Ss,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Rs.prototype,s.ka=8,s.I=1,s.connect=function(c,m,E,w){It(0),this.W=c,this.H=m||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=Vu(this,null,this.W),Si(this)};function Bl(c){if(Ea(c),c.I==3){var m=c.V++,E=Dt(c.J);if(nt(E,"SID",c.M),nt(E,"RID",m),nt(E,"TYPE","terminate"),Or(c,E),m=new $n(c,c.j,m),m.M=2,m.A=Ar(Dt(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=m.A,E=!0),E||(m.g=ku(m.j,null),m.g.ea(m.A)),m.F=Date.now(),gi(m)}Mu(c)}function Is(c){c.g&&(Hl(c),c.g.cancel(),c.g=null)}function Ea(c){Is(c),c.v&&(f.clearTimeout(c.v),c.v=null),Ta(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Si(c){if(!Cl(c.h)&&!c.m){c.m=!0;var m=c.Ea;ne||x(),fe||(ne(),fe=!0),I.add(m,c),c.D=0}}function ba(c,m){return vi(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=di(y(c.Ea,c,m),Ou(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new $n(this,this.j,c);let H=this.o;if(this.U&&(H?(H=M(H),le(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var m=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,m>4096){m=E;break e}if(m===4096||E===this.i.length-1){m=E+1;break e}}m=1e3}else m=1e3;m=Iu(this,U,m),E=Dt(this.J),nt(E,"RID",c),nt(E,"CVER",22),this.G&&nt(E,"X-HTTP-Session-Id",this.G),Or(this,E),H&&(this.R?m="headers="+qi(kn(H))+"&"+m:this.u&&Nr(E,this.u,H)),Dl(this.h,U),this.Ra&&nt(E,"TYPE","init"),this.S?(nt(E,"$req",m),nt(E,"SID","null"),U.U=!0,pi(U,E,null)):pi(U,E,m),this.I=2}}else this.I==3&&(c?ql(this,c):this.i.length==0||Cl(this.h)||ql(this))};function ql(c,m){var E;m?E=m.l:E=c.V++;const w=Dt(c.J);nt(w,"SID",c.M),nt(w,"RID",E),nt(w,"AID",c.K),Or(c,w),c.u&&c.o&&Nr(w,c.u,c.o),E=new $n(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Iu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Dl(c.h,E),pi(E,w,m)}function Or(c,m){c.H&&Ve(c.H,function(E,w){nt(m,w,E)}),c.l&&Ve({},function(E,w){nt(m,w,E)})}function Iu(c,m,E){E=Math.min(c.i.length,E);const w=c.l?y(c.l.Ka,c.l,c):null;e:{var U=c.i;let Oe=-1;for(;;){const xt=["count="+E];Oe==-1?E>0?(Oe=U[0].g,xt.push("ofs="+Oe)):Oe=0:xt.push("ofs="+Oe);let Je=!0;for(let pt=0;pt<E;pt++){var H=U[pt].g;const jn=U[pt].map;if(H-=Oe,H<0)Oe=Math.max(0,U[pt].g-100),Je=!1;else try{H="req"+H+"_"||"";try{var re=jn instanceof Map?jn:Object.entries(jn);for(const[Ri,ti]of re){let ni=ti;p(ti)&&(ni=Es(ti)),xt.push(H+Ri+"="+encodeURIComponent(ni))}}catch(Ri){throw xt.push(H+"type="+encodeURIComponent("_badmap")),Ri}}catch{w&&w(jn)}}if(Je){re=xt.join("&");break e}}re=void 0}return c=c.i.splice(0,E),m.G=c,re}function Nu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;ne||x(),fe||(ne(),fe=!0),I.add(m,c),c.A=0}}function Mr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=di(y(c.Da,c),Ou(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Cu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=di(y(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Is(this),Cu(this))};function Hl(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Cu(c){c.g=new $n(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=Dt(c.na);nt(m,"RID","rpc"),nt(m,"SID",c.M),nt(m,"AID",c.K),nt(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&nt(m,"TO",c.ia),nt(m,"TYPE","xmlhttp"),Or(c,m),c.u&&c.o&&Nr(m,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=Ar(Dt(m)),E.u=null,E.R=!0,da(E,c)}s.Va=function(){this.C!=null&&(this.C=null,Is(this),Mr(this),It(19))};function Ta(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Du(c,m){var E=null;if(c.g==m){Ta(c),Hl(c),c.g=null;var w=2}else if(Ei(c.h,m))E=m.G,Ol(c.h,m),w=1;else return;if(c.I!=0){if(m.o)if(w==1){E=m.u?m.u.length:0,m=Date.now()-m.F;var U=c.D;w=fa(),tt(w,new fi(w,E)),Si(c)}else Nu(c);else if(U=m.m,U==3||U==0&&m.X>0||!(w==1&&ba(c,m)||w==2&&Mr(c)))switch(E&&E.length>0&&(m=c.h,m.i=m.i.concat(E)),U){case 1:Ai(c,5);break;case 4:Ai(c,10);break;case 3:Ai(c,6);break;default:Ai(c,2)}}}function Ou(c,m){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*m}function Ai(c,m){if(c.j.info("Error code "+m),m==2){var E=y(c.bb,c),w=c.Ua;const U=!w;w=new Tn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ht(w,"https"),Ar(w),U?Zn(w.toString(),E):Ul(w.toString(),E)}else It(2);c.I=0,c.l&&c.l.pa(m),Mu(c),Ea(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Mu(c){if(c.I=0,c.ja=[],c.l){const m=Ml(c.h);(m.length!=0||c.i.length!=0)&&(q(c.ja,m),q(c.ja,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.oa()}}function Vu(c,m,E){var w=E instanceof Tn?Dt(E):new Tn(E);if(w.g!="")m&&(w.g=m+"."+w.g),bs(w,w.u);else{var U=f.location;w=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const H=new Tn(null);w&&Ht(H,w),m&&(H.g=m),U&&bs(H,U),E&&(H.h=E),w=H}return E=c.G,m=c.wa,E&&m&&nt(w,E,m),nt(w,"VER",c.ka),Or(c,w),w}function ku(c,m,E){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new rt(new Ti({ab:E})):new rt(c.ma),m.Fa(c.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}s=ju.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ns(){}Ns.prototype.g=function(c,m){return new un(c,m)};function un(c,m){be.call(this),this.g=new Rs(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!N(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!N(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Gi(this)}S(un,be),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Bl(this.g)},un.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=Es(c),c=E);m.i.push(new Ct(m.Ya++,c)),m.I==3&&Si(m)},un.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,un.Z.N.call(this)};function Lu(c){Qt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const E in m){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}S(Lu,Qt);function Uu(){On.call(this),this.status=1}S(Uu,On);function Gi(c){this.g=c}S(Gi,ju),Gi.prototype.ra=function(){tt(this.g,"a")},Gi.prototype.qa=function(c){tt(this.g,new Lu(c))},Gi.prototype.pa=function(c){tt(this.g,new Uu)},Gi.prototype.oa=function(){tt(this.g,"b")},Ns.prototype.createWebChannel=Ns.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,FE=function(){return new Ns},HE=function(){return fa()},qE=wt,bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,eh=xr,Rl.COMPLETE="complete",BE=Rl,gu.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",be.prototype.listen=be.prototype.J,Oo=gu,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,zE=rt}).apply(typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="12.8.0";function h2(s){El=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Pm("@firebase/firestore");function Wa(){return aa.logLevel}function he(s,...e){if(aa.logLevel<=qe.DEBUG){const n=e.map($m);aa.debug(`Firestore (${El}): ${s}`,...n)}}function ms(s,...e){if(aa.logLevel<=qe.ERROR){const n=e.map($m);aa.error(`Firestore (${El}): ${s}`,...n)}}function hl(s,...e){if(aa.logLevel<=qe.WARN){const n=e.map($m);aa.warn(`Firestore (${El}): ${s}`,...n)}}function $m(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,GE(s,r,n)}function GE(s,e,n){let r=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ms(r),new Error(r)}function et(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||GE(e,o,r)}function De(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(an.UNAUTHENTICATED)))}shutdown(){}}class d2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class m2{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hs,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hs)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string",31837,{l:r}),new KE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class p2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class g2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new p2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const r=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=_2(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function He(s,e){return s<e?-1:s>e?1:0}function Tm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return am(o)===am(u)?He(o,u):am(o)?1:-1}return He(s.length,e.length)}const v2=55296,E2=57343;function am(s){const e=s.charCodeAt(0);return e>=v2&&e<=E2}function fl(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="__name__";class Mi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=Mi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return He(e.length,n.length)}static compareSegments(e,n){const r=Mi.isNumericId(e),o=Mi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Mi.extractNumericId(e).compare(Mi.extractNumericId(n)):Tm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return or.fromString(e.substring(4,e.length-2))}}class ht extends Mi{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new ht(n)}static emptyPath(){return new ht([])}}const b2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Mi{construct(e,n,r){return new en(e,n,r)}static isValidIdentifier(e){return b2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fv}static keyField(){return new en([Fv])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ue(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(r+=p,o++):(u(),o++)}if(u(),f)throw new ue(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ht.fromString(e))}static fromName(e){return new Ee(ht.fromString(e).popFirst(5))}static empty(){return new Ee(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(s,e,n){if(!n)throw new ue(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function T2(s,e,n,r){if(e===!0&&r===!0)throw new ue(X.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Gv(s){if(!Ee.isDocumentKey(s))throw new ue(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Kv(s){if(Ee.isDocumentKey(s))throw new ue(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function YE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ch(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ae(12329,{type:typeof s})}function En(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ue(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ch(s);throw new ue(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(s,e){const n={typeString:s};return e&&(n.value=e),n}function lu(s,e){if(!YE(s))throw new ue(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new ue(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=-62135596800,Yv=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Yv);return new mt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Qv)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yv}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lu(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Ut("string",mt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new mt(0,0))}static max(){return new Ie(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=-1;function w2(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new cr(o,Ee.empty(),e)}function x2(s){return new cr(s.readTime,s.key,Ko)}class cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cr(Ie.min(),Ee.empty(),Ko)}static max(){return new cr(Ie.max(),Ee.empty(),Ko)}}function S2(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(s.documentKey,e.documentKey),n!==0?n:He(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==A2)throw s;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,r)=>{n(e)}))}static reject(e){return new W(((n,r)=>{r(e)}))}static waitFor(e){return new W(((n,r)=>{let o=0,u=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++u,f&&u===o&&n()}),(g=>r(g)))})),f=!0,u===o&&n()}))}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next((o=>o?W.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new W(((r,o)=>{const u=e.length,f=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((b=>{f[y]=b,++p,p===u&&r(f)}),(b=>o(b)))}}))}static doWhile(e,n){return new W(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function I2(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=-1;function Oh(s){return s==null}function mh(s){return s===0&&1/s==-1/0}function N2(s){return typeof s=="number"&&Number.isInteger(s)&&!mh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="";function C2(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Xv(e)),e=D2(s.get(n),e);return Xv(e)}function D2(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case XE:n+="";break;default:n+=u}}return n}function Xv(s){return s+XE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function _r(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function $E(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Wt.RED,this.left=o??Wt.EMPTY,this.right=u??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Wt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new zt(en.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new JE("Invalid base64 string: "+u):u}})(e);return new tn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const O2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(s){if(et(!!s,39018),typeof s=="string"){let e=0;const n=O2.exec(s);if(et(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(s.seconds),nanos:Rt(s.nanos)}}function Rt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function fr(s){return typeof s=="string"?tn.fromBase64String(s):tn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="server_timestamp",WE="__type__",eb="__previous_value__",tb="__local_write_time__";function Wm(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[WE])==null?void 0:r.stringValue)===ZE}function Mh(s){const e=s.mapValue.fields[eb];return Wm(e)?Mh(e):e}function Qo(s){const e=hr(s.mapValue.fields[tb].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,r,o,u,f,p,g,y,b,S){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=S}}const ph="(default)";class Yo{constructor(e,n){this.projectId=e,this.database=n||ph}static empty(){return new Yo("","")}get isDefaultDatabase(){return this.database===ph}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}function V2(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ue(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="__type__",k2="__max__",Gc={mapValue:{}},ib="__vector__",gh="value";function dr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Wm(s)?4:L2(s)?9007199254740991:j2(s)?10:11:Ae(28295,{value:s})}function Pi(s,e){if(s===e)return!0;const n=dr(s);if(n!==dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Qo(s).isEqual(Qo(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=hr(o.timestampValue),p=hr(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return fr(o.bytesValue).isEqual(fr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Rt(o.geoPointValue.latitude)===Rt(u.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Rt(o.integerValue)===Rt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Rt(o.doubleValue),p=Rt(u.doubleValue);return f===p?mh(f)===mh(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return fl(s.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},p=u.mapValue.fields||{};if($v(f)!==$v(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!Pi(f[g],p[g])))return!1;return!0})(s,e);default:return Ae(52216,{left:s})}}function Xo(s,e){return(s.values||[]).find((n=>Pi(n,e)))!==void 0}function dl(s,e){if(s===e)return 0;const n=dr(s),r=dr(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(s.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=Rt(u.integerValue||u.doubleValue),g=Rt(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return Zv(s.timestampValue,e.timestampValue);case 4:return Zv(Qo(s),Qo(e));case 5:return Tm(s.stringValue,e.stringValue);case 6:return(function(u,f){const p=fr(u),g=fr(f);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=He(p[y],g[y]);if(b!==0)return b}return He(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=He(Rt(u.latitude),Rt(f.latitude));return p!==0?p:He(Rt(u.longitude),Rt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Wv(s.arrayValue,e.arrayValue);case 10:return(function(u,f){var A,j,q,J;const p=u.fields||{},g=f.fields||{},y=(A=p[gh])==null?void 0:A.arrayValue,b=(j=g[gh])==null?void 0:j.arrayValue,S=He(((q=y==null?void 0:y.values)==null?void 0:q.length)||0,((J=b==null?void 0:b.values)==null?void 0:J.length)||0);return S!==0?S:Wv(y,b)})(s.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Gc.mapValue&&f===Gc.mapValue)return 0;if(u===Gc.mapValue)return 1;if(f===Gc.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=f.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const A=Tm(g[S],b[S]);if(A!==0)return A;const j=dl(p[g[S]],y[b[S]]);if(j!==0)return j}return He(g.length,b.length)})(s.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function Zv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return He(s,e);const n=hr(s),r=hr(e),o=He(n.seconds,r.seconds);return o!==0?o:He(n.nanos,r.nanos)}function Wv(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=dl(n[o],r[o]);if(u)return u}return He(n.length,r.length)}function ml(s){return wm(s)}function wm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=hr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return fr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ee.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=wm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${wm(n.fields[f])}`;return o+"}"})(s.mapValue):Ae(61005,{value:s})}function th(s){switch(dr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(s);return e?16+th(e):16;case 5:return 2*s.stringValue.length;case 6:return fr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+th(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return _r(r.fields,((u,f)=>{o+=u.length+th(f)})),o})(s.mapValue);default:throw Ae(13486,{value:s})}}function e0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function xm(s){return!!s&&"integerValue"in s}function ep(s){return!!s&&"arrayValue"in s}function t0(s){return!!s&&"nullValue"in s}function n0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function nh(s){return!!s&&"mapValue"in s}function j2(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[nb])==null?void 0:r.stringValue)===ib}function Uo(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return _r(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Uo(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uo(s.arrayValue.values[n]);return e}return{...s}}function L2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===k2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uo(n)}setAll(e){let n=en.emptyPath(),r={},o=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}f?r[p.lastSegment()]=Uo(f):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){_r(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new vn(Uo(this.value))}}function sb(s){const e=[];return _r(s.fields,((n,r)=>{const o=new en([n]);if(nh(r)){const u=sb(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,r,o,u,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new ln(e,0,Ie.min(),Ie.min(),Ie.min(),vn.empty(),0)}static newFoundDocument(e,n,r,o){return new ln(e,1,n,Ie.min(),r,o,0)}static newNoDocument(e,n){return new ln(e,2,n,Ie.min(),Ie.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,Ie.min(),Ie.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.position=e,this.inclusive=n}}function i0(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=Ee.comparator(Ee.fromName(f.referenceValue),n.key):r=dl(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function s0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Pi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n="asc"){this.field=e,this.dir=n}}function U2(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{}class Lt extends rb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new z2(e,n,r):n==="array-contains"?new H2(e,r):n==="in"?new F2(e,r):n==="not-in"?new G2(e,r):n==="array-contains-any"?new K2(e,r):new Lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B2(e,r):new q2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(dl(n,this.value)):n!==null&&dr(this.value)===dr(n)&&this.matchesComparison(dl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends rb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ui(e,n)}matches(e){return ab(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ab(s){return s.op==="and"}function lb(s){return P2(s)&&ab(s)}function P2(s){for(const e of s.filters)if(e instanceof ui)return!1;return!0}function Sm(s){if(s instanceof Lt)return s.field.canonicalString()+s.op.toString()+ml(s.value);if(lb(s))return s.filters.map((e=>Sm(e))).join(",");{const e=s.filters.map((n=>Sm(n))).join(",");return`${s.op}(${e})`}}function ob(s,e){return s instanceof Lt?(function(r,o){return o instanceof Lt&&r.op===o.op&&r.field.isEqual(o.field)&&Pi(r.value,o.value)})(s,e):s instanceof ui?(function(r,o){return o instanceof ui&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,p)=>u&&ob(f,o.filters[p])),!0):!1})(s,e):void Ae(19439)}function ub(s){return s instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ml(n.value)}`})(s):s instanceof ui?(function(n){return n.op.toString()+" {"+n.getFilters().map(ub).join(" ,")+"}"})(s):"Filter"}class z2 extends Lt{constructor(e,n,r){super(e,n,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class B2 extends Lt{constructor(e,n){super(e,"in",n),this.keys=cb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class q2 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=cb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function cb(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ee.fromName(r.referenceValue)))}class H2 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ep(n)&&Xo(n.arrayValue,this.value)}}class F2 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xo(this.value.arrayValue,n)}}class G2 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xo(this.value.arrayValue,n)}}class K2 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Xo(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n=null,r=[],o=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function r0(s,e=null,n=[],r=[],o=null,u=null,f=null){return new Q2(s,e,n,r,o,u,f)}function tp(s){const e=De(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Sm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ml(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ml(r))).join(",")),e.Te=n}return e.Te}function np(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!U2(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!ob(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!s0(s.startAt,e.startAt)&&s0(s.endAt,e.endAt)}function Am(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n=null,r=[],o=[],u=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Y2(s,e,n,r,o,u,f,p){return new wl(s,e,n,r,o,u,f,p)}function Vh(s){return new wl(s)}function a0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function X2(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function hb(s){return s.collectionGroup!==null}function Po(s){const e=De(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new zt(en.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new $o(u,r))})),n.has(en.keyField().canonicalString())||e.Ie.push(new $o(en.keyField(),r))}return e.Ie}function ji(s){const e=De(s);return e.Ee||(e.Ee=$2(e,Po(s))),e.Ee}function $2(s,e){if(s.limitType==="F")return r0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new $o(o.field,u)}));const n=s.endAt?new yh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new yh(s.startAt.position,s.startAt.inclusive):null;return r0(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Rm(s,e){const n=s.filters.concat([e]);return new wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function J2(s,e){const n=s.explicitOrderBy.concat([e]);return new wl(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function _h(s,e,n){return new wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function kh(s,e){return np(ji(s),ji(e))&&s.limitType===e.limitType}function fb(s){return`${tp(ji(s))}|lt:${s.limitType}`}function el(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>ub(o))).join(", ")}]`),Oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>ml(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>ml(o))).join(",")),`Target(${r})`})(ji(s))}; limitType=${s.limitType})`}function jh(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Ee.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Po(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(f,p,g){const y=i0(f,p,g);return f.inclusive?y<=0:y<0})(r.startAt,Po(r),o)||r.endAt&&!(function(f,p,g){const y=i0(f,p,g);return f.inclusive?y>=0:y>0})(r.endAt,Po(r),o))})(s,e)}function Z2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function db(s){return(e,n)=>{let r=!1;for(const o of Po(s)){const u=W2(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function W2(s,e,n){const r=s.field.isKeyField()?Ee.comparator(e.key,n.key):(function(u,f,p){const g=f.data.field(u),y=p.data.field(u);return g!==null&&y!==null?dl(g,y):Ae(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_r(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new yt(Ee.comparator);function ps(){return eR}const mb=new yt(Ee.comparator);function Mo(...s){let e=mb;for(const n of s)e=e.insert(n.key,n);return e}function pb(s){let e=mb;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Jr(){return zo()}function gb(){return zo()}function zo(){return new ca((s=>s.toString()),((s,e)=>s.isEqual(e)))}const tR=new yt(Ee.comparator),nR=new zt(Ee.comparator);function Fe(...s){let e=nR;for(const n of s)e=e.add(n);return e}const iR=new zt(He);function sR(){return iR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function yb(s){return{integerValue:""+s}}function _b(s,e){return N2(e)?yb(e):ip(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this._=void 0}}function rR(s,e,n){return s instanceof Jo?(function(o,u){const f={fields:{[WE]:{stringValue:ZE},[tb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Wm(u)&&(u=Mh(u)),u&&(f.fields[eb]=u),{mapValue:f}})(n,e):s instanceof Zo?Eb(s,e):s instanceof Wo?bb(s,e):(function(o,u){const f=vb(o,u),p=l0(f)+l0(o.Ae);return xm(f)&&xm(o.Ae)?yb(p):ip(o.serializer,p)})(s,e)}function aR(s,e,n){return s instanceof Zo?Eb(s,e):s instanceof Wo?bb(s,e):n}function vb(s,e){return s instanceof eu?(function(r){return xm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Jo extends Lh{}class Zo extends Lh{constructor(e){super(),this.elements=e}}function Eb(s,e){const n=Tb(e);for(const r of s.elements)n.some((o=>Pi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Wo extends Lh{constructor(e){super(),this.elements=e}}function bb(s,e){let n=Tb(e);for(const r of s.elements)n=n.filter((o=>!Pi(o,r)));return{arrayValue:{values:n}}}class eu extends Lh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function l0(s){return Rt(s.integerValue||s.doubleValue)}function Tb(s){return ep(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.field=e,this.transform=n}}function lR(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Zo&&o instanceof Zo||r instanceof Wo&&o instanceof Wo?fl(r.elements,o.elements,Pi):r instanceof eu&&o instanceof eu?Pi(r.Ae,o.Ae):r instanceof Jo&&o instanceof Jo})(s.transform,e.transform)}class oR{constructor(e,n){this.version=e,this.transformResults=n}}class Qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Uh{}function xb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new sp(s.key,Qn.none()):new ou(s.key,s.data,Qn.none());{const n=s.data,r=vn.empty();let o=new zt(en.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new vr(s.key,r,new Cn(o.toArray()),Qn.none())}}function uR(s,e,n){s instanceof ou?(function(o,u,f){const p=o.value.clone(),g=u0(o.fieldTransforms,u,f.transformResults);p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):s instanceof vr?(function(o,u,f){if(!ih(o.precondition,u))return void u.convertToUnknownDocument(f.version);const p=u0(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(Sb(o)),g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Bo(s,e,n,r){return s instanceof ou?(function(u,f,p,g){if(!ih(u.precondition,f))return p;const y=u.value.clone(),b=c0(u.fieldTransforms,g,f);return y.setAll(b),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(s,e,n,r):s instanceof vr?(function(u,f,p,g){if(!ih(u.precondition,f))return p;const y=c0(u.fieldTransforms,g,f),b=f.data;return b.setAll(Sb(u)),b.setAll(y),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(u,f,p){return ih(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,n)}function cR(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=vb(r.transform,o||null);u!=null&&(n===null&&(n=vn.empty()),n.set(r.field,u))}return n||null}function o0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&fl(r,o,((u,f)=>lR(u,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ou extends Uh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class vr extends Uh{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Sb(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function u0(s,e,n){const r=new Map;et(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,p=e.data.field(u.field);r.set(u.field,aR(f,p,n[o]))}return r}function c0(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,rR(u,f,e))}return r}class sp extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hR extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&uR(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gb();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=n.has(o.key)?null:p;const g=xb(f,p);g!==null&&r.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,((n,r)=>o0(n,r)))&&fl(this.baseMutations,e.baseMutations,((n,r)=>o0(n,r)))}}class rp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){et(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return tR})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new rp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Ye;function pR(s){switch(s){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:s})}}function Ab(s){if(s===void 0)return ms("GRPC error has no .code"),X.UNKNOWN;switch(s){case jt.OK:return X.OK;case jt.CANCELLED:return X.CANCELLED;case jt.UNKNOWN:return X.UNKNOWN;case jt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case jt.INTERNAL:return X.INTERNAL;case jt.UNAVAILABLE:return X.UNAVAILABLE;case jt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case jt.NOT_FOUND:return X.NOT_FOUND;case jt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case jt.ABORTED:return X.ABORTED;case jt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case jt.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:s})}}(Ye=jt||(jt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new or([4294967295,4294967295],0);function h0(s){const e=gR().encode(s),n=new PE;return n.update(e),new Uint8Array(n.digest())}function f0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new or([n,r],0),new or([o,u],0)]}class ap{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vo(`Invalid padding: ${n}`);if(r<0)throw new Vo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=or.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(or.fromNumber(r)));return o.compare(yR)===1&&(o=new or([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=h0(e),[r,o]=f0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new ap(u,o,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=h0(e),[r,o]=f0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.be(f)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ph(Ie.min(),o,new yt(He),ps(),Fe())}}class uu{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uu(r,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class Rb{constructor(e,n){this.targetId=e,this.Ce=n}}class Ib{constructor(e,n,r=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class d0{constructor(){this.ve=0,this.Fe=m0(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),r=Fe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ae(38017,{changeType:u})}})),new uu(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=m0()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class _R{constructor(e){this.Ge=e,this.ze=new Map,this.je=ps(),this.He=Kc(),this.Je=Kc(),this.Ze=new yt(He)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Am(u))if(r===0){const f=new Ee(u.path);this.et(n,f,ln.newNoDocument(f,Ie.min()))}else et(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),g=p?this.ct(p,e,f):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,p;try{f=fr(r).toUint8Array()}catch(g){if(g instanceof JE)return hl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new ap(f,o,u)}catch(g){return hl(g instanceof Vo?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&Am(p.target)){const g=new Ee(p.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,ln.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.Ke())}}));let r=Fe();this.Je.forEach(((u,f)=>{let p=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Ph(e,n,this.Ze,this.je,r);return this.je=ps(),this.He=Kc(),this.Je=Kc(),this.Ze=new yt(He),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new d0,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new zt(He),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new zt(He),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new d0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kc(){return new yt(Ee.comparator)}function m0(){return new yt(Ee.comparator)}const vR={asc:"ASCENDING",desc:"DESCENDING"},ER={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bR={and:"AND",or:"OR"};class TR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Im(s,e){return s.useProto3Json||Oh(e)?e:{value:e}}function vh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nb(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function wR(s,e){return vh(s,e.toTimestamp())}function Li(s){return et(!!s,49232),Ie.fromTimestamp((function(n){const r=hr(n);return new mt(r.seconds,r.nanos)})(s))}function lp(s,e){return Nm(s,e).canonicalString()}function Nm(s,e){const n=(function(o){return new ht(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Cb(s){const e=ht.fromString(s);return et(kb(e),10190,{key:e.toString()}),e}function Cm(s,e){return lp(s.databaseId,e.path)}function lm(s,e){const n=Cb(e);if(n.get(1)!==s.databaseId.projectId)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ee(Ob(n))}function Db(s,e){return lp(s.databaseId,e)}function xR(s){const e=Cb(s);return e.length===4?ht.emptyPath():Ob(e)}function Dm(s){return new ht(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Ob(s){return et(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function p0(s,e,n){return{name:Cm(s,e),fields:n.value.mapValue.fields}}function SR(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(et(b===void 0||typeof b=="string",58123),tn.fromBase64String(b||"")):(et(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),tn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const b=y.code===void 0?X.UNKNOWN:Ab(y.code);return new ue(b,y.message||"")})(f);n=new Ib(r,o,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=lm(s,r.document.name),u=Li(r.document.updateTime),f=r.document.createTime?Li(r.document.createTime):Ie.min(),p=new vn({mapValue:{fields:r.document.fields}}),g=ln.newFoundDocument(o,u,f,p),y=r.targetIds||[],b=r.removedTargetIds||[];n=new sh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=lm(s,r.document),u=r.readTime?Li(r.readTime):Ie.min(),f=ln.newNoDocument(o,u),p=r.removedTargetIds||[];n=new sh([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=lm(s,r.document),u=r.removedTargetIds||[];n=new sh([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new mR(o,u),p=r.targetId;n=new Rb(p,f)}}return n}function AR(s,e){let n;if(e instanceof ou)n={update:p0(s,e.key,e.value)};else if(e instanceof sp)n={delete:Cm(s,e.key)};else if(e instanceof vr)n={update:p0(s,e.key,e.data),updateMask:kR(e.fieldMask)};else{if(!(e instanceof hR))return Ae(16599,{dt:e.type});n={verify:Cm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const p=f.transform;if(p instanceof Jo)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Zo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Wo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof eu)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:wR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(s,e.precondition)),n}function RR(s,e){return s&&s.length>0?(et(e!==void 0,14353),s.map((n=>(function(o,u){let f=o.updateTime?Li(o.updateTime):Li(u);return f.isEqual(Ie.min())&&(f=Li(u)),new oR(f,o.transformResults||[])})(n,e)))):[]}function IR(s,e){return{documents:[Db(s,e.path)]}}function NR(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Db(s,o);const u=(function(y){if(y.length!==0)return Vb(ui.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((b=>(function(A){return{field:tl(A.field),direction:OR(A.dir)}})(b)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=Im(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function CR(s){let e=xR(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){et(r===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(S){const A=Mb(S);return A instanceof ui&&lb(A)?A.getFilters():[A]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((A=>(function(q){return new $o(nl(q.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(A)))})(n.orderBy));let p=null;n.limit&&(p=(function(S){let A;return A=typeof S=="object"?S.value:S,Oh(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(S){const A=!!S.before,j=S.values||[];return new yh(j,A)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const A=!S.before,j=S.values||[];return new yh(j,A)})(n.endAt)),Y2(e,o,f,u,p,"F",g,y)}function DR(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Mb(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nl(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=nl(n.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=nl(n.unaryFilter.field);return Lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=nl(n.unaryFilter.field);return Lt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Lt.create(nl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ui.create(n.compositeFilter.filters.map((r=>Mb(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(s):Ae(30097,{filter:s})}function OR(s){return vR[s]}function MR(s){return ER[s]}function VR(s){return bR[s]}function tl(s){return{fieldPath:s.canonicalString()}}function nl(s){return en.fromServerFormat(s.fieldPath)}function Vb(s){return s instanceof Lt?(function(n){if(n.op==="=="){if(n0(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NAN"}};if(t0(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(n0(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NAN"}};if(t0(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tl(n.field),op:MR(n.op),value:n.value}}})(s):s instanceof ui?(function(n){const r=n.getFilters().map((o=>Vb(o)));return r.length===1?r[0]:{compositeFilter:{op:VR(n.op),filters:r}}})(s):Ae(54877,{filter:s})}function kR(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function kb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function jb(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r,o,u=Ie.min(),f=Ie.min(),p=tn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.yt=e}}function LR(s){const e=CR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?_h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.Sn=new PR}addToCollectionParentIndex(e,n){return this.Sn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(cr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class PR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new zt(ht.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new zt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lb=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(Lb,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new pl(0)}static ar(){return new pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="LruGarbageCollector",zR=1048576;function _0([s,e],[n,r]){const o=He(s,n);return o===0?He(e,r):o}class BR{constructor(e){this.Pr=e,this.buffer=new zt(_0),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(y0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tl(n)?he(y0,"Ignoring IndexedDB error during garbage collection: ",n):await bl(n)}await this.Ar(3e5)}))}}class HR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Dh.ce);const r=new BR(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(g0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g0):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,u,f,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,p=Date.now(),this.removeTargets(e,r,n)))).next((S=>(u=S,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(y=Date.now(),Wa()<=qe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${S} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function FR(s,e){return new HR(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.changes=new ca((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Bo(r.mutation,o,Cn.empty(),mt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Fe()){const o=Jr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let f=Mo();return u.forEach(((p,g)=>{f=f.insert(p,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=Jr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Fe())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,o){let u=ps();const f=zo(),p=(function(){return zo()})();return n.forEach(((g,y)=>{const b=r.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof vr)?u=u.insert(y.key,y):b!==void 0?(f.set(y.key,b.mutation.getFieldMask()),Bo(b.mutation,y,b.mutation.getFieldMask(),mt.now())):f.set(y.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>f.set(y,b))),n.forEach(((y,b)=>p.set(y,new KR(b,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=zo();let o=new yt(((f,p)=>f-p)),u=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=r.get(g)||Cn.empty();b=p.applyToLocalView(y,b),r.set(g,b);const S=(o.get(p.batchId)||Fe()).add(g);o=o.insert(p.batchId,S)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,S=gb();b.forEach((A=>{if(!u.has(A)){const j=xb(n.get(A),r.get(A));j!==null&&S.set(A,j),u=u.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,S))}return W.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return X2(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):W.resolve(Jr());let p=Ko,g=u;return f.next((y=>W.forEach(y,((b,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),u.get(b)?W.resolve():this.remoteDocumentCache.getEntry(e,b).next((A=>{g=g.insert(b,A)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Fe()))).next((b=>({batchId:p,changes:pb(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((r=>{let o=Mo();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=Mo();return this.indexManager.getCollectionParents(e,u).next((p=>W.forEach(p,(g=>{const y=(function(S,A){return new wl(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((b=>{b.forEach(((S,A)=>{f=f.insert(S,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((f=>{u.forEach(((g,y)=>{const b=y.getKey();f.get(b)===null&&(f=f.insert(b,ln.newInvalidDocument(b)))}));let p=Mo();return f.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Bo(b.mutation,y,Cn.empty(),mt.now()),jh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return W.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Li(o.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:LR(o.bundledQuery),readTime:Li(o.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.overlays=new yt(Ee.comparator),this.Lr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Jr();return W.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.bt(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const o=Jr(),u=n.length+1,f=new Ee(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return W.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new yt(((y,b)=>y-b));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let b=u.get(y.largestBatchId);b===null&&(b=Jr(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Jr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=o)););return W.resolve(p)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new dR(n,r));let u=this.Lr.get(n);u===void 0&&(u=Fe(),this.Lr.set(n,u)),this.Lr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.kr=new zt(Gt.Kr),this.qr=new zt(Gt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Gt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Gt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ee(new ht([])),r=new Gt(n,e),o=new Gt(n,e+1),u=[];return this.qr.forEachInRange([r,o],(f=>{this.Wr(f),u.push(f.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ee(new ht([])),r=new Gt(n,e),o=new Gt(n,e+1);let u=Fe();return this.qr.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Gt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ee.comparator(e.key,n.key)||He(e.Hr,n.Hr)}static Ur(e,n){return He(e.Hr,n.Hr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new zt(Gt.Kr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new fR(u,n,r,o);this.mutationQueue.push(f);for(const p of o)this.Jr=this.Jr.add(new Gt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Zm:this.Yn-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gt(n,0),o=new Gt(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,o],(f=>{const p=this.Zr(f.Hr);u.push(p)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zt(He);return n.forEach((o=>{const u=new Gt(o,0),f=new Gt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,f],(p=>{r=r.add(p.Hr)}))})),W.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;Ee.isDocumentKey(u)||(u=u.child(""));const f=new Gt(new Ee(u),0);let p=new zt(He);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)}),f),W.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){et(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return W.forEach(n.mutations,(o=>{const u=new Gt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Gt(n,0),o=this.Jr.firstAfterOrEqual(r);return W.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.ti=e,this.docs=(function(){return new yt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let r=ps();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ln.newInvalidDocument(o))})),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=ps();const f=n.path,p=new Ee(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||S2(x2(b),r)<=0||(o.has(b.key)||jh(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Ae(9500)}ni(e,n){return W.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new WR(this)}getSize(e){return W.resolve(this.size)}}class WR extends GR{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),W.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.persistence=e,this.ri=new ca((n=>tp(n)),np),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new op,this.targetCount=0,this.oi=pl._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),W.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new pl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.lr(n),W.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.ri.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ri.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),W.waitFor(u).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n){this._i={},this.overlays={},this.ai=new Dh(0),this.ui=!1,this.ui=!0,this.ci=new $R,this.referenceDelegate=e(this),this.li=new eI(this),this.indexManager=new UR,this.remoteDocumentCache=(function(o){return new ZR(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new jR(n),this.Pi=new YR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new JR(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const o=new tI(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return W.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class tI extends R2{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ri=new op,this.Ai=null}static Vi(e){return new up(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.di,(r=>{const o=Ee.fromPath(r);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Ie.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Eh{constructor(e,n){this.persistence=e,this.fi=new ca((r=>C2(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=FR(this,n)}static Vi(e,n){return new Eh(e,n)}Ti(){}Ii(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return W.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((u=>u?W.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(f=>this.wr(e,f,n).next((p=>{p||(r++,u.removeEntry(f,Ie.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=th(e.data.value)),n}wr(e,n,r){return W.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return W.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=Fe(),o=Fe();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new cp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Cw()?8:I2(on())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.gs(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ps(e,n,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new nI;return this.ys(e,n,f).next((p=>{if(u.result=p,this.As)return this.ws(e,n,f,p.size)}))})).next((()=>u.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(Wa()<=qe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",el(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Wa()<=qe.DEBUG&&he("QueryEngine","Query:",el(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(Wa()<=qe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",el(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(n))):W.resolve())}gs(e,n){if(a0(n))return W.resolve(null);let r=ji(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=_h(n,null,"F"),r=ji(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=Fe(...u);return this.fs.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,f,g.readTime)?this.gs(e,_h(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,r,o){return a0(n)||o.isEqual(Ie.min())?W.resolve(null):this.fs.getDocuments(e,r).next((u=>{const f=this.bs(n,u);return this.Ss(n,f,r,o)?W.resolve(null):(Wa()<=qe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),el(n)),this.Ds(e,f,n,w2(o,Ko)).next((p=>p)))}))}bs(e,n){let r=new zt(db(e));return n.forEach(((o,u)=>{jh(e,u)&&(r=r.add(u))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,r){return Wa()<=qe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",el(n)),this.fs.getDocumentsMatchingQuery(e,n,cr.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="LocalStore",sI=3e8;class rI{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new yt(He),this.Fs=new ca((u=>tp(u)),np),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function aI(s,e,n,r){return new rI(s,e,n,r)}async function Pb(s,e){const n=De(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],p=[];let g=Fe();for(const y of o){f.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ns:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function lI(s,e){const n=De(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const S=y.batch,A=S.keys();let j=W.resolve();return A.forEach((q=>{j=j.next((()=>b.getEntry(g,q))).next((J=>{const Z=y.docVersions.get(q);et(Z!==null,48541),J.version.compareTo(Z)<0&&(S.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),b.addEntry(J)))}))})),j.next((()=>p.mutationQueue.removeMutationBatch(g,S)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=Fe();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function zb(s){const e=De(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function oI(s,e){const n=De(s),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((b,S)=>{const A=o.get(S);if(!A)return;p.push(n.li.removeMatchingKeys(u,b.removedDocuments,S).next((()=>n.li.addMatchingKeys(u,b.addedDocuments,S))));let j=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?j=j.withResumeToken(tn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):b.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(b.resumeToken,r)),o=o.insert(S,j),(function(J,Z,oe){return J.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=sI?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(A,j,b)&&p.push(n.li.updateTargetData(u,j))}));let g=ps(),y=Fe();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(uI(u,f,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!r.isEqual(Ie.min())){const b=n.li.getLastRemoteSnapshotVersion(u).next((S=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(b)}return W.waitFor(p).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=o,u)))}function uI(s,e,n){let r=Fe(),o=Fe();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let f=ps();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):he(hp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:f,Ls:o}}))}function cI(s,e){const n=De(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Zm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hI(s,e){const n=De(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((u=>u?(o=u,W.resolve(o)):n.li.allocateTargetId(r).next((f=>(o=new sr(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Om(s,e,n){const r=De(s),o=r.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Tl(f))throw f;he(hp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function v0(s,e,n){const r=De(s);let o=Ie.min(),u=Fe();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,b){const S=De(g),A=S.Fs.get(b);return A!==void 0?W.resolve(S.vs.get(A)):S.li.getTargetData(y,b)})(r,f,ji(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(f,p.targetId).next((g=>{u=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(f,e,n?o:Ie.min(),n?u:Fe()))).next((p=>(fI(r,Z2(e),p),{documents:p,ks:u})))))}function fI(s,e,n){let r=s.Ms.get(e)||Ie.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Ms.set(e,r)}class E0{constructor(){this.activeTargetIds=sR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dI{constructor(){this.vo=new E0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new E0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="ConnectivityMonitor";class T0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(b0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(b0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Mm(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="RestConnection",pI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class gI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===ph?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,u){const f=Mm(),p=this.Qo(e,n.toUriEncodedString());he(om,`Sending RPC '${e}' ${f}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:y}=new URL(p),b=yl(y);return this.zo(e,p,g,r,b).then((S=>(he(om,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw hl(om,`RPC '${e}' ${f} failed with error: `,S,"url: ",p,"request:",r),S}))}jo(e,n,r,o,u,f){return this.Wo(e,n,r,o,u)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+El})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const r=pI[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection",No=(s,e,n)=>{s.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class ll extends gI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ll.c_){const e=HE();No(e,qE.STAT_EVENT,(n=>{n.stat===bm.PROXY?he(rn,"STAT_EVENT: detected buffering proxy"):n.stat===bm.NOPROXY&&he(rn,"STAT_EVENT: detected no buffering proxy")})),ll.c_=!0}}zo(e,n,r,o,u){const f=Mm();return new Promise(((p,g)=>{const y=new zE;y.setWithCredentials(!0),y.listenOnce(BE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case eh.NO_ERROR:const S=y.getResponseJson();he(rn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),p(S);break;case eh.TIMEOUT:he(rn,`RPC '${e}' ${f} timed out`),g(new ue(X.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const A=y.getStatus();if(he(rn,`RPC '${e}' ${f} failed with status:`,A,"response text:",y.getResponseText()),A>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const q=j==null?void 0:j.error;if(q&&q.status&&q.message){const J=(function(oe){const te=oe.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(te)>=0?te:X.UNKNOWN})(q.status);g(new ue(J,q.message))}else g(new ue(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ue(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(rn,`RPC '${e}' ${f} completed.`)}}));const b=JSON.stringify(o);he(rn,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",b,r,15)}))}T_(e,n,r){const o=Mm(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const y=u.join("");he(rn,`Creating RPC '${e}' stream ${o}: ${y}`,p);const b=f.createWebChannel(y,p);this.I_(b);let S=!1,A=!1;const j=new yI({Ho:q=>{A?he(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(S||(he(rn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),S=!0),he(rn,`RPC '${e}' stream ${o} sending:`,q),b.send(q))},Jo:()=>b.close()});return No(b,Oo.EventType.OPEN,(()=>{A||(he(rn,`RPC '${e}' stream ${o} transport opened.`),j.i_())})),No(b,Oo.EventType.CLOSE,(()=>{A||(A=!0,he(rn,`RPC '${e}' stream ${o} transport closed`),j.o_(),this.E_(b))})),No(b,Oo.EventType.ERROR,(q=>{A||(A=!0,hl(rn,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),j.o_(new ue(X.UNAVAILABLE,"The operation could not be completed")))})),No(b,Oo.EventType.MESSAGE,(q=>{var J;if(!A){const Z=q.data[0];et(!!Z,16349);const oe=Z,te=(oe==null?void 0:oe.error)||((J=oe[0])==null?void 0:J.error);if(te){he(rn,`RPC '${e}' stream ${o} received error:`,te);const ae=te.status;let ye=(function(I){const x=jt[I];if(x!==void 0)return Ab(x)})(ae),ne=te.message;ye===void 0&&(ye=X.INTERNAL,ne="Unknown error status: "+ae+" with message "+te.message),A=!0,j.o_(new ue(ye,ne)),b.close()}else he(rn,`RPC '${e}' stream ${o} received:`,Z),j.__(Z)}})),ll.u_(),setTimeout((()=>{j.s_()}),0),j}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return FE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(s){return new ll(s)}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(s){return new TR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ll.c_=!1;class Bb{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="PersistentStream";class qb{constructor(e,n,r,o,u,f,p,g){this.Ci=e,this.b_=r,this.S_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(ms(n.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ue(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(w0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(he(w0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vI extends qb{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=SR(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ie.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ie.min():f.readTime?Li(f.readTime):Ie.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Dm(this.serializer),n.addTarget=(function(u,f){let p;const g=f.target;if(p=Am(g)?{documents:IR(u,g)}:{query:NR(u,g).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=Nb(u,f.resumeToken);const y=Im(u,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ie.min())>0){p.readTime=vh(u,f.snapshotVersion.toTimestamp());const y=Im(u,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=DR(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Dm(this.serializer),n.removeTarget=e,this.K_(n)}}class EI extends qb{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=RR(e.writeResults,e.commitTime),r=Li(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Dm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>AR(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{}class TI extends bI{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Wo(e,Nm(n,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ue(X.UNKNOWN,u.toString())}))}jo(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.jo(e,Nm(n,r),o,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ue(X.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function wI(s,e,n,r){return new TI(s,e,n,r)}class xI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class SI{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((f=>{r.enqueueAndForget((async()=>{ha(this)&&(he(la,"Restarting streams for network reachability change."),await(async function(g){const y=De(g);y.Ea.add(4),await cu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Bh(y)})(this))}))})),this.Va=new xI(r,o)}}async function Bh(s){if(ha(s))for(const e of s.Ra)await e(!0)}async function cu(s){for(const e of s.Ra)await e(!1)}function Hb(s,e){const n=De(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pp(n)?mp(n):xl(n).O_()&&dp(n,e))}function fp(s,e){const n=De(s),r=xl(n);n.Ia.delete(e),r.O_()&&Fb(n,e),n.Ia.size===0&&(r.O_()?r.L_():ha(n)&&n.Va.set("Unknown"))}function dp(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xl(s).Z_(e)}function Fb(s,e){s.da.$e(e),xl(s).X_(e)}function mp(s){s.da=new _R({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),xl(s).start(),s.Va.ua()}function pp(s){return ha(s)&&!xl(s).x_()&&s.Ia.size>0}function ha(s){return De(s).Ea.size===0}function Gb(s){s.da=void 0}async function AI(s){s.Va.set("Online")}async function RI(s){s.Ia.forEach(((e,n)=>{dp(s,e)}))}async function II(s,e){Gb(s),pp(s)?(s.Va.ha(e),mp(s)):s.Va.set("Unknown")}async function NI(s,e,n){if(s.Va.set("Online"),e instanceof Ib&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(r){he(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(s,r)}else if(e instanceof sh?s.da.Xe(e):e instanceof Rb?s.da.st(e):s.da.tt(e),!n.isEqual(Ie.min()))try{const r=await zb(s.localStore);n.compareTo(r)>=0&&await(function(u,f){const p=u.da.Tt(f);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,f))}})),p.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(tn.EMPTY_BYTE_STRING,b.snapshotVersion)),Fb(u,g);const S=new sr(b.target,g,y,b.sequenceNumber);dp(u,S)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){he(la,"Failed to raise snapshot:",r),await bh(s,r)}}async function bh(s,e,n){if(!Tl(e))throw e;s.Ea.add(1),await cu(s),s.Va.set("Offline"),n||(n=()=>zb(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{he(la,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Bh(s)}))}function Kb(s,e){return e().catch((n=>bh(s,n,e)))}async function qh(s){const e=De(s),n=mr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zm;for(;CI(e);)try{const o=await cI(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,DI(e,o)}catch(o){await bh(e,o)}Qb(e)&&Yb(e)}function CI(s){return ha(s)&&s.Ta.length<10}function DI(s,e){s.Ta.push(e);const n=mr(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function Qb(s){return ha(s)&&!mr(s).x_()&&s.Ta.length>0}function Yb(s){mr(s).start()}async function OI(s){mr(s).ra()}async function MI(s){const e=mr(s);for(const n of s.Ta)e.ea(n.mutations)}async function VI(s,e,n){const r=s.Ta.shift(),o=rp.from(r,e,n);await Kb(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await qh(s)}async function kI(s,e){e&&mr(s).Y_&&await(async function(r,o){if((function(f){return pR(f)&&f!==X.ABORTED})(o.code)){const u=r.Ta.shift();mr(r).B_(),await Kb(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await qh(r)}})(s,e),Qb(s)&&Yb(s)}async function x0(s,e){const n=De(s);n.asyncQueue.verifyOperationInProgress(),he(la,"RemoteStore received new credentials");const r=ha(n);n.Ea.add(3),await cu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function jI(s,e){const n=De(s);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await cu(n),n.Va.set("Unknown"))}function xl(s){return s.ma||(s.ma=(function(n,r,o){const u=De(n);return u.sa(),new vI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:AI.bind(null,s),Yo:RI.bind(null,s),t_:II.bind(null,s),J_:NI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),pp(s)?mp(s):s.Va.set("Unknown")):(await s.ma.stop(),Gb(s))}))),s.ma}function mr(s){return s.fa||(s.fa=(function(n,r,o){const u=De(n);return u.sa(),new EI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:OI.bind(null,s),t_:kI.bind(null,s),ta:MI.bind(null,s),na:VI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await qh(s)):(await s.fa.stop(),s.Ta.length>0&&(he(la,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,p=new gp(e,n,f,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(s,e){if(ms("AsyncQueue",`${e}: ${s}`),Tl(s))return new ue(X.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{static emptySet(e){return new ol(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ee.comparator(n.key,r.key):(n,r)=>Ee.comparator(n.key,r.key),this.keyedMap=Mo(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.ga=new yt(Ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class gl{constructor(e,n,r,o,u,f,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new gl(e,n,ol.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class UI{constructor(){this.queries=A0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=De(n),u=o.queries;o.queries=A0(),u.forEach(((f,p)=>{for(const g of p.ba)g.onError(r)}))})(this,new ue(X.ABORTED,"Firestore shutting down"))}}function A0(){return new ca((s=>fb(s)),kh)}async function _p(s,e){const n=De(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(r=2):(u=new LI,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=yp(f,`Initialization of query '${el(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Ep(n)}async function vp(s,e){const n=De(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.ba.indexOf(e);f>=0&&(u.ba.splice(f,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function PI(s,e){const n=De(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const p of f.ba)p.Fa(o)&&(r=!0);f.wa=o}}r&&Ep(n)}function zI(s,e,n){const r=De(s),o=r.queries.get(e);if(o)for(const u of o.ba)u.onError(n);r.queries.delete(e)}function Ep(s){s.Ca.forEach((e=>{e.next()}))}var Vm,R0;(R0=Vm||(Vm={})).Ma="default",R0.Cache="cache";class bp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.key=e}}class $b{constructor(e){this.key=e}}class BI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Fe(),this.mutatedKeys=Fe(),this.eu=db(e),this.tu=new ol(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new S0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,S)=>{const A=o.get(b),j=jh(this.query,S)?S:null,q=!!A&&this.mutatedKeys.has(A.key),J=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Z=!1;A&&j?A.data.isEqual(j.data)?q!==J&&(r.track({type:3,doc:j}),Z=!0):this.su(A,j)||(r.track({type:2,doc:j}),Z=!0,(g&&this.eu(j,g)>0||y&&this.eu(j,y)<0)&&(p=!0)):!A&&j?(r.track({type:0,doc:j}),Z=!0):A&&!j&&(r.track({type:1,doc:A}),Z=!0,(g||y)&&(p=!0)),Z&&(j?(f=f.add(j),u=J?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:f,iu:r,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((b,S)=>(function(j,q){const J=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:Z})}};return J(j)-J(q)})(b.type,S.type)||this.eu(b.doc,S.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,f.length!==0||y?{snapshot:new gl(this.query,e.tu,u,f,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new S0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new $b(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new Xb(r))})),n}cu(e){this.Za=e.ks,this.Ya=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Tp="SyncEngine";class qI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HI{constructor(e){this.key=e,this.hu=!1}}class FI{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ca((p=>fb(p)),kh),this.Iu=new Map,this.Eu=new Set,this.Ru=new yt(Ee.comparator),this.Au=new Map,this.Vu=new op,this.du={},this.mu=new Map,this.fu=pl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GI(s,e,n=!0){const r=nT(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Jb(r,e,n,!0),o}async function KI(s,e){const n=nT(s);await Jb(n,e,!0,!1)}async function Jb(s,e,n,r){const o=await hI(s.localStore,ji(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await QI(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&Hb(s.remoteStore,o),p}async function QI(s,e,n,r,o){s.pu=(S,A,j)=>(async function(J,Z,oe,te){let ae=Z.view.ru(oe);ae.Ss&&(ae=await v0(J.localStore,Z.query,!1).then((({documents:I})=>Z.view.ru(I,ae))));const ye=te&&te.targetChanges.get(Z.targetId),ne=te&&te.targetMismatches.get(Z.targetId)!=null,fe=Z.view.applyChanges(ae,J.isPrimaryClient,ye,ne);return N0(J,Z.targetId,fe.au),fe.snapshot})(s,S,A,j);const u=await v0(s.localStore,e,!0),f=new BI(e,u.ks),p=f.ru(u.documents),g=uu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=f.applyChanges(p,s.isPrimaryClient,g);N0(s,n,y.au);const b=new qI(e,n,f);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function YI(s,e,n){const r=De(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!kh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Om(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&fp(r.remoteStore,o.targetId),km(r,o.targetId)})).catch(bl)):(km(r,o.targetId),await Om(r.localStore,o.targetId,!0))}async function XI(s,e){const n=De(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fp(n.remoteStore,r.targetId))}async function $I(s,e,n){const r=iN(s);try{const o=await(function(f,p){const g=De(f),y=mt.now(),b=p.reduce(((j,q)=>j.add(q.key)),Fe());let S,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let q=ps(),J=Fe();return g.xs.getEntries(j,b).next((Z=>{q=Z,q.forEach(((oe,te)=>{te.isValidDocument()||(J=J.add(oe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(j,q))).next((Z=>{S=Z;const oe=[];for(const te of p){const ae=cR(te,S.get(te.key).overlayedDocument);ae!=null&&oe.push(new vr(te.key,ae,sb(ae.value.mapValue),Qn.exists(!0)))}return g.mutationQueue.addMutationBatch(j,y,oe,p)})).next((Z=>{A=Z;const oe=Z.applyToLocalDocumentSet(S,J);return g.documentOverlayCache.saveOverlays(j,Z.batchId,oe)}))})).then((()=>({batchId:A.batchId,changes:pb(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,p,g){let y=f.du[f.currentUser.toKey()];y||(y=new yt(He)),y=y.insert(p,g),f.du[f.currentUser.toKey()]=y})(r,o.batchId,n),await hu(r,o.changes),await qh(r.remoteStore)}catch(o){const u=yp(o,"Failed to persist write");n.reject(u)}}async function Zb(s,e){const n=De(s);try{const r=await oI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?et(f.hu,14607):o.removedDocuments.size>0&&(et(f.hu,42227),f.hu=!1))})),await hu(n,r,e)}catch(r){await bl(r)}}function I0(s,e,n){const r=De(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const g=De(f);g.onlineState=p;let y=!1;g.queries.forEach(((b,S)=>{for(const A of S.ba)A.va(p)&&(y=!0)})),y&&Ep(g)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JI(s,e,n){const r=De(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new yt(Ee.comparator);f=f.insert(u,ln.newNoDocument(u,Ie.min()));const p=Fe().add(u),g=new Ph(Ie.min(),new Map,new yt(He),f,p);await Zb(r,g),r.Ru=r.Ru.remove(u),r.Au.delete(e),wp(r)}else await Om(r.localStore,e,!1).then((()=>km(r,e,n))).catch(bl)}async function ZI(s,e){const n=De(s),r=e.batch.batchId;try{const o=await lI(n.localStore,e);eT(n,r,null),Wb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hu(n,o)}catch(o){await bl(o)}}async function WI(s,e,n){const r=De(s);try{const o=await(function(f,p){const g=De(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((S=>(et(S!==null,37113),b=S.keys(),g.mutationQueue.removeMutationBatch(y,S)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);eT(r,e,n),Wb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hu(r,o)}catch(o){await bl(o)}}function Wb(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function eT(s,e,n){const r=De(s);let o=r.du[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function km(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||tT(s,r)}))}function tT(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(fp(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),wp(s))}function N0(s,e,n){for(const r of n)r instanceof Xb?(s.Vu.addReference(r.key,e),eN(s,r)):r instanceof $b?(he(Tp,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||tT(s,r.key)):Ae(19791,{wu:r})}function eN(s,e){const n=e.key,r=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(r)||(he(Tp,"New document in limbo: "+n),s.Eu.add(r),wp(s))}function wp(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ee(ht.fromString(e)),r=s.fu.next();s.Au.set(r,new HI(n)),s.Ru=s.Ru.insert(n,r),Hb(s.remoteStore,new sr(ji(Vh(n.path)),r,"TargetPurposeLimboResolution",Dh.ce))}}async function hu(s,e,n){const r=De(s),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{f.push(r.pu(g,e,n).then((y=>{var b;if((y||n)&&r.isPrimaryClient){const S=y?!y.fromCache:(b=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:b.current;r.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(y){o.push(y);const S=cp.Es(g.targetId,y);u.push(S)}})))})),await Promise.all(f),r.Pu.J_(o),await(async function(g,y){const b=De(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>W.forEach(y,(A=>W.forEach(A.Ts,(j=>b.persistence.referenceDelegate.addReference(S,A.targetId,j))).next((()=>W.forEach(A.Is,(j=>b.persistence.referenceDelegate.removeReference(S,A.targetId,j)))))))))}catch(S){if(!Tl(S))throw S;he(hp,"Failed to update sequence numbers: "+S)}for(const S of y){const A=S.targetId;if(!S.fromCache){const j=b.vs.get(A),q=j.snapshotVersion,J=j.withLastLimboFreeSnapshotVersion(q);b.vs=b.vs.insert(A,J)}}})(r.localStore,u))}async function tN(s,e){const n=De(s);if(!n.currentUser.isEqual(e)){he(Tp,"User change. New user:",e.toKey());const r=await Pb(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new ue(X.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hu(n,r.Ns)}}function nN(s,e){const n=De(s),r=n.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let o=Fe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const p=n.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function nT(s){const e=De(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JI.bind(null,e),e.Pu.J_=PI.bind(null,e.eventManager),e.Pu.yu=zI.bind(null,e.eventManager),e}function iN(s){const e=De(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WI.bind(null,e),e}class Th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aI(this.persistence,new iI,e.initialUser,this.serializer)}Cu(e){return new Ub(up.Vi,this.serializer)}Du(e){return new dI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Th.provider={build:()=>new Th};class sN extends Th{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){et(this.persistence.referenceDelegate instanceof Eh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new Ub((r=>Eh.Vi(r,n)),this.serializer)}}class jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tN.bind(null,this.syncEngine),await jI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UI})()}createDatastore(e){const n=zh(e.databaseInfo.databaseId),r=_I(e.databaseInfo);return wI(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,f,p){return new SI(r,o,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>I0(this.syncEngine,n,0)),(function(){return T0.v()?new T0:new mI})())}createSyncEngine(e,n){return(function(o,u,f,p,g,y,b){const S=new FI(o,u,f,p,g,y);return b&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=De(o);he(la,"RemoteStore shutting down."),u.Ea.add(5),await cu(u),u.Aa.shutdown(),u.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}jm.provider={build:()=>new jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="FirestoreClient";class rN{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{he(pr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(he(pr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cm(s,e){s.asyncQueue.verifyOperationInProgress(),he(pr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Pb(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function C0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await aN(s);he(pr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>x0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>x0(e.remoteStore,o))),s._onlineComponents=e}async function aN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){he(pr,"Using user provided OfflineComponentProvider");try{await cm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;hl("Error using user provided cache. Falling back to memory cache: "+n),await cm(s,new Th)}}else he(pr,"Using default OfflineComponentProvider"),await cm(s,new sN(void 0));return s._offlineComponents}async function iT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(he(pr,"Using user provided OnlineComponentProvider"),await C0(s,s._uninitializedComponentsProvider._online)):(he(pr,"Using default OnlineComponentProvider"),await C0(s,new jm))),s._onlineComponents}function lN(s){return iT(s).then((e=>e.syncEngine))}async function wh(s){const e=await iT(s),n=e.eventManager;return n.onListen=GI.bind(null,e.syncEngine),n.onUnlisten=YI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XI.bind(null,e.syncEngine),n}function oN(s,e,n,r){const o=new xp(r),u=new bp(e,o,n);return s.asyncQueue.enqueueAndForget((async()=>_p(await wh(s),u))),()=>{o.Nu(),s.asyncQueue.enqueueAndForget((async()=>vp(await wh(s),u)))}}function uN(s,e,n={}){const r=new hs;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,g,y){const b=new xp({next:A=>{b.Nu(),f.enqueueAndForget((()=>vp(u,S)));const j=A.docs.has(p);!j&&A.fromCache?y.reject(new ue(X.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&A.fromCache&&g&&g.source==="server"?y.reject(new ue(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),S=new bp(Vh(p.path),b,{includeMetadataChanges:!0,Ka:!0});return _p(u,S)})(await wh(s),s.asyncQueue,e,n,r))),r.promise}function cN(s,e,n={}){const r=new hs;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,g,y){const b=new xp({next:A=>{b.Nu(),f.enqueueAndForget((()=>vp(u,S))),A.fromCache&&g.source==="server"?y.reject(new ue(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),S=new bp(p,b,{includeMetadataChanges:!0,Ka:!0});return _p(u,S)})(await wh(s),s.asyncQueue,e,n,r))),r.promise}function hN(s,e){const n=new hs;return s.asyncQueue.enqueueAndForget((async()=>$I(await lN(s),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="ComponentProvider",D0=new Map;function dN(s,e,n,r,o){return new M2(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,sT(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firestore.googleapis.com",O0=!0;class M0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rT,this.ssl=O0}else this.host=e.host,this.ssl=e.ssl??O0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zR)throw new ue(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new f2;switch(r.type){case"firstParty":return new g2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=D0.get(n);r&&(he(fN,"Removing Datastore"),D0.delete(n),r.terminate())})(this),Promise.resolve()}}function mN(s,e,n,r={}){var y;s=En(s,Hh);const o=yl(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(J0(`https://${p}`),Z0("Firestore",!0)),u.host!==rT&&u.host!==p&&hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:r};if(!na(g,f)&&(s._setSettings(g),r.mockUserToken)){let b,S;if(typeof r.mockUserToken=="string")b=r.mockUserToken,S=an.MOCK_USER;else{b=bw(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new ue(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new an(A)}s._authCredentials=new d2(new KE(b,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}toJSON(){return{type:Tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(lu(n,Tt._jsonSchema))return new Tt(e,r||null,new Ee(ht.fromString(n.referencePath)))}}Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:Ut("string",Tt._jsonSchemaVersion),referencePath:Ut("string")};class ur extends _s{constructor(e,n,r){super(e,n,Vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new Ee(e))}withConverter(e){return new ur(this.firestore,e,this._path)}}function ls(s,e,...n){if(s=Bt(s),QE("collection","path",e),s instanceof Hh){const r=ht.fromString(e,...n);return Kv(r),new ur(s,null,r)}{if(!(s instanceof Tt||s instanceof ur))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ht.fromString(e,...n));return Kv(r),new ur(s.firestore,null,r)}}function bt(s,e,...n){if(s=Bt(s),arguments.length===1&&(e=Jm.newId()),QE("doc","path",e),s instanceof Hh){const r=ht.fromString(e,...n);return Gv(r),new Tt(s,null,new Ee(r))}{if(!(s instanceof Tt||s instanceof ur))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ht.fromString(e,...n));return Gv(r),new Tt(s.firestore,s instanceof ur?s.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="AsyncQueue";class k0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bb(this,"async_queue_retry"),this._c=()=>{const r=um();r&&he(V0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Tl(e))throw e;he(V0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",j0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=gp.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:j0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function j0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class gs extends Hh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new k0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new k0(e),this._firestoreClient=void 0,await e}}}function pN(s,e){const n=typeof s=="object"?s:nE(),r=typeof s=="string"?s:ph,o=Bm(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=vw("firestore");u&&mN(o,...u)}return o}function Fh(s){if(s._terminated)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||gN(s),s._firestoreClient}function gN(s){var r,o,u,f;const e=s._freezeSettings(),n=dN(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,(o=s._app)==null?void 0:o.options.apiKey,e);s._componentsProvider||(u=e.localCache)!=null&&u._offlineComponentProvider&&((f=e.localCache)!=null&&f._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new rN(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(tn.fromBase64String(e))}catch(n){throw new ue(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lu(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Ut("string",Kn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(e){if(lu(e,Ui._jsonSchema))return new Ui(e.latitude,e.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Ut("string",Ui._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lu(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new li(e.vectorValues);throw new ue(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Ut("string",li._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=/^__.*__$/;class _N{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ou(e,this.data,n,this.fieldTransforms)}}class aT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:s})}}class Ap{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return xh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(lT(this.dataSource)&&yN.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class vN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zh(e)}createContext(e,n,r,o=!1){return new Ap({dataSource:e,methodName:n,targetDoc:r,path:en.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gh(s){const e=s._freezeSettings(),n=zh(s._databaseId);return new vN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function oT(s,e,n,r,o,u={}){const f=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);Np("Data must be an object, but it was:",f,r);const p=uT(r,f);let g,y;if(u.merge)g=new Cn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const S of u.mergeFields){const A=oa(e,S,n);if(!f.contains(A))throw new ue(X.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);fT(b,A)||b.push(A)}g=new Cn(b),y=f.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,y=f.fieldTransforms;return new _N(new vn(p),g,y)}class Kh extends fu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}class Rp extends fu{_toFieldTransform(e){return new wb(e.path,new Jo)}isEqual(e){return e instanceof Rp}}class Ip extends fu{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new eu(e.serializer,_b(e.serializer,this.Vc));return new wb(e.path,n)}isEqual(e){return e instanceof Ip&&this.Vc===e.Vc}}function EN(s,e,n,r){const o=s.createContext(1,e,n);Np("Data must be an object, but it was:",o,r);const u=[],f=vn.empty();_r(r,((g,y)=>{const b=hT(e,g,n);y=Bt(y);const S=o.childContextForFieldPath(b);if(y instanceof Kh)u.push(b);else{const A=du(y,S);A!=null&&(u.push(b),f.set(b,A))}}));const p=new Cn(u);return new aT(f,p,o.fieldTransforms)}function bN(s,e,n,r,o,u){const f=s.createContext(1,e,n),p=[oa(e,r,n)],g=[o];if(u.length%2!=0)throw new ue(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)p.push(oa(e,u[A])),g.push(u[A+1]);const y=[],b=vn.empty();for(let A=p.length-1;A>=0;--A)if(!fT(y,p[A])){const j=p[A];let q=g[A];q=Bt(q);const J=f.childContextForFieldPath(j);if(q instanceof Kh)y.push(j);else{const Z=du(q,J);Z!=null&&(y.push(j),b.set(j,Z))}}const S=new Cn(y);return new aT(b,S,f.fieldTransforms)}function TN(s,e,n,r=!1){return du(n,s.createContext(r?4:3,e))}function du(s,e){if(cT(s=Bt(s)))return Np("Unsupported field value:",e,s),uT(s,e);if(s instanceof fu)return(function(r,o){if(!lT(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const p of r){let g=du(p,o.childContextForArray(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _b(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=mt.fromDate(r);return{timestampValue:vh(o.serializer,u)}}if(r instanceof mt){const u=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vh(o.serializer,u)}}if(r instanceof Ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:Nb(o.serializer,r._byteString)};if(r instanceof Tt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:lp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof li)return(function(f,p){const g=f instanceof li?f.toArray():f;return{mapValue:{fields:{[nb]:{stringValue:ib},[gh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return ip(p.serializer,b)}))}}}}}})(r,o);if(jb(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Ch(r)}`)})(s,e)}function uT(s,e){const n={};return $E(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_r(s,((r,o)=>{const u=du(o,e.childContextForField(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function cT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof mt||s instanceof Ui||s instanceof Kn||s instanceof Tt||s instanceof fu||s instanceof li||jb(s))}function Np(s,e,n){if(!cT(n)||!YE(n)){const r=Ch(n);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function oa(s,e,n){if((e=Bt(e))instanceof Sp)return e._internalPath;if(typeof e=="string")return hT(s,e);throw xh("Field path arguments must be of type string or ",s,!1,void 0,n)}const wN=new RegExp("[~\\*/\\[\\]]");function hT(s,e,n){if(e.search(wN)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Sp(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function xh(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${r}`),f&&(g+=` in document ${o}`),g+=")"),new ue(X.INVALID_ARGUMENT,p+s+g)}function fT(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{convertValue(e,n="none"){switch(dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _r(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){var r,o,u;const n=(u=(o=(r=e.fields)==null?void 0:r[gh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>Rt(f.doubleValue)));return new li(n)}convertGeoPoint(e){return new Ui(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qo(e));default:return null}}convertTimestamp(e){const n=hr(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);et(kb(r),9688,{name:e});const o=new Yo(r.get(1),r.get(3)),u=new Ee(r.popFirst(5));return o.isEqual(n)||ms(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends xN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function SN(){return new Rp("serverTimestamp")}function AN(s){return new Ip("increment",s)}const L0="@firebase/firestore",U0="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(oa("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RN extends dT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ue(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class Op extends Dp{}function ul(s,e,...n){let r=[];e instanceof Dp&&r.push(e),r=r.concat(n),(function(u){const f=u.filter((g=>g instanceof Mp)).length,p=u.filter((g=>g instanceof Qh)).length;if(f>1||f>0&&p>0)throw new ue(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Qh extends Op{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qh(e,n,r)}_apply(e){const n=this._parse(e);return pT(e._query,n),new _s(e.firestore,e.converter,Rm(e._query,n))}_parse(e){const n=Gh(e.firestore);return(function(u,f,p,g,y,b,S){let A;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ue(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){B0(S,b);const q=[];for(const J of S)q.push(z0(g,u,J));A={arrayValue:{values:q}}}else A=z0(g,u,S)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||B0(S,b),A=TN(p,f,S,b==="in"||b==="not-in");return Lt.create(y,b,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zr(s,e,n){const r=e,o=oa("where",s);return Qh._create(o,r,n)}class Mp extends Dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const p=u.getFlattenedFilters();for(const g of p)pT(f,g),f=Rm(f,g)})(e._query,n),new _s(e.firestore,e.converter,Rm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vp extends Op{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vp(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new ue(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $o(u,f)})(e._query,this._field,this._direction);return new _s(e.firestore,e.converter,J2(e._query,n))}}function IN(s,e="asc"){const n=e,r=oa("orderBy",s);return Vp._create(r,n)}class kp extends Op{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kp(e,n,r)}_apply(e){return new _s(e.firestore,e.converter,_h(e._query,this._limit,this._limitType))}}function NN(s){return kp._create("limit",s,"F")}function z0(s,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new ue(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hb(e)&&n.indexOf("/")!==-1)throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ht.fromString(n));if(!Ee.isDocumentKey(r))throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return e0(s,new Ee(r))}if(n instanceof Tt)return e0(s,n._key);throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(n)}.`)}function B0(s,e){if(!Array.isArray(s)||s.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pT(s,e){const n=(function(o,u){for(const f of o)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function gT(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class ko{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends dT{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(oa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wr._jsonSchema={type:Ut("string",Wr._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class rh extends Wr{data(e={}){return super.data(e)}}class ea{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ko(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new rh(this._firestore,this._userDataWriter,r.key,r,new ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const g=new rh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new ko(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new rh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new ko(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),b=f.indexOf(p.doc.key)),{type:CN(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ea._jsonSchemaVersion="firestore/querySnapshot/1.0",ea._jsonSchema={type:Ut("string",ea._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(s){s=En(s,Tt);const e=En(s.firestore,gs),n=Fh(e);return uN(n,s._key).then((r=>vT(e,s,r)))}function Sh(s){s=En(s,_s);const e=En(s.firestore,gs),n=Fh(e),r=new Cp(e);return mT(s._query),cN(n,s._query).then((o=>new ea(e,r,s,o)))}function yT(s,e,n){s=En(s,Tt);const r=En(s.firestore,gs),o=gT(s.converter,e),u=Gh(r);return Yh(r,[oT(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Qn.none())])}function Oi(s,e,n,...r){s=En(s,Tt);const o=En(s.firestore,gs),u=Gh(o);let f;return f=typeof(e=Bt(e))=="string"||e instanceof Sp?bN(u,"updateDoc",s._key,e,n,r):EN(u,"updateDoc",s._key,e),Yh(o,[f.toMutation(s._key,Qn.exists(!0))])}function _T(s){return Yh(En(s.firestore,gs),[new sp(s._key,Qn.none())])}function q0(s,e){const n=En(s.firestore,gs),r=bt(s),o=gT(s.converter,e),u=Gh(s.firestore);return Yh(n,[oT(u,"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Qn.exists(!1))]).then((()=>r))}function Ws(s,...e){var y,b,S;s=Bt(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||P0(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(P0(e[r])){const A=e[r];e[r]=(y=A.next)==null?void 0:y.bind(A),e[r+1]=(b=A.error)==null?void 0:b.bind(A),e[r+2]=(S=A.complete)==null?void 0:S.bind(A)}let u,f,p;if(s instanceof Tt)f=En(s.firestore,gs),p=Vh(s._key.path),u={next:A=>{e[r]&&e[r](vT(f,s,A))},error:e[r+1],complete:e[r+2]};else{const A=En(s,_s);f=En(A.firestore,gs),p=A._query;const j=new Cp(f);u={next:q=>{e[r]&&e[r](new ea(f,j,A,q))},error:e[r+1],complete:e[r+2]},mT(s._query)}const g=Fh(f);return oN(g,p,o,u)}function Yh(s,e){const n=Fh(s);return hN(n,e)}function vT(s,e,n){const r=n.docs.get(e._key),o=new Cp(s);return new Wr(s,o,e._key,r,new ko(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){h2(_l),cl(new ia("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),p=new gs(new m2(r.getProvider("auth-internal")),new y2(f,r.getProvider("app-check-internal")),V2(f,o),f);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),lr(L0,U0,e),lr(L0,U0,"esm2020")})();const DN={apiKey:"AIzaSyBiF6VrrDYcXzs0H4QutVOr1scsp69Q5eM",authDomain:"meganait-messenger.firebaseapp.com",projectId:"meganait-messenger",storageBucket:"meganait-messenger.firebasestorage.app",messagingSenderId:"465724556048",appId:"1:465724556048:web:0243b8afebf84c72ff5b95",measurementId:"G-MKN60HNX9T"},ET=tE(DN),qo=u2(ET),We=pN(ET),ON=({onComplete:s})=>{const[e,n]=ee.useState("welcome"),[r,o]=ee.useState(!1),[u,f]=ee.useState(null),[p,g]=ee.useState(""),[y,b]=ee.useState(""),[S,A]=ee.useState(""),[j,q]=ee.useState(""),[J,Z]=ee.useState(""),[oe,te]=ee.useState(""),ae=x=>{console.error("Auth Error:",x),x.code==="auth/configuration-not-found"?f("   Email/  ."):x.code==="auth/user-not-found"||x.code==="auth/wrong-password"||x.code==="auth/invalid-credential"?f("   "):x.code==="auth/email-already-in-use"?f(" email  "):f("   "),o(!1)},ye=async x=>{if(x.preventDefault(),f(null),!p||!y)return f("  ");o(!0);try{await YS(qo,p,y)}catch(R){ae(R)}},ne=async()=>{f(null);try{if(e==="register_creds"){if(!p||!y||!S)return f("  ");if(y!==S)return f("  ");if(y.length<6)return f("  ");n("register_username")}else if(e==="register_username"){if(!j)return f(" ");const x=`@${j.toLowerCase().replace(/[^a-z0-9_]/g,"")}`;o(!0);const R=ul(ls(We,"users"),Zr("username_handle","==",x)),C=await Sh(R);if(o(!1),!C.empty)return f("  ");n("register_profile")}}catch(x){ae(x)}},fe=async x=>{if(x.preventDefault(),!J.trim())return f(" ");o(!0);try{const C=(await QS(qo,p,y)).user,D=`@${j.toLowerCase().replace(/[^a-z0-9_]/g,"")}`,V={username:J,surname:oe,username_handle:D,email:p,bio:" MeganNait ",avatarUrl:`https://ui-avatars.com/api/?name=${encodeURIComponent(J)}+${encodeURIComponent(oe)}&background=3390ec&color=fff`,online:!0,lastSeen:Date.now(),verified:!1};await yT(bt(We,"users",C.uid),V)}catch(R){ae(R)}},I=()=>v.jsx("button",{type:"button",onClick:()=>{e==="choice"?n("welcome"):e==="login"||e==="register_creds"?n("choice"):e==="register_username"?n("register_creds"):e==="register_profile"&&n("register_username"),f(null)},className:"absolute left-6 top-8 text-gray-300 hover:text-blue-500 transition-colors",children:v.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})});return v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-box relative animate-slide-up",children:[e!=="welcome"&&v.jsx(I,{}),e==="welcome"&&v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"auth-logo-circle",children:v.jsx("i",{className:"fa-solid fa-bolt-lightning"})}),v.jsx("h1",{className:"text-4xl font-black mb-1",children:"MeganNait"}),v.jsxs("div",{className:"mb-8",children:[v.jsx("p",{className:"text-blue-500 font-black text-[10px] uppercase tracking-[0.4em]",children:"THE COMMUNICATION"}),v.jsx("p",{className:"text-gray-400 text-sm mt-2 leading-relaxed max-w-[240px] mx-auto font-medium",children:"    .  .  .  ."})]}),v.jsx("button",{onClick:()=>n("choice"),className:"w-full bg-[#3390ec] text-white py-4 rounded-2xl font-bold uppercase tracking-widest text-sm shadow-xl hover:brightness-110 active:scale-95 transition-all",children:""})]}),e==="choice"&&v.jsxs("div",{className:"text-center py-4",children:[v.jsx("h2",{className:"text-2xl font-black mb-10 mt-6",children:"    ?"}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("button",{onClick:()=>n("login"),className:"w-full bg-[#3390ec] text-white py-4 rounded-2xl font-bold uppercase tracking-widest text-sm shadow-lg active:scale-95 transition-all",children:", "}),v.jsx("button",{onClick:()=>n("register_creds"),className:"w-full bg-[#f1f1f1] text-gray-700 py-4 rounded-2xl font-bold uppercase tracking-widest text-sm shadow-sm active:scale-95 transition-all",children:", "})]})]}),e==="login"&&v.jsxs("form",{onSubmit:ye,className:"space-y-5",children:[v.jsx("h2",{className:"text-2xl font-black text-center mb-10 mt-6",children:""}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("input",{type:"email",placeholder:" ",className:"w-full p-4 bg-[#f1f1f1] rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-medium placeholder:text-gray-400",value:p,onChange:x=>g(x.target.value)}),v.jsx("input",{type:"password",placeholder:"",className:"w-full p-4 bg-[#f1f1f1] rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-medium placeholder:text-gray-400",value:y,onChange:x=>b(x.target.value)})]}),u&&v.jsx("div",{className:"text-red-500 text-xs text-center font-bold animate-fade-in",children:u}),v.jsx("button",{type:"submit",disabled:r,className:"w-full bg-[#3390ec] text-white py-4 rounded-2xl font-bold uppercase tracking-widest text-sm shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2",children:r?v.jsx("i",{className:"fas fa-spinner fa-spin"}):""})]}),e==="register_creds"&&v.jsxs("div",{className:"space-y-5",children:[v.jsx("h2",{className:"text-2xl font-black text-center mb-10 mt-6",children:""}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("input",{type:"email",placeholder:" ",className:"w-full p-4 bg-[#f1f1f1] rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-medium placeholder:text-gray-400",value:p,onChange:x=>g(x.target.value)}),v.jsx("input",{type:"password",placeholder:"",className:"w-full p-4 bg-[#f1f1f1] rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-medium placeholder:text-gray-400",value:y,onChange:x=>b(x.target.value)}),v.jsx("input",{type:"password",placeholder:" ",className:"w-full p-4 bg-[#f1f1f1] rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-medium placeholder:text-gray-400",value:S,onChange:x=>A(x.target.value)})]}),u&&v.jsx("div",{className:"text-red-500 text-xs text-center font-bold animate-fade-in",children:u}),v.jsx("button",{onClick:ne,className:"w-full bg-[#3390ec] text-white py-4 rounded-2xl font-bold uppercase tracking-widest text-sm shadow-lg active:scale-95 transition-all",children:""})]}),e==="register_username"&&v.jsxs("div",{className:"space-y-5",children:[v.jsx("h2",{className:"text-2xl font-black text-center mb-2 mt-6",children:""}),v.jsx("p",{className:"text-xs text-center text-gray-400 mb-8 px-4 font-medium",children:"       MeganNait"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-blue-500 font-black text-lg",children:"@"}),v.jsx("input",{type:"text",placeholder:"username",className:"w-full p-4 pl-12 bg-[#f1f1f1] rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-black text-lg",value:j,onChange:x=>q(x.target.value)})]}),u&&v.jsx("div",{className:"text-red-500 text-xs text-center font-bold animate-fade-in",children:u}),v.jsx("button",{onClick:ne,className:"w-full bg-[#3390ec] text-white py-4 rounded-2xl font-bold uppercase tracking-widest text-sm shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2",children:r?v.jsx("i",{className:"fas fa-spinner fa-spin"}):""})]}),e==="register_profile"&&v.jsxs("form",{onSubmit:fe,className:"space-y-5",children:[v.jsx("h2",{className:"text-2xl font-black text-center mb-10 mt-6",children:""}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("input",{type:"text",placeholder:"",className:"w-full p-4 bg-[#f1f1f1] rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-medium placeholder:text-gray-400",value:J,onChange:x=>Z(x.target.value)}),v.jsx("input",{type:"text",placeholder:" ()",className:"w-full p-4 bg-[#f1f1f1] rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-medium placeholder:text-gray-400",value:oe,onChange:x=>te(x.target.value)})]}),u&&v.jsx("div",{className:"text-red-500 text-xs text-center font-bold animate-fade-in",children:u}),v.jsx("button",{type:"submit",disabled:r,className:"w-full bg-[#3390ec] text-white py-4 rounded-2xl font-bold uppercase tracking-widest text-sm shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2",children:r?v.jsx("i",{className:"fas fa-spinner fa-spin"}):""})]})]})})};var bT=(s=>(s.ALL="all",s.PRIVATE="private",s.GROUPS="groups",s.BOTS="bots",s))(bT||{});const MN=({chat:s,isActive:e,currentUserId:n,onClick:r})=>{var g;const[o,u]=ee.useState(null),f=s.type==="saved",p=s.unreadCount||0;return ee.useEffect(()=>{var b;if(f)return;const y=(b=s.participantsUids)==null?void 0:b.find(S=>S!==n);if(y){const S=Ws(bt(We,"users",y),A=>{A.exists()&&u({id:A.id,...A.data()})});return()=>S()}},[s.id,n,f]),v.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3.5 p-3 md:p-3.5 transition-all relative group active:scale-[0.98] ${e?"bg-blue-600":"hover:bg-white/[0.03]"}`,children:[v.jsxs("div",{className:"relative flex-shrink-0",children:[f?v.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full bg-blue-500 flex items-center justify-center text-white shadow-lg",children:v.jsx("i",{className:"fa-solid fa-bookmark text-xl md:text-2xl"})}):v.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full bg-slate-700 flex items-center justify-center text-white overflow-hidden shadow-md border border-white/5",children:o!=null&&o.avatarUrl?v.jsx("img",{src:o.avatarUrl,className:"w-full h-full object-cover"}):v.jsx("i",{className:"fa-solid fa-user text-lg md:text-xl"})}),!f&&(o==null?void 0:o.online)&&v.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-3 h-3 md:w-3.5 md:h-3.5 bg-green-500 border-2 border-[#17212b] rounded-full"})]}),v.jsxs("div",{className:"flex-1 text-left truncate",children:[v.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[v.jsxs("span",{className:`font-bold text-[15px] md:text-[16px] truncate flex items-center ${e?"text-white":"text-gray-100"}`,children:[v.jsx("span",{className:"truncate",children:f?"":(o==null?void 0:o.username)||"..."}),!f&&(o==null?void 0:o.verified)&&v.jsx(ta,{className:"w-4 h-4 ml-1.5 flex-shrink-0"})]}),s.lastMessage&&v.jsx("span",{className:`text-[10px] flex-shrink-0 ${e?"text-white/60":"text-[#7f91a4]"}`,children:new Date(s.lastMessage.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("p",{className:`text-[12px] md:text-[13px] truncate flex-1 pr-2 ${e?"text-white/80":"text-[#7f91a4]"}`,children:((g=s.lastMessage)==null?void 0:g.text)||(f?"  ":" ")}),p>0&&!e&&v.jsx("div",{className:"bg-blue-500 text-white text-[10px] font-black px-1.5 py-0.5 rounded-full min-w-[20px] text-center shadow-lg animate-fade-in border border-white/10",children:p})]})]}),!e&&v.jsx("div",{className:"absolute bottom-0 left-20 right-0 h-[0.5px] bg-white/[0.04]"})]})},VN=({chats:s,activeChatId:e,onChatSelect:n,activeTab:r,onTabSelect:o,currentUser:u,onLogout:f,onProfileOpen:p,onNewChat:g})=>{const[y,b]=ee.useState(""),[S,A]=ee.useState(!1),[j,q]=ee.useState(!1),[J,Z]=ee.useState([]),[oe,te]=ee.useState([]),[ae,ye]=ee.useState(!1);ee.useEffect(()=>{const I=()=>ye(!0);return window.addEventListener("pwa-installable",I),()=>window.removeEventListener("pwa-installable",I)},[]),ee.useEffect(()=>{if(y.trim().length>1){const I=ul(ls(We,"users"),Zr("username_handle",">=",y.startsWith("@")?y.toLowerCase():"@"+y.toLowerCase()),Zr("username_handle","<=",(y.startsWith("@")?y.toLowerCase():"@"+y.toLowerCase())+""));Sh(I).then(x=>{te(x.docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.id!==u.id))})}else te([])},[y,u.id]);const ne=()=>{Sh(ls(We,"users")).then(I=>{Z(I.docs.map(x=>({id:x.id,...x.data()})).filter(x=>x.id!==u.id))})},fe=async()=>{const I=window.deferredPrompt;if(!I)return;I.prompt();const{outcome:x}=await I.userChoice;x==="accepted"&&(window.deferredPrompt=null,ye(!1))};return v.jsxs("div",{className:"flex flex-col h-full bg-[#17212b] border-r border-[#0e1621] w-full relative overflow-hidden pt-[env(safe-area-inset-top)]",children:[S&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] animate-fade-in",onClick:()=>A(!1)}),j&&v.jsx("div",{className:"fixed inset-0 z-[102] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-[#17212b] w-full max-w-sm rounded-3xl overflow-hidden shadow-2xl animate-slide-up flex flex-col max-h-[70vh] border border-white/5",children:[v.jsxs("div",{className:"p-4 border-b border-[#0e1621] flex items-center justify-between",children:[v.jsx("span",{className:"font-bold text-white",children:" "}),v.jsx("button",{onClick:()=>q(!1),className:"text-[#7f91a4] p-1 hover:text-white transition-all",children:v.jsx("i",{className:"fa-solid fa-xmark"})})]}),v.jsx("div",{className:"p-4 overflow-y-auto no-scrollbar",children:J.map(I=>v.jsxs("button",{onClick:()=>{g(I),q(!1)},className:"w-full flex items-center gap-3 p-3 hover:bg-white/5 rounded-2xl transition-all active:scale-[0.98]",children:[v.jsxs("div",{className:"relative shrink-0",children:[v.jsx("img",{src:I.avatarUrl,className:"w-10 h-10 rounded-full object-cover border border-white/10"}),I.online&&v.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-[#17212b] rounded-full"})]}),v.jsxs("div",{className:"text-left truncate min-w-0 flex-1",children:[v.jsxs("div",{className:"font-bold text-sm text-white flex items-center gap-1 min-w-0",children:[v.jsx("span",{className:"truncate",children:I.username}),I.verified&&v.jsx(ta,{className:"w-3.5 h-3.5 ml-1"})]}),v.jsx("div",{className:"text-[11px] text-blue-400 font-bold truncate",children:I.username_handle})]})]},I.id))})]})}),v.jsxs("div",{className:`fixed inset-y-0 left-0 w-72 bg-[#17212b] z-[101] transform transition-transform duration-300 ease-out flex flex-col border-r border-[#0e1621] pt-[env(safe-area-inset-top)] ${S?"translate-x-0":"-translate-x-full"}`,children:[v.jsxs("div",{className:"p-5 flex flex-col gap-4 border-b border-black/20 shrink-0",children:[v.jsx("img",{src:u.avatarUrl,className:"w-16 h-16 rounded-full object-cover shadow-lg border-2 border-white/5"}),v.jsxs("div",{className:"min-w-0",children:[v.jsxs("div",{className:"font-bold text-lg text-white flex items-center gap-1.5 min-w-0",children:[v.jsxs("span",{className:"truncate",children:[u.username," ",u.surname||""]}),u.verified&&v.jsx(ta,{className:"w-5 h-5 ml-1.5"})]}),v.jsx("div",{className:"text-xs text-blue-400 font-bold mt-1 truncate",children:u.username_handle})]})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto py-2 no-scrollbar",children:[v.jsxs("button",{onClick:()=>{p(),A(!1)},className:"w-full flex items-center gap-6 px-5 py-3.5 hover:bg-white/5 transition-all group text-left active:bg-white/10",children:[v.jsx("i",{className:"fa-solid fa-user text-xl text-[#7f91a4] group-hover:text-white transition-all w-6 text-center"}),v.jsx("span",{className:"text-sm font-medium text-white",children:" "})]}),v.jsxs("button",{onClick:()=>{ne(),q(!0),A(!1)},className:"w-full flex items-center gap-6 px-5 py-3.5 hover:bg-white/5 transition-all group text-left active:bg-white/10",children:[v.jsx("i",{className:"fa-solid fa-address-book text-xl text-[#7f91a4] group-hover:text-white transition-all w-6 text-center"}),v.jsx("span",{className:"text-sm font-medium text-white",children:""})]}),v.jsxs("button",{onClick:()=>{n("saved"),A(!1)},className:"w-full flex items-center gap-6 px-5 py-3.5 hover:bg-white/5 transition-all group text-left active:bg-white/10",children:[v.jsx("i",{className:"fa-solid fa-bookmark text-xl text-[#7f91a4] group-hover:text-white transition-all w-6 text-center"}),v.jsx("span",{className:"text-sm font-medium text-white",children:""})]}),ae&&v.jsxs("button",{onClick:fe,className:"mx-4 my-4 flex items-center gap-4 px-4 py-3 bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 transition-all text-left rounded-xl active:scale-95",children:[v.jsx("i",{className:"fa-solid fa-mobile-screen-button text-lg w-5 text-center"}),v.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wider",children:" "})]}),v.jsxs("button",{onClick:f,className:"w-full flex items-center gap-6 px-5 py-3.5 hover:bg-red-500/10 text-red-400 transition-all mt-4 text-left active:bg-red-500/20",children:[v.jsx("i",{className:"fa-solid fa-right-from-bracket text-xl w-6 text-center"}),v.jsx("span",{className:"text-sm font-medium",children:""})]})]}),v.jsx("div",{className:"p-5 text-[11px] text-[#7f91a4] shrink-0 pb-[max(env(safe-area-inset-bottom),20px)]",children:"MeganNait 1.3.1"})]}),v.jsxs("div",{className:"p-2 md:p-3 flex items-center gap-2 shrink-0",children:[v.jsx("button",{onClick:()=>A(!0),className:"text-[#7f91a4] p-2 hover:text-white transition-all active:scale-90",children:v.jsx("i",{className:"fa-solid fa-bars text-xl"})}),v.jsxs("div",{className:"flex-1 relative",children:[v.jsx("i",{className:"fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-[12px] text-[#7f91a4]"}),v.jsx("input",{type:"text",placeholder:"",value:y,onChange:I=>b(I.target.value),className:"w-full bg-[#0e1621] rounded-full py-2 pl-10 pr-4 text-sm outline-none text-white placeholder-[#7f91a4] border border-white/5 focus:border-blue-500/30 transition-all"}),y&&v.jsx("button",{onClick:()=>b(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#7f91a4] hover:text-white transition-colors",children:v.jsx("i",{className:"fa-solid fa-circle-xmark text-sm"})})]})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar scroll-smooth",children:[y.trim().length>1&&oe.length>0&&v.jsxs("div",{className:"p-2",children:[v.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-blue-400 uppercase tracking-widest",children:" "}),oe.map(I=>v.jsxs("button",{onClick:()=>{g(I),b("")},className:"w-full flex items-center gap-3.5 p-3.5 hover:bg-white/5 transition-all animate-fade-in rounded-2xl active:scale-[0.98]",children:[v.jsx("div",{className:"relative flex-shrink-0",children:v.jsx("img",{src:I.avatarUrl,className:"w-12 h-12 md:w-14 md:h-14 rounded-full object-cover border border-white/10"})}),v.jsxs("div",{className:"text-left truncate flex-1 min-w-0",children:[v.jsxs("div",{className:"font-bold text-[15px] md:text-[16px] text-white flex items-center gap-1 min-w-0",children:[v.jsx("span",{className:"truncate",children:I.username}),I.verified&&v.jsx(ta,{className:"w-4 h-4 ml-1"})]}),v.jsx("div",{className:"text-[11px] md:text-[12px] text-blue-400 font-bold truncate",children:I.username_handle})]})]},I.id))]}),y.trim().length<=1&&v.jsx("div",{className:"flex flex-col pb-[max(env(safe-area-inset-bottom),10px)]",children:s.sort((I,x)=>{var R,C;return(((R=x.lastMessage)==null?void 0:R.timestamp)||0)-(((C=I.lastMessage)==null?void 0:C.timestamp)||0)}).map(I=>v.jsx(MN,{chat:I,isActive:e===I.id,currentUserId:u.id,onClick:()=>n(I.id)},I.id))})]})]})},Yc=({status:s,className:e=""})=>s==="read"?v.jsxs("svg",{width:"18",height:"12",viewBox:"0 0 18 12",fill:"none",className:e,children:[v.jsx("path",{d:"M1 6.5L5 10.5L13.5 1.5",stroke:"#40d398",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"}),v.jsx("path",{d:"M5 6.5L9 10.5L17.5 1.5",stroke:"#40d398",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"})]}):v.jsx("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",className:e,children:v.jsx("path",{d:"M1 6.5L5 10.5L12 1.5",stroke:"rgba(255,255,255,0.4)",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"})}),kN=({message:s,isMe:e,onContextMenu:n,onReaction:r,onImageClick:o,currentUserId:u})=>{const[f,p]=ee.useState(!1),[g,y]=ee.useState(0),[b,S]=ee.useState(0),A=ee.useRef(null),j=ee.useRef(null),q=ne=>new Date(ne).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),J=(ne,fe)=>ne&&/\.(jpg|jpeg|png|gif|webp)$/i.test(ne)||fe&&fe.startsWith("data:image"),Z=(ne,fe)=>ne&&/\.(mp4|mov|webm|avi)$/i.test(ne)||fe&&(fe.startsWith("data:video")||fe.includes("video"));ee.useEffect(()=>{if(s.audioUrl){const ne=new Audio(s.audioUrl);return A.current=ne,ne.addEventListener("loadedmetadata",()=>S(ne.duration)),ne.addEventListener("timeupdate",()=>y(ne.currentTime)),ne.addEventListener("ended",()=>{p(!1),y(0)}),()=>{ne.pause(),ne.src=""}}},[s.audioUrl]);const oe=()=>{A.current&&(f?A.current.pause():A.current.play(),p(!f))},te=(ne,fe,I)=>{ne.stopPropagation();const x=document.createElement("a");x.href=fe,x.download=I,document.body.appendChild(x),x.click(),document.body.removeChild(x)},ae=ee.useMemo(()=>{let fe=parseInt(s.id.slice(-5),36)||123;return Array.from({length:25}).map((I,x)=>{fe=fe*16807%2147483647;const R=fe%12+4,C=g/(b||1)>x/25;return v.jsx("div",{className:`w-[2px] rounded-full transition-colors ${C?"bg-blue-400":"bg-white/20"}`,style:{height:`${R}px`}},x)})},[s.id,g,b]),ye=Object.entries(s.reactions||{}).filter(([ne,fe])=>fe.length>0);return v.jsx("div",{id:`msg-${s.id}`,className:`flex w-full mb-0.5 select-none transition-colors duration-200 ${e?"justify-end":"justify-start"}`,children:v.jsx("div",{className:`flex w-full ${e?"justify-end pl-12":"justify-start pr-12"} animate-fade-in`,children:v.jsxs("div",{onContextMenu:ne=>{ne.preventDefault(),n(ne,s)},className:`relative max-w-full p-1 rounded-2xl shadow-sm transition-all cursor-pointer select-text
            ${e?"bg-[#2b5278] rounded-br-none":"bg-[#182533] rounded-bl-none"}
            active:opacity-80
          `,children:[s.replyPreview&&v.jsxs("div",{className:"m-1 bg-black/20 p-2 rounded-xl border-l-3 border-[#2481cc] cursor-pointer hover:bg-black/30 transition-all overflow-hidden max-w-[280px]",children:[v.jsx("div",{className:"text-[10px] font-black text-[#2481cc] uppercase truncate",children:s.replyPreview.senderName}),v.jsx("div",{className:"text-[12px] text-white/50 truncate",children:s.replyPreview.text})]}),s.audioUrl?v.jsxs("div",{className:"relative min-w-[200px] p-2 pr-10",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:oe,className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-500 text-white shadow-lg active:scale-90 transition-all shrink-0",children:v.jsx("i",{className:`fa-solid ${f?"fa-pause":"fa-play"} ${f?"":"ml-0.5"}`})}),v.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-1",children:[v.jsx("div",{className:"flex items-end gap-[2px] h-4",children:ae}),v.jsxs("div",{className:"flex items-center gap-2 text-[9px] font-bold text-white/30 uppercase",children:[v.jsxs("span",{children:[Math.floor(f?g:b)," "]}),v.jsx("span",{children:""}),v.jsx("span",{children:s.fileSize||"2.4 KB"})]})]})]}),v.jsxs("div",{className:"absolute bottom-1 right-2 flex items-center gap-1 pointer-events-none",children:[v.jsx("span",{className:"text-[10px] font-medium text-white/30",children:q(s.timestamp)}),e&&v.jsx(Yc,{status:s.status,className:"w-[14px] h-[10px]"})]})]}):v.jsxs("div",{className:"relative",children:[s.fileUrl&&J(s.fileName,s.fileUrl)&&v.jsxs("div",{onClick:()=>o==null?void 0:o(s.fileUrl),className:"rounded-xl overflow-hidden border border-white/5 bg-black/20 cursor-zoom-in active:scale-[0.98] transition-transform relative group",children:[v.jsx("img",{src:s.fileUrl,alt:"msg",className:"max-w-full max-h-[450px] object-cover"}),v.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/30 backdrop-blur-md px-2 py-0.5 rounded-full flex items-center gap-1 pointer-events-none border border-white/5",children:[v.jsx("span",{className:"text-[10px] font-bold text-white/90",children:q(s.timestamp)}),e&&v.jsx(Yc,{status:s.status,className:"w-[14px] h-[10px]"})]})]}),s.fileUrl&&Z(s.fileName,s.fileUrl)&&v.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/5 bg-black/20 relative group max-w-[320px]",children:[v.jsx("video",{ref:j,src:s.fileUrl,className:"w-full h-auto max-h-[450px] object-cover",controls:!1,onClick:()=>{const ne=j.current;ne&&(ne.paused?ne.play():ne.pause())}}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:v.jsx("div",{className:"bg-black/40 backdrop-blur-lg w-12 h-12 rounded-full flex items-center justify-center text-white text-xl",children:v.jsx("i",{className:"fa-solid fa-play"})})}),v.jsx("button",{onClick:ne=>te(ne,s.fileUrl,s.fileName||"video.mp4"),className:"absolute top-2 right-2 bg-black/40 hover:bg-blue-500 transition-all backdrop-blur-md w-8 h-8 rounded-full flex items-center justify-center text-white text-xs border border-white/10",children:v.jsx("i",{className:"fa-solid fa-arrow-down"})}),v.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/30 backdrop-blur-md px-2 py-0.5 rounded-full flex items-center gap-1 pointer-events-none border border-white/5",children:[v.jsx("span",{className:"text-[10px] font-bold text-white/90",children:q(s.timestamp)}),e&&v.jsx(Yc,{status:s.status,className:"w-[14px] h-[10px]"})]})]}),s.text&&v.jsxs("div",{className:`text-[15px] leading-snug whitespace-pre-wrap break-words px-3 py-2 font-medium flex flex-col ${s.fileUrl?"mt-1":""}`,children:[s.text,!s.fileUrl&&v.jsxs("div",{className:"flex justify-end items-center gap-1 mt-1 -mr-1",children:[s.edited&&v.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-white/20",children:"."}),v.jsx("span",{className:"text-[10px] font-medium text-white/30 leading-none",children:q(s.timestamp)}),e&&v.jsx(Yc,{status:s.status,className:"w-[14px] h-[10px]"})]})]})]}),ye.length>0&&v.jsx("div",{className:`absolute -bottom-3 ${e?"right-1":"left-1"} flex gap-1 z-10 animate-fade-in`,children:ye.map(([ne,fe])=>v.jsxs("button",{onClick:I=>{I.stopPropagation(),r(ne)},className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-bold border border-white/5 ${fe.includes(u)?"bg-blue-600 text-white":"bg-[#182533]/95 text-white/70"}`,children:[v.jsx("span",{children:ne}),fe.length>1&&v.jsx("span",{className:"text-[9px]",children:fe.length})]},ne))})]})})})},jN=({chatId:s,currentUserId:e,onSend:n,onFileSelect:r,replyTo:o,onCancelReply:u})=>{const[f,p]=ee.useState(""),[g,y]=ee.useState(!1),[b,S]=ee.useState(0),A=ee.useRef(null),j=ee.useRef(null),q=ee.useRef(null),J=ee.useRef(null),Z=ee.useRef(null),oe=ee.useRef([]),te=async R=>{if(!s||!e)return;const C=bt(We,`chats/${s}/typing`,e);R?await yT(C,{isTyping:!0,timestamp:Date.now()}):await _T(C)},ae=R=>{p(R),te(R.length>0),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>te(!1),3e3)},ye=()=>{f.trim()&&(n(f.trim()),p(""),te(!1),A.current&&(A.current.style.height="auto"))},ne=async()=>{try{const R=await navigator.mediaDevices.getUserMedia({audio:!0}),C=new MediaRecorder(R);Z.current=C,oe.current=[],C.ondataavailable=V=>{V.data.size>0&&oe.current.push(V.data)},C.onstop=()=>{const V=new Blob(oe.current,{type:"audio/webm"});n("",new File([V],"voice.webm",{type:"audio/webm"}),!0),R.getTracks().forEach(N=>N.stop())},C.start(),y(!0);const D=Date.now();q.current=setInterval(()=>S(Date.now()-D),100)}catch(R){alert(" : "+R)}},fe=()=>{Z.current&&g&&(Z.current.stop(),y(!1),clearInterval(q.current),S(0))},I=R=>{const C=Math.floor(R/1e3);return`${Math.floor(C/60).toString().padStart(2,"0")}:${(C%60).toString().padStart(2,"0")}`};ee.useEffect(()=>{if(A.current){A.current.style.height="auto";const R=A.current.scrollHeight;A.current.style.height=`${Math.min(R,180)}px`}},[f]);const x=R=>{var D;const C=(D=R.target.files)==null?void 0:D[0];C&&(r&&(C.type.startsWith("image/")||C.type.startsWith("video/"))?r(C):n("",C,!1),R.target.value="")};return v.jsxs("div",{className:"bg-[#17212b] border-t border-[#0e1621] relative z-50 pb-[max(env(safe-area-inset-bottom),8px)] shrink-0",children:[o&&v.jsxs("div",{className:"px-4 py-2 bg-[#0e1621]/50 border-b border-white/5 flex items-center gap-3 animate-slide-up",children:[v.jsx("div",{className:"w-1 bg-blue-500 self-stretch rounded-full"}),v.jsxs("div",{className:"flex-1 overflow-hidden",children:[v.jsx("div",{className:"text-[10px] font-black text-blue-500 uppercase",children:o.senderName}),v.jsx("div",{className:"text-sm text-[#7f91a4] truncate",children:o.text})]}),v.jsx("button",{onClick:u,className:"text-[#7f91a4] hover:text-white p-2 transition-all",children:v.jsx("i",{className:"fa-solid fa-xmark"})})]}),v.jsxs("div",{className:"p-2 flex items-end gap-1.5 md:gap-2 max-w-full",children:[v.jsx("input",{type:"file",ref:j,className:"hidden",accept:"image/*,video/*",onChange:x}),!g&&v.jsx("button",{onClick:()=>{var R;return(R=j.current)==null?void 0:R.click()},className:"text-[#7f91a4] hover:text-blue-500 p-3 flex-shrink-0 transition-all active:scale-90",children:v.jsx("i",{className:"fa-solid fa-paperclip text-xl"})}),v.jsx("div",{className:`flex-1 min-w-0 bg-[#0e1621] rounded-[22px] flex items-center px-4 transition-all border border-white/5 ${g?"border-red-500/30":""}`,children:g?v.jsxs("div",{className:"flex-1 flex items-center justify-between py-3 animate-fade-in",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}),v.jsx("span",{className:"text-[16px] font-bold text-white font-mono",children:I(b)})]}),v.jsx("button",{onClick:()=>{Z.current&&Z.current.stop(),y(!1),clearInterval(q.current),te(!1)},className:"text-red-500 text-[11px] font-black uppercase tracking-widest hover:brightness-125 px-2",children:""})]}):v.jsx("textarea",{ref:A,value:f,onChange:R=>ae(R.target.value),onKeyDown:R=>R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),ye()),placeholder:"",rows:1,className:"w-full bg-transparent border-none focus:outline-none py-3 text-[16px] leading-[20px] resize-none max-h-40 text-white placeholder:text-[#7f91a4] select-text no-scrollbar",style:{height:"auto"}})}),v.jsx("button",{onClick:g?fe:f.trim()?ye:ne,className:`w-11 h-11 md:w-12 md:h-12 flex-shrink-0 rounded-full flex items-center justify-center transition-all ${f.trim()?"bg-blue-600 text-white shadow-[0_4px_12px_rgba(37,99,235,0.3)]":g?"bg-red-500 text-white animate-pulse shadow-[0_0_15px_rgba(239,68,68,0.4)]":"bg-white/5 text-[#7f91a4]"} active:scale-90`,children:v.jsx("i",{className:`fa-solid ${f.trim()?"fa-paper-plane":g?"fa-stop":"fa-microphone"} text-lg`})})]})]})},LN=({src:s,onClose:e})=>v.jsxs("div",{className:"fixed inset-0 z-[300] bg-black/90 backdrop-blur-md flex flex-col animate-fade-in items-center justify-center p-4 md:p-12",onClick:e,children:[v.jsx("div",{className:"absolute top-4 right-4 z-10",children:v.jsx("button",{onClick:e,className:"text-white/60 hover:text-white p-3 transition-all bg-white/10 rounded-full backdrop-blur-md",children:v.jsx("i",{className:"fa-solid fa-xmark text-2xl"})})}),v.jsx("div",{className:"relative max-w-full max-h-full flex items-center justify-center",children:v.jsx("img",{src:s,className:"max-w-full max-h-[85vh] md:max-h-[80vh] object-contain shadow-[0_0_80px_rgba(0,0,0,0.8)] rounded-2xl md:rounded-3xl animate-slide-up select-none border border-white/5",alt:"Full size",onClick:n=>n.stopPropagation()})})]}),UN=({imageSrc:s,onConfirm:e,onCancel:n})=>{const[r,o]=ee.useState(1),[u,f]=ee.useState(1),[p,g]=ee.useState({x:0,y:0}),[y,b]=ee.useState(!1),[S,A]=ee.useState({x:0,y:0}),j=ee.useRef(null),q=ee.useRef(null);ee.useEffect(()=>{if(q.current&&j.current){const ae=q.current,ye=j.current,ne=Math.min(ye.offsetWidth,ye.offsetHeight)*.8,fe=ne/ae.naturalWidth,I=ne/ae.naturalHeight,x=Math.max(fe,I);f(x),o(x)}},[s]);const J=ae=>{b(!0);const ye="touches"in ae?ae.touches[0].clientX:ae.clientX,ne="touches"in ae?ae.touches[0].clientY:ae.clientY;A({x:ye-p.x,y:ne-p.y})},Z=ee.useCallback(ae=>{if(!y)return;const ye="touches"in ae?ae.touches[0].clientX:ae.clientX,ne="touches"in ae?ae.touches[0].clientY:ae.clientY;g({x:ye-S.x,y:ne-S.y})},[y,S]),oe=()=>b(!1),te=()=>{if(!q.current||!j.current)return;const ae=document.createElement("canvas"),ye=640;ae.width=ye,ae.height=ye;const ne=ae.getContext("2d");if(ne){ne.fillStyle="#000",ne.fillRect(0,0,ye,ye);const fe=q.current,I=j.current,x=Math.min(I.offsetWidth,I.offsetHeight)*.8,R=ye/x,C=r*R,D=fe.naturalWidth*C,V=fe.naturalHeight*C,N=ye/2+p.x*R,_e=ye/2+p.y*R;ne.save(),ne.beginPath(),ne.arc(ye/2,ye/2,ye/2,0,Math.PI*2),ne.clip(),ne.drawImage(fe,N-D/2,_e-V/2,D,V),ne.restore(),e(ae.toDataURL("image/jpeg",.92))}};return v.jsxs("div",{className:"absolute inset-0 z-[200] bg-black flex flex-col animate-fade-in select-none",children:[v.jsx("div",{className:"p-5 flex justify-center items-center bg-black/40 backdrop-blur-md shrink-0",children:v.jsx("span",{className:"text-white text-[16px] font-bold tracking-tight",children:" "})}),v.jsxs("div",{ref:j,className:"flex-1 relative overflow-hidden cursor-move touch-none flex items-center justify-center bg-[#000]",onMouseDown:J,onMouseMove:Z,onMouseUp:oe,onMouseLeave:oe,onTouchStart:J,onTouchMove:Z,onTouchEnd:oe,children:[v.jsx("img",{ref:q,src:s,draggable:!1,className:"absolute pointer-events-none origin-center",style:{transform:`translate(${p.x}px, ${p.y}px) scale(${r})`,maxWidth:"none"},alt:"Avatar target"}),v.jsxs("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:[v.jsx("div",{className:"w-full h-full shadow-[0_0_0_9999px_rgba(0,0,0,0.7)]"}),v.jsx("div",{className:"absolute w-[80%] aspect-square border-2 border-white/20 rounded-full"})]})]}),v.jsxs("div",{className:"p-6 pb-[max(env(safe-area-inset-bottom),24px)] bg-[#17212b] space-y-8 rounded-t-3xl shadow-[0_-10px_40px_rgba(0,0,0,0.5)]",children:[v.jsxs("div",{className:"flex items-center gap-5",children:[v.jsx("i",{className:"fa-solid fa-minus text-[#7f91a4] text-xs"}),v.jsx("input",{type:"range",min:u*.5,max:u*5,step:"0.001",value:r,onChange:ae=>o(parseFloat(ae.target.value)),className:"flex-1 accent-blue-500 h-1.5 bg-white/10 rounded-full appearance-none cursor-pointer"}),v.jsx("i",{className:"fa-solid fa-plus text-[#7f91a4] text-xs"})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("button",{onClick:n,className:"text-[#7f91a4] font-bold text-[14px] uppercase tracking-wider hover:text-white transition-all px-2",children:""}),v.jsx("button",{onClick:te,className:"text-blue-400 font-bold text-[14px] uppercase tracking-widest hover:brightness-125 transition-all bg-blue-400/10 px-6 py-2.5 rounded-xl border border-blue-400/20",children:" "})]})]})]})},hm=s=>{if(!s)return"+888";const n=s.replace(/\D/g,"").slice(3,11);let r="+888";return n.length>0&&(r+=` ${n.slice(0,4)}`),n.length>4&&(r+=` ${n.slice(4,8)}`),r},Xc=({label:s,value:e,onChange:n,placeholder:r="",autoFocus:o=!1,maxLength:u=100,type:f="text",error:p=!1})=>{const[g,y]=ee.useState(!1),b=g||e&&e.length>0;return v.jsxs("div",{className:"relative pt-5 pb-1",children:[v.jsx("input",{type:f,autoFocus:o,maxLength:u,className:`w-full bg-transparent border-b outline-none text-white py-1.5 transition-all font-medium ${p?"border-red-500":"border-white/10 focus:border-blue-500"}`,value:e,onFocus:()=>y(!0),onBlur:()=>y(!1),onChange:n}),v.jsx("label",{className:`absolute left-0 transition-all pointer-events-none uppercase font-bold tracking-tight ${b?`top-0 ${p?"text-red-500":"text-blue-500"} text-[10px]`:"top-6 text-[#7f91a4] text-[15px] font-normal"}`,children:b?s:r||s})]})},PN=({user:s,currentUser:e,isMe:n,onUpdate:r,onClose:o})=>{const[u,f]=ee.useState("VIEW"),[p,g]=ee.useState({...s}),[y,b]=ee.useState(null),[S,A]=ee.useState(!1),[j,q]=ee.useState(!1),[J,Z]=ee.useState(null),oe=ee.useRef(null),te=ee.useRef(null);ee.useEffect(()=>{g({...s})},[s]),ee.useEffect(()=>{u==="SUB_BIO"&&oe.current&&(oe.current.style.height="auto",oe.current.style.height=`${oe.current.scrollHeight}px`)},[u,p.bio]);const ae=async()=>{var D;Z(null);let C={...p};if(u==="SUB_PHONE"){const V=(D=C.phoneNumber)==null?void 0:D.replace(/\s/g,"");if(V==="+888")C.phoneNumber="";else{q(!0);try{const N=ul(ls(We,"users"),Zr("phoneNumber","==",V));if((await Sh(N)).docs.find(G=>G.id!==s.id)){Z("     "),q(!1);return}C.phoneNumber=V}catch{Z("  "),q(!1);return}}}if(u==="SUB_NAME"){let{username:V,surname:N}=C;if(!V.trim()&&(N!=null&&N.trim())&&(V=N.trim(),N=""),!V.trim())return;C.username=V.trim(),C.surname=N==null?void 0:N.trim()}r&&r(C),q(!1),f("EDIT")},ye=()=>{f(u==="EDIT"?"VIEW":"EDIT"),g({...s}),Z(null)},ne=C=>{var V;const D=(V=C.target.files)==null?void 0:V[0];if(D){const N=new FileReader;N.onload=_e=>{var Ge;return b((Ge=_e.target)==null?void 0:Ge.result)},N.readAsDataURL(D),C.target.value=""}},fe=C=>{const D={...p,avatarUrl:C};g(D),r&&r(D),b(null)},I=()=>{const C=u==="VIEW";return v.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/5 bg-[#17212b] shrink-0",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[!C&&v.jsx("button",{onClick:ye,className:"text-[#7f91a4] hover:text-white p-1 transition-all",children:v.jsx("i",{className:"fa-solid fa-chevron-left text-lg"})}),v.jsx("h2",{className:"text-[17px] font-bold",children:C?"":""})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[C&&n&&v.jsx("button",{onClick:()=>f("EDIT"),className:"text-[#7f91a4] hover:text-white p-2 transition-all",children:v.jsx("i",{className:"fa-solid fa-pen-to-square text-lg"})}),v.jsx("button",{onClick:o,className:"text-[#7f91a4] hover:text-white p-2 transition-all",children:v.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]})]})},x=()=>{var C;return u==="VIEW"?v.jsxs("div",{className:"flex flex-col bg-[#0e1621] h-full overflow-y-auto no-scrollbar animate-fade-in",children:[v.jsxs("div",{className:"flex flex-col items-center p-6 bg-[#17212b] border-b border-white/5 shrink-0",children:[v.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>A(!0),children:[v.jsx("img",{src:s.avatarUrl,className:"w-24 h-24 rounded-full object-cover mb-3 shadow-2xl border-2 border-white/10 active:scale-95 transition-all",alt:"avatar"}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 rounded-full mb-3",children:v.jsx("i",{className:"fa-solid fa-eye text-white text-xs"})}),s.online&&v.jsx("div",{className:"absolute bottom-4 right-0 w-4 h-4 bg-green-500 border-2 border-[#17212b] rounded-full"})]}),v.jsxs("h3",{className:"text-xl font-semibold truncate max-w-full px-4 text-white flex items-center gap-1.5",children:[s.username," ",s.surname||""," ",s.verified&&v.jsx(ta,{})]}),v.jsx("span",{className:`text-xs font-medium ${s.online?"text-blue-400":"text-[#7f91a4]"}`,children:s.online?" ":"() "})]}),v.jsxs("div",{className:"p-4 space-y-1",children:[v.jsxs("div",{className:"flex gap-5 items-start p-3 hover:bg-white/5 rounded-xl transition-all group",children:[v.jsx("i",{className:"fa-solid fa-circle-info text-[#7f91a4] mt-1 text-lg w-5 text-center group-hover:text-blue-400"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"text-white text-[15px] whitespace-pre-wrap break-words leading-tight",children:s.bio||" MeganNait "}),v.jsx("div",{className:"text-[#7f91a4] text-xs font-medium mt-0.5",children:" "})]})]}),v.jsxs("div",{className:"flex gap-5 items-start p-3 hover:bg-white/5 rounded-xl transition-all group",children:[v.jsx("i",{className:"fa-solid fa-at text-[#7f91a4] mt-1 text-lg w-5 text-center group-hover:text-blue-400"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"text-blue-400 text-[15px] font-bold",children:s.username_handle}),v.jsx("div",{className:"text-[#7f91a4] text-xs font-medium mt-0.5",children:" "})]})]}),v.jsxs("div",{className:"flex gap-5 items-start p-3 hover:bg-white/5 rounded-xl transition-all group",children:[v.jsx("i",{className:"fa-solid fa-phone text-[#7f91a4] mt-1 text-lg w-5 text-center group-hover:text-blue-400"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"text-white text-[15px] font-medium",children:hm(s.phoneNumber)||"  "}),v.jsx("div",{className:"text-[#7f91a4] text-xs font-medium mt-0.5",children:""})]})]})]})]}):u==="EDIT"?v.jsxs("div",{className:"flex flex-col bg-[#0e1621] h-full overflow-y-auto no-scrollbar animate-fade-in",children:[v.jsxs("div",{className:"flex flex-col items-center p-6 bg-[#17212b] relative shrink-0",children:[v.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>{var D;return(D=te.current)==null?void 0:D.click()},children:[v.jsx("input",{type:"file",ref:te,className:"hidden",accept:"image/*",onChange:ne}),v.jsx("img",{src:s.avatarUrl,className:"w-24 h-24 rounded-full object-cover brightness-75 transition-all group-hover:brightness-50",alt:"avatar"}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx("i",{className:"fa-solid fa-camera text-white text-xl"})})]}),v.jsxs("h3",{className:"text-lg font-semibold mt-2 text-white flex items-center gap-1.5",children:[s.username," ",s.surname||""," ",s.verified&&v.jsx(ta,{})]})]}),v.jsx("div",{className:"flex flex-col bg-[#17212b] mt-4 border-y border-white/5",children:v.jsxs("button",{onClick:()=>f("SUB_BIO"),className:"flex flex-col p-4 hover:bg-white/5 text-left transition-all",children:[v.jsxs("div",{className:"flex justify-between items-center w-full",children:[v.jsx("span",{className:"text-white text-[15px] truncate pr-4",children:s.bio||" "}),v.jsx("span",{className:"text-[#7f91a4] text-xs shrink-0 font-bold",children:70-(((C=s.bio)==null?void 0:C.length)||0)})]}),v.jsx("div",{className:"text-[#7f91a4] text-[11px] mt-1 leading-relaxed",children:" , : ,    ."})]})}),v.jsxs("div",{className:"flex flex-col bg-[#17212b] mt-4 border-y border-white/5",children:[v.jsxs("button",{onClick:()=>f("SUB_NAME"),className:"flex justify-between items-center p-4 hover:bg-white/5 border-b border-white/5 transition-all group",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("i",{className:"fa-solid fa-user text-[#7f91a4] w-5 text-center group-hover:text-white transition-colors"}),v.jsx("span",{className:"text-[15px] font-medium",children:""})]}),v.jsxs("span",{className:"text-blue-400 text-[15px] font-bold truncate max-w-[150px]",children:[s.username," ",s.surname||""]})]}),v.jsxs("button",{onClick:()=>f("SUB_PHONE"),className:"flex justify-between items-center p-4 hover:bg-white/5 border-b border-white/5 transition-all group",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("i",{className:"fa-solid fa-phone text-[#7f91a4] w-5 text-center group-hover:text-white transition-colors"}),v.jsx("span",{className:"text-[15px] font-medium",children:" "})]}),v.jsx("span",{className:"text-blue-400 text-[15px] font-bold",children:hm(s.phoneNumber)||""})]}),v.jsxs("button",{onClick:()=>f("SUB_HANDLE"),className:"flex justify-between items-center p-4 hover:bg-white/5 transition-all group",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("i",{className:"fa-solid fa-at text-[#7f91a4] w-5 text-center group-hover:text-white transition-colors"}),v.jsx("span",{className:"text-[15px] font-medium",children:" "})]}),v.jsx("span",{className:"text-blue-400 text-[15px] font-bold",children:s.username_handle})]})]})]}):null},R=()=>{var N;if(u==="VIEW"||u==="EDIT")return null;let C="",D=null,V=j;if(u==="SUB_NAME")C=" ",V=j||!p.username.trim()&&!((N=p.surname)!=null&&N.trim()),D=v.jsxs("div",{className:"space-y-4",children:[v.jsx(Xc,{label:"",autoFocus:!0,value:p.username,onChange:_e=>g({...p,username:_e.target.value})}),v.jsx(Xc,{label:"",value:p.surname||"",onChange:_e=>g({...p,surname:_e.target.value})})]});else if(u==="SUB_HANDLE")C=" ",V=j||p.username_handle.length<2,D=v.jsxs("div",{className:"space-y-4",children:[v.jsx(Xc,{label:"username",autoFocus:!0,value:p.username_handle.replace("@",""),onChange:_e=>g({...p,username_handle:`@${_e.target.value.toLowerCase()}`})}),v.jsx("p",{className:"text-[#7f91a4] text-[11px] leading-relaxed italic",children:"   ."})]});else if(u==="SUB_BIO")C=" ",D=v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{className:"relative pt-5",children:[v.jsx("textarea",{ref:oe,autoFocus:!0,maxLength:70,rows:1,className:"w-full bg-transparent border-b border-white/10 outline-none text-white py-1.5 transition-all resize-none focus:border-blue-500 font-medium",value:p.bio,onChange:_e=>g({...p,bio:_e.target.value})}),v.jsx("label",{className:"absolute top-0 left-0 text-blue-500 text-[10px] font-bold uppercase",children:" "}),v.jsx("span",{className:"absolute right-0 top-0 text-[#7f91a4] text-[10px] font-bold",children:70-p.bio.length})]})});else if(u==="SUB_PHONE"){C=" ";const _e=hm(p.phoneNumber);V=j||_e.length>4&&_e.length<14,D=v.jsxs("div",{className:"space-y-4",children:[v.jsx(Xc,{error:!!J,label:" ",autoFocus:!0,maxLength:14,value:_e,onChange:Ge=>{const G=Ge.target.value;if(G.length<4){g({...p,phoneNumber:"+888"});return}const me=G.replace(/\D/g,"").slice(3,11);let Ve="+888";me.length>0&&(Ve+=` ${me.slice(0,4)}`),me.length>4&&(Ve+=` ${me.slice(4,8)}`),g({...p,phoneNumber:Ve}),Z(null)}}),J?v.jsx("p",{className:"text-red-400 text-[10px] font-bold animate-fade-in",children:J}):v.jsx("p",{className:"text-[#7f91a4] text-[11px] italic",children:" +888 ."})]})}return v.jsx("div",{className:"absolute inset-0 z-[120] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in px-4",children:v.jsxs("div",{className:"bg-[#1c2a38] w-full max-w-[300px] rounded-2xl shadow-2xl p-6 flex flex-col gap-4 animate-slide-up border border-white/5",children:[v.jsx("h4",{className:"text-white text-[16px] font-bold",children:C}),v.jsx("div",{className:"py-2",children:D}),v.jsxs("div",{className:"flex justify-end gap-6 mt-4",children:[v.jsx("button",{disabled:j,onClick:()=>{g({...s}),f("EDIT"),Z(null)},className:"text-red-400 font-bold text-[13px] uppercase tracking-widest hover:brightness-125 transition-all disabled:opacity-50",children:""}),v.jsx("button",{disabled:V,onClick:ae,className:`font-bold text-[13px] uppercase tracking-widest transition-all ${V?"text-[#7f91a4] opacity-50 cursor-not-allowed":"text-blue-400 hover:brightness-125"}`,children:j?v.jsx("i",{className:"fas fa-spinner fa-spin"}):""})]})]})})};return v.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center sm:p-4",children:[v.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md animate-fade-in",onClick:o}),v.jsxs("div",{className:"relative w-full sm:max-w-[360px] h-full sm:h-[560px] bg-[#17212b] sm:rounded-3xl shadow-2xl overflow-hidden animate-slide-up flex flex-col border border-white/5",children:[!y&&I(),v.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[x(),R(),y&&v.jsx(UN,{imageSrc:y,onCancel:()=>b(null),onConfirm:fe}),S&&v.jsx(LN,{src:s.avatarUrl,onClose:()=>A(!1)})]})]})]})},zN=({initialFiles:s,onClose:e,onSend:n})=>{var A;const[r,o]=ee.useState([]),[u,f]=ee.useState(""),p=ee.useRef(null);ee.useEffect(()=>{const j=s.map(q=>({id:Math.random().toString(36).substr(2,9),file:q,preview:URL.createObjectURL(q),rotation:0}));return o(j),()=>j.forEach(q=>URL.revokeObjectURL(q.preview))},[s]);const g=j=>{o(q=>q.map(J=>J.id===j?{...J,rotation:(J.rotation+90)%360}:J))},y=j=>{o(q=>{const J=q.filter(Z=>Z.id!==j);return J.length===0&&e(),J})},b=j=>{const J=Array.from(j.target.files||[]).map(Z=>({id:Math.random().toString(36).substr(2,9),file:Z,preview:URL.createObjectURL(Z),rotation:0}));o(Z=>[...Z,...J])},S=()=>{const j=r.map(J=>J.file),q=r.map(J=>J.rotation);n(u,j,q)};return v.jsxs("div",{className:"fixed inset-0 z-[600] flex items-center justify-center p-0 md:p-4 animate-fade-in",children:[v.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:e}),v.jsxs("div",{className:"relative bg-[#1c2a38] w-full max-w-[440px] md:rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-slide-up border border-white/5 h-full md:h-auto max-h-screen",children:[v.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-white/5 shrink-0",children:[v.jsx("h3",{className:"text-white font-bold text-[15px]",children:r.length>1?` ${r.length} `:(A=r[0])!=null&&A.file.type.startsWith("video/")?" ":" "}),v.jsx("button",{className:"text-[#7f91a4] hover:text-white transition-all",children:v.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar bg-black/20",children:v.jsx("div",{className:"flex flex-col",children:r.map(j=>v.jsxs("div",{className:"relative w-full group overflow-hidden border-b border-white/5 last:border-0",children:[v.jsx("div",{className:"flex items-center justify-center bg-[#0e1621] transition-all",style:{transform:`rotate(${j.rotation}deg)`},children:j.file.type.startsWith("video/")?v.jsx("video",{src:j.preview,className:"w-full max-h-[500px] object-contain",controls:!0}):v.jsx("img",{src:j.preview,className:"w-full max-h-[500px] object-contain",alt:"Preview"})}),v.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[v.jsx("button",{onClick:()=>g(j.id),className:"bg-black/50 backdrop-blur-md p-2.5 rounded-xl text-white hover:bg-blue-500 transition-all border border-white/10",children:v.jsx("i",{className:"fa-solid fa-rotate"})}),v.jsx("button",{onClick:()=>y(j.id),className:"bg-black/50 backdrop-blur-md p-2.5 rounded-xl text-white hover:bg-red-500 transition-all border border-white/10",children:v.jsx("i",{className:"fa-solid fa-trash-can"})})]})]},j.id))})}),v.jsx("div",{className:"p-4 pt-6 space-y-4 shrink-0 bg-[#1c2a38]",children:v.jsxs("div",{className:"relative",children:[v.jsx("input",{autoFocus:!0,type:"text",placeholder:"",value:u,onChange:j=>f(j.target.value),className:"w-full bg-transparent border-b border-blue-500/50 outline-none text-white py-2 focus:border-blue-500 transition-all text-[15px] pr-10",onKeyDown:j=>j.key==="Enter"&&S()}),v.jsx("button",{className:"absolute right-0 bottom-2 text-[#7f91a4] hover:text-white transition-all",children:v.jsx("i",{className:"fa-regular fa-face-smile text-lg"})})]})}),v.jsxs("div",{className:"p-3 flex items-center justify-between border-t border-white/5 bg-[#1c2a38] pb-[max(env(safe-area-inset-bottom),12px)]",children:[v.jsx("input",{type:"file",ref:p,className:"hidden",multiple:!0,accept:"image/*,video/*",onChange:b}),v.jsx("button",{onClick:()=>{var j;return(j=p.current)==null?void 0:j.click()},className:"text-blue-400 font-bold text-xs uppercase tracking-widest px-4 py-3 rounded-xl hover:bg-white/5 active:scale-95 transition-all",children:""}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:e,className:"text-[#7f91a4] font-bold text-xs uppercase tracking-widest px-4 py-3 rounded-xl hover:bg-white/5 active:scale-95 transition-all",children:""}),v.jsx("button",{onClick:S,className:"text-blue-400 font-bold text-xs uppercase tracking-widest px-4 py-3 rounded-xl hover:bg-blue-400/10 active:scale-95 transition-all",children:""})]})]})]})]})},BN=["","","","","","",""],qN=({x:s,y:e,items:n,onReaction:r,onClose:o})=>{const u=ee.useRef(null);ee.useEffect(()=>{const b=S=>{u.current&&!u.current.contains(S.target)&&o()};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[o]);const f=200,p=n.length*40+60,g=s+f>window.innerWidth?window.innerWidth-f-10:s,y=e+p>window.innerHeight?window.innerHeight-p-10:e;return v.jsxs("div",{ref:u,className:"fixed z-[999] bg-[#1c2a38]/95 backdrop-blur-2xl border border-white/10 rounded-2xl shadow-[0_15px_50px_rgba(0,0,0,0.6)] py-1.5 w-[200px] animate-fade-in overflow-hidden",style:{top:y,left:g},children:[v.jsxs("div",{className:"flex items-center justify-between px-2 py-2 mb-1 border-b border-white/5 overflow-x-auto no-scrollbar gap-1",children:[BN.map(b=>v.jsx("button",{onClick:S=>{S.stopPropagation(),r(b),o()},className:"text-xl hover:scale-125 transition-transform duration-200 p-1 rounded-lg hover:bg-white/10",children:b},b)),v.jsx("button",{className:"text-[#7f91a4] hover:text-white p-1 text-sm",children:v.jsx("i",{className:"fa-solid fa-chevron-down opacity-50"})})]}),n.map((b,S)=>v.jsxs("button",{onClick:A=>{A.stopPropagation(),b.onClick(),o()},className:`w-full flex items-center justify-between gap-3 px-4 py-2 text-sm transition-all hover:bg-white/10 active:bg-white/20 ${b.danger?"text-red-400":"text-white"}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("i",{className:`fa-solid ${b.icon} w-5 text-center opacity-70`}),v.jsx("span",{className:"font-medium",children:b.label})]}),b.icon==="fa-circle-check"&&v.jsx("i",{className:"fa-regular fa-circle text-[10px] opacity-30"})]},S))]})},H0={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},HN=({src:s,onClose:e})=>v.jsxs("div",{className:"fixed inset-0 z-[500] bg-black/90 backdrop-blur-xl flex flex-col animate-fade-in items-center justify-center p-4 md:p-12",onClick:e,children:[v.jsx("div",{className:"absolute top-6 right-6 z-10",children:v.jsx("button",{onClick:e,className:"text-white/60 hover:text-white p-3 transition-all bg-white/10 rounded-full backdrop-blur-md",children:v.jsx("i",{className:"fa-solid fa-xmark text-2xl"})})}),v.jsx("div",{className:"relative max-w-full max-h-full flex items-center justify-center",children:v.jsx("img",{src:s,className:"max-w-full max-h-[90vh] object-contain shadow-[0_0_100px_rgba(0,0,0,0.8)] rounded-2xl animate-slide-up select-none border border-white/5",alt:"Full size",onClick:n=>n.stopPropagation()})})]}),FN=({user:s,onClose:e,onAccept:n,isIncoming:r,status:o})=>{const[u,f]=ee.useState(0),[p,g]=ee.useState(!1),[y,b]=ee.useState(!0);ee.useEffect(()=>{if(o==="active"){const A=setInterval(()=>f(j=>j+1),1e3);return()=>clearInterval(A)}},[o]);const S=A=>{const j=Math.floor(A/60),q=A%60;return`${j}:${q.toString().padStart(2,"0")}`};return v.jsxs("div",{className:"fixed inset-0 z-[1000] bg-[#0e1621] flex flex-col items-center justify-between py-16 px-8 animate-fade-in overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 opacity-30 blur-[100px] scale-150 pointer-events-none transition-opacity duration-1000",children:v.jsx("img",{src:s.avatarUrl,className:"w-full h-full object-cover"})}),v.jsxs("div",{className:"flex flex-col items-center gap-6 mt-12 relative z-10 animate-slide-up",children:[v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"absolute -inset-4 bg-blue-500/20 rounded-full blur-2xl animate-pulse"}),v.jsx("img",{src:s.avatarUrl,className:"w-36 h-36 rounded-full border-4 border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] object-cover relative z-10",alt:s.username}),o==="ringing"&&v.jsx("div",{className:"absolute inset-0 rounded-full border border-blue-400/30 animate-ping opacity-20 pointer-events-none"})]}),v.jsxs("div",{className:"text-center space-y-1",children:[v.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:s.username}),v.jsx("p",{className:"text-blue-400 font-black uppercase tracking-[0.3em] text-[11px] animate-pulse",children:r&&o==="ringing"?" ":o==="active"?`  ${S(u)}`:"..."})]})]}),v.jsx("div",{className:"flex items-center gap-8 mb-12 relative z-10 animate-slide-up",children:r&&o==="ringing"?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:e,className:"w-20 h-20 rounded-full bg-red-500 flex items-center justify-center text-white text-3xl shadow-[0_10px_40px_rgba(239,68,68,0.4)] active:scale-95 transition-all",children:v.jsx("i",{className:"fa-solid fa-phone-slash rotate-[135deg]"})}),v.jsx("button",{onClick:n,className:"w-20 h-20 rounded-full bg-green-500 flex items-center justify-center text-white text-3xl shadow-[0_10px_40px_rgba(34,197,94,0.4)] active:scale-95 transition-all animate-bounce",children:v.jsx("i",{className:"fa-solid fa-phone"})})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>g(!p),className:`w-16 h-16 rounded-full flex items-center justify-center text-xl transition-all active:scale-90 border border-white/5 ${p?"bg-white text-[#0e1621]":"bg-white/10 text-white hover:bg-white/20"}`,children:v.jsx("i",{className:`fa-solid ${p?"fa-microphone-slash":"fa-microphone"}`})}),v.jsx("button",{onClick:e,className:"w-20 h-20 rounded-full bg-red-500 flex items-center justify-center text-white text-3xl shadow-[0_10px_40px_rgba(239,68,68,0.4)] active:scale-95 transition-all group",children:v.jsx("i",{className:"fa-solid fa-phone-slash rotate-[135deg] group-hover:scale-110 transition-transform"})}),v.jsx("button",{onClick:()=>b(!y),className:`w-16 h-16 rounded-full flex items-center justify-center text-xl transition-all active:scale-90 border border-white/5 ${y?"bg-white/10 text-white hover:bg-white/20":"bg-white text-[#0e1621]"}`,children:v.jsx("i",{className:`fa-solid ${y?"fa-volume-high":"fa-volume-xmark"}`})})]})})]})},ta=({className:s=""})=>v.jsxs("svg",{viewBox:"0 0 36 36",className:`w-[14px] h-[14px] flex-shrink-0 inline-block align-middle translate-y-[-1px] ${s}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("path",{fill:"#0080FF",d:"M15.13 1.848c1.46-2.514 5.057-2.45 6.429.115l1.253 2.343a3.677 3.677 0 0 0 3.762 1.926l2.597-.373c2.842-.408 5.036 2.493 3.92 5.182L32.07 13.5a3.804 3.804 0 0 0 .865 4.192l1.906 1.833c2.086 2.006 1.224 5.56-1.54 6.348l-2.525.721c-1.484.424-2.554 1.74-2.683 3.302l-.22 2.658c-.242 2.91-3.51 4.44-5.84 2.734l-2.13-1.558a3.644 3.644 0 0 0-4.21-.075l-2.181 1.482c-2.387 1.622-5.601-.023-5.743-2.94l-.129-2.664c-.076-1.566-1.1-2.919-2.568-3.395l-2.499-.81c-2.735-.887-3.474-4.469-1.32-6.4l1.967-1.763a3.801 3.801 0 0 0 1.008-4.16l-.935-2.492C2.27 7.785 4.563 4.963 7.39 5.472l2.582.465a3.673 3.673 0 0 0 3.826-1.791l1.333-2.298Z"}),v.jsx("path",{d:"M12 18L16.5 22.5L24.5 14.5",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),GN=(s,e)=>{if(s)return" ";if(!e)return"() ";const r=Date.now()-e;return r<6e4?"()  ":r<36e5?`() ${Math.floor(r/6e4)} . `:`()  ${new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`},KN=s=>{const e=new Date(s),n=new Date;if(e.toDateString()===n.toDateString())return"";const r=new Date;return r.setDate(n.getDate()-1),e.toDateString()===r.toDateString()?"":e.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})},QN=({user:s,onLogout:e})=>{var zi;const[n,r]=ee.useState(s),[o,u]=ee.useState(null),[f,p]=ee.useState(bT.ALL),[g,y]=ee.useState([]),[b,S]=ee.useState({}),[A,j]=ee.useState(null),[q,J]=ee.useState(null),[Z,oe]=ee.useState(null),[te,ae]=ee.useState(null),[ye,ne]=ee.useState(!1),[fe,I]=ee.useState(null),[x,R]=ee.useState([]),[C,D]=ee.useState(!1),[V,N]=ee.useState(null),_e=ee.useRef(null),Ge=ee.useRef(null),[G,ie]=ee.useState(!1),[me,Ve]=ee.useState(""),Qe=ee.useRef(null),M=ee.useMemo(()=>g.find(se=>se.id===o),[g,o]),Q=(se="auto")=>{Qe.current&&Qe.current.scrollTo({top:Qe.current.scrollHeight,behavior:se})};ee.useEffect(()=>{!G&&o&&Q("auto")},[b,o,G]),ee.useEffect(()=>Ws(bt(We,"users",s.id),se=>{se.exists()&&r({id:se.id,...se.data()})}),[s.id]),ee.useEffect(()=>{const se=ul(ls(We,"chats"),Zr("participantsUids","array-contains",n.id));return Ws(se,de=>{y(de.docs.map(Le=>{var Re,be,tt;const xe=Le.data();return{id:Le.id,...xe,unreadCount:xe.unreadCount||((Re=xe.unreadCounts)==null?void 0:Re[n.id])||0,createdAt:((tt=(be=xe.createdAt)==null?void 0:be.toMillis)==null?void 0:tt.call(be))||Date.now()}}))})},[n.id]),ee.useEffect(()=>{if(!o)return;Oi(bt(We,"chats",o),{[`unreadCounts.${n.id}`]:0});const se=ul(ls(We,`chats/${o}/messages`),IN("timestamp","asc"));return Ws(se,Le=>{const xe=Le.docs.map(Re=>{var nn,Bi;const be=Re.data();be.senderId!==n.id&&be.status!=="read"&&Oi(bt(We,`chats/${o}/messages`,Re.id),{status:"read"});const tt=((Bi=(nn=be.timestamp)==null?void 0:nn.toMillis)==null?void 0:Bi.call(nn))||(typeof be.timestamp=="number"?be.timestamp:Date.now());return{id:Re.id,...be,timestamp:tt}});S(Re=>({...Re,[o]:xe}))})},[o,n.id]),ee.useEffect(()=>{const se=ul(ls(We,"calls"),Zr("receiverId","==",n.id),Zr("status","==","ringing"),NN(1));return Ws(se,async de=>{if(!de.empty){const Le=de.docs[0].data(),xe=await Lm(bt(We,"users",Le.callerId));xe.exists()&&!V&&N({peer:{id:xe.id,...xe.data()},isIncoming:!0,status:"ringing",sessionId:de.docs[0].id})}})},[n.id,V]),ee.useEffect(()=>{if(V!=null&&V.sessionId)return Ws(bt(We,"calls",V.sessionId),async se=>{if(!se.exists()){Te();return}const de=se.data();de.status==="ended"||de.status==="declined"?Te():de.status==="active"&&!V.isIncoming&&de.answer&&_e.current&&(await _e.current.setRemoteDescription(new RTCSessionDescription(de.answer)),N(Le=>Le?{...Le,status:"active"}:null))})},[V==null?void 0:V.sessionId]);const le=async se=>{try{Ge.current=await navigator.mediaDevices.getUserMedia({audio:!0}),_e.current=new RTCPeerConnection(H0),Ge.current.getTracks().forEach(xe=>{var Re;(Re=_e.current)==null||Re.addTrack(xe,Ge.current)}),_e.current.ontrack=xe=>{const Re=new Audio;Re.srcObject=xe.streams[0],Re.play()};const de=await _e.current.createOffer();await _e.current.setLocalDescription(de);const Le=await q0(ls(We,"calls"),{callerId:n.id,receiverId:se.id,status:"ringing",type:"audio",offer:{type:de.type,sdp:de.sdp},createdAt:Date.now()});N({peer:se,isIncoming:!1,status:"ringing",sessionId:Le.id})}catch(de){console.error("Call failed:",de)}},ce=async()=>{if(V!=null&&V.sessionId)try{const de=(await Lm(bt(We,"calls",V.sessionId))).data();Ge.current=await navigator.mediaDevices.getUserMedia({audio:!0}),_e.current=new RTCPeerConnection(H0),Ge.current.getTracks().forEach(xe=>{var Re;(Re=_e.current)==null||Re.addTrack(xe,Ge.current)}),_e.current.ontrack=xe=>{const Re=new Audio;Re.srcObject=xe.streams[0],Re.play()},await _e.current.setRemoteDescription(new RTCSessionDescription(de.offer));const Le=await _e.current.createAnswer();await _e.current.setLocalDescription(Le),await Oi(bt(We,"calls",V.sessionId),{status:"active",answer:{type:Le.type,sdp:Le.sdp}}),N(xe=>xe?{...xe,status:"active"}:null)}catch(se){console.error("Accept failed:",se),Te()}},Te=async()=>{V!=null&&V.sessionId&&await Oi(bt(We,"calls",V.sessionId),{status:"ended"}),Ge.current&&(Ge.current.getTracks().forEach(se=>se.stop()),Ge.current=null),_e.current&&(_e.current.close(),_e.current=null),N(null)};ee.useEffect(()=>{var se;if(M&&M.type!=="saved"){const de=(se=M.participantsUids)==null?void 0:se.find(Le=>Le!==n.id);if(de){const Le=Ws(bt(We,"users",de),Re=>{Re.exists()&&ae({id:Re.id,...Re.data()})}),xe=Ws(bt(We,"chats",M.id,"typing",de),Re=>{ne(Re.exists())});return()=>{Le(),xe()}}}else ae(null),ne(!1)},[o,n.id]);const Ne=async(se,de,Le)=>{if(!o)return;let xe={senderId:n.id,timestamp:SN(),status:"sent",replyPreview:Z?{senderName:Z.senderId===n.id?"":(te==null?void 0:te.username)||"",text:Z.text}:null};const Re=async be=>{var Er;await q0(ls(We,`chats/${o}/messages`),be);let tt=se||(Le?"  ":de!=null&&de.type.startsWith("video/")?" ":de!=null&&de.type.startsWith("image/")?" ":" ");const nn=(Er=M==null?void 0:M.participantsUids)==null?void 0:Er.find(Kt=>Kt!==n.id),Bi={lastMessage:{text:tt,timestamp:Date.now(),senderId:n.id}};nn&&(Bi[`unreadCounts.${nn}`]=AN(1)),await Oi(bt(We,"chats",o),Bi),te&&"Notification"in window&&Notification.permission==="granted"&&document.hidden&&new Notification(n.username,{body:tt,icon:n.avatarUrl})};if(Le&&de){const be=new FileReader;be.readAsDataURL(de),be.onload=async()=>{xe.audioUrl=be.result,xe.fileSize=`${(de.size/1024).toFixed(1)} KB`,await Re(xe),Q("auto")}}else if(de){const be=new FileReader;be.readAsDataURL(de),be.onload=async()=>{xe.fileUrl=be.result,xe.fileName=de.name,xe.text=se,await Re(xe),Q("auto")}}else xe.text=se,await Re(xe),Q("auto");oe(null)},je=async(se,de)=>{if(!o)return;const Le=bt(We,`chats/${o}/messages`,se),xe=(b[o]||[]).find(be=>be.id===se);if(!xe)return;const Re={...xe.reactions||{}};Re[de]||(Re[de]=[]),Re[de].includes(n.id)?Re[de]=Re[de].filter(be=>be!==n.id):Re[de].push(n.id),await Oi(Le,{reactions:Re})},_t=async se=>{if(!o)return;const de=(M==null?void 0:M.pinnedMessageId)===se;await Oi(bt(We,"chats",o),{pinnedMessageId:de?null:se})},ut=se=>{ie(!1),Ve(""),setTimeout(()=>{const de=document.getElementById(`msg-${se}`);de&&(de.scrollIntoView({behavior:"smooth",block:"center"}),de.classList.add("bg-blue-500/20"),setTimeout(()=>de.classList.remove("bg-blue-500/20"),1500))},100)},ci=()=>!o||!me.trim()?[]:(b[o]||[]).filter(se=>{var de;return(de=se.text)==null?void 0:de.toLowerCase().includes(me.toLowerCase())}).reverse(),Dn=ee.useMemo(()=>M!=null&&M.pinnedMessageId?(b[o]||[]).find(se=>se.id===M.pinnedMessageId):null,[M==null?void 0:M.pinnedMessageId,b,o]),vs=()=>{const se=b[o]||[],de=[];let Le=null;return se.forEach(xe=>{const Re=new Date(xe.timestamp).toDateString();Re!==Le&&(de.push(v.jsx("div",{className:"flex justify-center my-3 animate-fade-in",children:v.jsx("div",{className:"bg-[#182533]/60 backdrop-blur-md px-3 py-1 rounded-full text-[12px] font-bold text-white/70 shadow-sm border border-white/5",children:KN(xe.timestamp)})},`date-${xe.timestamp}`)),Le=Re),de.push(v.jsx(kN,{message:xe,isMe:xe.senderId===n.id,onContextMenu:(be,tt)=>J({x:be.clientX,y:be.clientY,msg:tt,type:"msg"}),onReaction:be=>je(xe.id,be),onImageClick:be=>I(be),currentUserId:n.id},xe.id))}),de};return v.jsxs("div",{className:"flex h-[100dvh] w-full bg-[#0e1621] overflow-hidden",children:[v.jsx("div",{className:`flex flex-col h-full bg-[#17212b] border-r border-[#0e1621] transition-all duration-300 
        ${o?"hidden md:flex md:w-80 lg:w-96":"w-full md:w-80 lg:w-96"}`,children:v.jsx(VN,{chats:g,activeChatId:o,onChatSelect:se=>{u(se),ie(!1)},activeTab:f,onTabSelect:p,currentUser:n,onLogout:e,onProfileOpen:()=>j(n),onNewChat:se=>{j(null),u(null),setTimeout(()=>u(`c_${[n.id,se.id].sort().join("_")}`),10)}})}),v.jsx("div",{className:`flex-1 flex flex-col relative chat-bg min-w-0 transition-all duration-300 ${o?"flex h-full":"hidden md:flex"}`,children:M?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"h-16 bg-[#17212b]/95 backdrop-blur-xl border-b border-[#0e1621] flex items-center px-2 md:px-4 gap-1 md:gap-2 z-40 shrink-0 pt-[env(safe-area-inset-top)] box-content",children:G?v.jsxs("div",{className:"flex-1 flex items-center gap-2 animate-fade-in",children:[v.jsx("button",{onClick:()=>ie(!1),className:"text-[#7f91a4] hover:text-white p-2 transition-colors",children:v.jsx("i",{className:"fa-solid fa-chevron-left"})}),v.jsx("input",{autoFocus:!0,type:"text",placeholder:" ",value:me,onChange:se=>Ve(se.target.value),className:"flex-1 bg-transparent text-white outline-none font-medium placeholder:text-[#7f91a4]"}),me&&v.jsx("button",{onClick:()=>Ve(""),className:"text-[#7f91a4] p-2 hover:text-white transition-all",children:v.jsx("i",{className:"fa-solid fa-xmark"})})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>u(null),className:"md:hidden p-3 -ml-2 text-[#7f91a4] hover:text-white transition-all active:scale-90",children:v.jsx("i",{className:"fa-solid fa-chevron-left text-lg"})}),v.jsxs("div",{className:"flex-1 flex items-center gap-2 md:gap-3 cursor-pointer min-w-0",onClick:()=>te&&j(te),children:[v.jsx("div",{className:`w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center ${M.type==="saved"?"bg-blue-500":"bg-slate-700"} overflow-hidden shadow-lg border border-white/5`,children:M.type==="saved"?v.jsx("i",{className:"fa-solid fa-bookmark text-white"}):v.jsx("img",{src:te==null?void 0:te.avatarUrl,className:"w-full h-full object-cover"})}),v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsxs("h2",{className:"font-bold text-[15px] md:text-[16px] leading-tight text-white flex items-center min-w-0",children:[v.jsx("span",{className:"truncate",children:M.type==="saved"?"":te==null?void 0:te.username}),M.type!=="saved"&&(te==null?void 0:te.verified)&&v.jsx(ta,{className:"ml-1"})]}),ye?v.jsxs("div",{className:"flex items-center text-blue-400 text-[11px] font-bold",children:[v.jsx("span",{className:"typing-dot"}),v.jsx("span",{className:"typing-dot"}),v.jsx("span",{className:"typing-dot"}),v.jsx("span",{children:""})]}):v.jsx("span",{className:`text-[11px] block truncate ${te!=null&&te.online?"text-blue-400 font-bold":"text-[#7f91a4]"}`,children:M.type==="saved"?"":GN((te==null?void 0:te.online)||!1,(te==null?void 0:te.lastSeen)||0)})]})]}),v.jsxs("div",{className:"flex items-center gap-0 text-[#7f91a4] shrink-0",children:[v.jsx("button",{onClick:()=>ie(!0),className:"p-2 md:p-3 hover:text-white transition-all active:scale-90",title:"",children:v.jsx("i",{className:"fa-solid fa-magnifying-glass"})}),v.jsx("button",{onClick:()=>te&&le(te),className:"p-2 md:p-3 hover:text-white transition-all active:scale-90",title:"",children:v.jsx("i",{className:"fa-solid fa-phone"})}),v.jsx("button",{onClick:se=>J({x:se.clientX,y:se.clientY,type:"header"}),className:"p-2 md:p-3 hover:text-white transition-all active:scale-90",title:"",children:v.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})]})]})}),Dn&&!G&&v.jsxs("div",{className:"bg-[#17212b]/95 backdrop-blur-md border-b border-[#0e1621] flex items-center gap-3 px-4 py-2 cursor-pointer group hover:bg-white/[0.02] transition-all animate-slide-up z-30 shadow-lg",onClick:()=>ut(Dn.id),children:[v.jsx("div",{className:"w-[3px] self-stretch bg-blue-500 rounded-full"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:"text-[11px] font-bold text-blue-500 uppercase tracking-wider mb-0.5",children:" "}),v.jsx("div",{className:"text-[13px] text-white truncate max-w-full font-medium",children:Dn.text||(Dn.fileUrl?"":" ")})]}),v.jsx("button",{onClick:se=>{se.stopPropagation(),_t(Dn.id)},className:"text-[#7f91a4] hover:text-white p-2 transition-all opacity-0 group-hover:opacity-100",children:v.jsx("i",{className:"fa-solid fa-xmark text-sm"})})]}),v.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[G&&v.jsxs("div",{className:"absolute inset-0 z-[35] bg-[#0e1621] flex flex-col animate-fade-in shadow-inner",children:[v.jsx("div",{className:"p-4 border-b border-white/5 text-[#7f91a4] text-[10px] font-black uppercase tracking-[0.2em]",children:me.trim()?` ${ci().length} `:"   "}),v.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:me.trim()?ci().map(se=>v.jsxs("button",{onClick:()=>ut(se.id),className:"w-full p-4 flex gap-4 hover:bg-white/[0.03] active:bg-white/5 transition-all text-left border-b border-white/5",children:[v.jsx("img",{src:se.senderId===n.id?n.avatarUrl:te==null?void 0:te.avatarUrl,className:"w-10 h-10 rounded-full object-cover shrink-0 border border-white/5"}),v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsxs("div",{className:"flex justify-between items-center mb-1",children:[v.jsx("span",{className:"font-bold text-sm text-white truncate",children:se.senderId===n.id?"":te==null?void 0:te.username}),v.jsx("span",{className:"text-[10px] text-[#7f91a4]",children:new Date(se.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),v.jsx("div",{className:"text-sm text-[#7f91a4] line-clamp-2",children:se.text})]})]},se.id)):v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#7f91a4] opacity-20",children:[v.jsx("i",{className:"fa-solid fa-magnifying-glass text-6xl mb-4"}),v.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:" "})]})})]}),v.jsxs("div",{ref:Qe,className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-1 flex flex-col no-scrollbar",children:[v.jsx("div",{className:"flex-1"}),vs()]})]}),v.jsx(jN,{chatId:o,currentUserId:n.id,onSend:Ne,onFileSelect:se=>R([se]),replyTo:Z?{senderName:Z.senderId===n.id?"":(te==null?void 0:te.username)||"",text:Z.text}:null,onCancelReply:()=>oe(null)})]}):v.jsx("div",{className:"flex-1 flex items-center justify-center text-[#7f91a4] animate-fade-in",children:v.jsxs("div",{className:"bg-[#182533]/80 px-8 py-5 rounded-3xl text-center border border-white/5 shadow-2xl backdrop-blur-md",children:[v.jsx("i",{className:"fa-solid fa-paper-plane text-4xl mb-4 opacity-10 block"}),v.jsx("span",{className:"text-sm font-medium tracking-wide",children:" ,   "})]})})}),A&&v.jsx(PN,{user:A,currentUser:n,isMe:A.id===n.id,onUpdate:se=>{Oi(bt(We,"users",se.id),se),j(null)},onClose:()=>j(null)}),V&&v.jsx(FN,{user:V.peer,onClose:Te,onAccept:ce,isIncoming:V.isIncoming,status:V.status}),q&&v.jsx(qN,{x:q.x,y:q.y,onReaction:se=>q.msg&&je(q.msg.id,se),items:q.type==="msg"?[{label:"",icon:"fa-reply",onClick:()=>oe(q.msg)},{label:(M==null?void 0:M.pinnedMessageId)===((zi=q.msg)==null?void 0:zi.id)?"":"",icon:"fa-thumbtack",onClick:()=>q.msg&&_t(q.msg.id)},{label:" ",icon:"fa-copy",onClick:()=>q.msg&&navigator.clipboard.writeText(q.msg.text)},{label:"",icon:"fa-trash-can",onClick:()=>q.msg&&o&&YN(o,q.msg.id),danger:!0}]:[{label:C?" ":" ",icon:C?"fa-bell":"fa-bell-slash",onClick:()=>D(!C)},{label:"  ",icon:"fa-magnifying-glass",onClick:()=>ie(!0)},{label:" ",icon:"fa-broom",onClick:()=>{}},{label:" ",icon:"fa-trash",onClick:()=>{},danger:!0}],onClose:()=>J(null)}),fe&&v.jsx(HN,{src:fe,onClose:()=>I(null)}),x.length>0&&v.jsx(zN,{initialFiles:x,onClose:()=>R([]),onSend:(se,de)=>{de.forEach(Le=>Ne(se,Le)),R([])}})]})},YN=async(s,e)=>{await _T(bt(We,`chats/${s}/messages`,e))},XN=()=>{const[s,e]=ee.useState(null),[n,r]=ee.useState(!0),[o,u]=ee.useState(null);ee.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission();const p=async S=>{const A=qo.currentUser;if(A)try{await Oi(bt(We,"users",A.uid),{online:S,lastSeen:Date.now()})}catch(j){console.warn("Status sync failed",j)}},g=()=>p(!0),y=()=>p(!1);window.addEventListener("focus",g),window.addEventListener("blur",y),window.addEventListener("beforeunload",y),window.addEventListener("visibilitychange",()=>{p(document.visibilityState==="visible")});const b=JS(qo,async S=>{try{if(S){const A=await Lm(bt(We,"users",S.uid));if(A.exists()){const j={id:S.uid,...A.data()};e(j),p(!0)}}else e(null);u(null)}catch(A){console.error("Initialization Error:",A),u(A.message)}finally{r(!1)}});return()=>{b(),window.removeEventListener("focus",g),window.removeEventListener("blur",y),window.removeEventListener("beforeunload",y)}},[]);const f=async()=>{if(s)try{await Oi(bt(We,"users",s.id),{online:!1,lastSeen:Date.now()})}catch{}await ZS(qo),e(null)};return n?v.jsx("div",{className:"h-[100dvh] w-full bg-[#0b0f14] flex items-center justify-center",children:v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"w-12 h-12 border-2 border-blue-500/20 border-t-blue-500 rounded-full animate-spin mb-6"}),v.jsx("p",{className:"text-slate-500 font-bold tracking-[0.3em] text-[10px] uppercase",children:"MeganNait OS Initializing"})]})}):o?v.jsx("div",{className:"h-[100dvh] w-full bg-[#0b0f14] flex items-center justify-center p-6 text-center",children:v.jsxs("div",{className:"max-w-md bg-[#17212b] p-8 rounded-3xl border border-red-500/20 shadow-2xl",children:[v.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-500 text-4xl mb-4"}),v.jsx("h2",{className:"text-white font-bold text-xl mb-2",children:" "}),v.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:o}),v.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-500 text-white py-3 rounded-xl font-bold uppercase tracking-widest text-xs hover:bg-blue-600 transition-all",children:" "})]})}):v.jsx("div",{className:"h-[100dvh] w-full overflow-hidden select-none bg-[#0b0f14]",children:s?v.jsx(QN,{user:s,onLogout:f}):v.jsx(ON,{onComplete:()=>{}})})},TT=document.getElementById("root");if(!TT)throw new Error("Could not find root element to mount to");const $N=cw.createRoot(TT);$N.render(v.jsx(nw.StrictMode,{children:v.jsx(XN,{})}));
